/*! For license information please see fdreplay_v0.0.2.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("fdreplay",[],t):"object"==typeof exports?exports.fdreplay=t():e.fdreplay=t()}(self,(()=>(()=>{var e={1821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={COMPLEX_BUTTON_EVENT:{MOUSE_OVER:"onMOV",MOUSE_OUT:"onMOU",MOUSE_UP:"onMUP",CLICK:"onClick",SHOW_TOOLTIP:"showTooltip",FIRST_BUTTON_CLICK:"onFirstClick",SECOND_BUTTON_CLICK:"secondButtonOnClick"},MOUSE_EVENT:{MOUSE_CLICK:"onMouseClick",MOUSE_OVER:"onMouseOver",MOUSE_OUT:"onMouseOut",MOUSE_UP:"onMouseDown",MOUSE_DOWN:"onMouseDown",MOUSE_SHOW_TOOLTIP:"onShowTooltip"},CHANNEL_EVENT:{MOUSE_UP:"onMouseUp",MOUSE_DOWN:"onMouseDown"},BUTTON_EVENT:{PLAY:"play",PAUSE:"pause",REWIND:"rewind",FULL_SCREEN:"fullScreen",NORMAL_SCREEN:"normalScreen",FIRST_BUTTON_CLICK:"firstButtonClick",SECOND_BUTTON_CLICK:"secondButtonClick"},PLAYER_EVENT:{PROMISE:"promise",PLAY:"play",PAUSE:"pause",START:"start",STOP:"stop",PLAY_START:"playStart",PLAY_COMPLETE:"playComplete",START_TO_BUFFER:"startToBuffer",STOP_TO_BUFFER:"stopToBuffer",ERROR:"error",START_TO_SCRUB:"startToScrub",SCRUB:"scrub",STOP_TO_SCRUB:"stopToScrub",CHANGE_VOLUME:"changeVolume",CHANGE_RESOLUTION:"changeResolution",CHANGE_PLAYBACK_RATES:"changePlaybackRates",UPDATE:"update",UPDATE_TIME:"updateTime",UPDATE_VIDEO_SOURCE:"updateVideoSource",ENABLE_TO_SCRUB:"enableToControll",LOAD_PROGRESS:"loadProgress",PRELOADER_LOAD_DONE:"preloaderLoadDone",LOAD_ERROR:"loadError",SKIN_LOAD_COMPLETE:"skinLoadComplete",HIDE_COMPLETE:"hideComplete",VOLUME_SET:"volumeSet",FRAMEWORK_LOAD:"frameworkLoad",FRAMEWORK_DONE:"frameworkDone",HIDER_HIDE:"hide",HIDER_SHOW:"show",SHOW_CURSOR:"showCursor",PAUSE_ALL_VIDEOS:"pause",STOP_ALL_VIDEOS:"stop"},HIDE_EVENT:{SHOW:"show",HIDE:"hide",HIDE_COMPLETE:"hideComplete"},CONST_VAL:{VIDEO:"video",HLS:"HLS",RESPONSIVE:"responsive",POSITION_TOP:"top",POSITION_BOTTOM:"bottom",POSITION_CENTER:"center",POSITION_LEFT:"left",POSITION_RIGHT:"right"},COLOR:{DEFAULT:"#DD1D0F",WHITE:"#FFFFFF",BLACK:"#000000"}}},9562:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateElement=void 0,t.CreateElement=class{constructor(e,t,r,i,n){if(this.init=()=>{this.setElement()},this.setElement=e=>{e&&"img"===this.type?this.element=e:this.element=document.createElement(this.type),this.setMainProperties()},this.getElement=()=>this.element,this.setAttribute=(e,t)=>{this.element.setAttribute(e,t)},this.setMainProperties=()=>{this.transform=this.getTransform(),this.setPosition(this.position),this.setOverflow(this.overflow),this.element.style.left="0px",this.element.style.top="0px",this.element.style.margin="0px",this.element.style.padding="0px",this.element.style.maxWidth="none",this.element.style.maxHeight="none",this.element.style.border="none",this.element.style.lineHeight="1","img"===this&&(this.setWidth(this.element.width),this.setHeight(this.element.height))},this.getTransform=()=>{let e,t=["transform","msTransform","WebkitTransform","MozTransform","OTransform"];for(;e=t.shift();)if(void 0!==this.element.style[e])return e;return!1},this.setPosition=e=>{this.position=e,this.element.style.position=this.position},this.setOverflow=e=>{this.overflow=e,this.element.style.overflow=this.overflow},this.setWidth=e=>{this.w=e,"img"===this.type?(this.element.width=this.w,this.element.style.width=this.w+"px"):this.element.style.width=this.w+"px"},this.getWidth=()=>"div"===this.type||"input"===this.type?0!==this.element.offsetWidth?this.element.offsetWidth:this.w:"img"===this.type?0!==this.element.offsetWidth?this.element.offsetWidth:0!==this.element.width?this.element.width:this._w:"canvas"===this.type?0!==this.element.offsetWidth?this.element.offsetWidth:this.w:void 0,this.setHeight=e=>{this.h=e,"img"===this.type?(this.element.height=this.h,this.element.style.height=this.h+"px"):this.element.style.height=this.h+"px"},this.getHeight=()=>"div"===this.type||"input"===this.type?0!==this.element.offsetHeight?this.element.offsetHeight:this.h:"img"===this.type?0!==this.element.offsetHeight?this.element.offsetHeight:0!==this.element.height?this.element.height:this.h:"canvas"===this.type?0!==this.element.offsetHeight?this.element.offsetHeight:this.h:void 0,this.setX=e=>{this.x=e,this.hasT3D?this.t?this.element.style[this.transform]="translate3d("+this.x+"px,"+this.y+"px,0) scale("+this.scale+" , "+this.scale+") rotate("+this.rotation+"deg)":this.element.style[this.transform]="translate3d("+this.x+"px,"+this.y+"px,0)":this.hasT2D?this.t?this.element.style[this.transform]="translate("+this.x+"px,"+this.y+"px) scale("+this.scale+" , "+this.scale+") rotate("+this.rotation+"deg)":this.element.style[this.transform]="translate("+this.x+"px,"+this.y+"px)":this.element.style.left=this.x+"px"},this.getX=()=>this.x,this.setY=e=>{this.y=e,this.hasT3D?this.t?this.element.style[this.transform]="translate3d("+this.x+"px,"+this.y+"px,0) scale("+this.scale+" , "+this.scale+") rotate("+this.rotation+"deg)":this.element.style[this.transform]="translate3d("+this.x+"px,"+this.y+"px,0)":this.hasT2D?this.t?this.element.style[this.transform]="translate("+this.x+"px,"+this.y+"px) scale("+this.scale+" , "+this.scale+") rotate("+this.rotation+"deg)":this.element.style[this.transform]="translate("+this.x+"px,"+this.y+"px)":this.element.style.top=this.y+"px"},this.getY=()=>this.y,this.style=()=>this.element.style,this.setBkColor=e=>{this.element.style.backgroundColor=e},this.setAlpha=e=>{this.alpha=e,this.element.style.opacity=this.alpha},this.getAlpha=()=>this.alpha,this.setInnerHTML=e=>{this.innerHTML=e,this.element.innerHTML=this.innerHTML},this.getInnerHTML=()=>this.innerHTML,this.setVisible=e=>{this.visible=e,!0===this.visible?this.element.style.visibility="visible":this.element.style.visibility="hidden"},this.getVisible=()=>this.visible,this.setScale=e=>{this.scale=e,this.hasT3D?this.t?this.element.style[this.transform]="translate3d("+this.x+"px,"+this.y+"px,0) scale("+this.scale+" , "+this.scale+") rotate("+this.rotation+"deg)":this.element.style[this.transform]="translate3d("+this.x+"px,"+this.y+"px,0)":this.hasT2D&&(this.t?this.element.style[this.transform]="translate("+this.x+"px,"+this.y+"px) scale("+this.scale+" , "+this.scale+") rotate("+this.rotation+"deg)":this.element.style[this.transform]="translate("+this.x+"px,"+this.y+"px)")},this.getScale=()=>this.scale,this.setRotation=e=>{this.rotation=e,this.hasT3D?this.t?this.element.style[this.transform]="translate3d("+this.x+"px,"+this.y+"px,0) scale("+this.scale+" , "+this.scale+") rotate("+this.rotation+"deg)":this.element.style[this.transform]="translate3d("+this.x+"px,"+this.y+"px,0)":this.hasT2D&&(this.t?this.element.style[this.transform]="translate("+this.x+"px,"+this.y+"px) scale("+this.scale+" , "+this.scale+") rotate("+this.rotation+"deg)":this.element.style[this.transform]="translate("+this.x+"px,"+this.y+"px)")},this.getRotation=()=>this.rotation,this.setDisplay=e=>{this.display=e,this.element.style.display=this.display},this.setButtonMode=e=>{this.buttonMode=e,!0===this.buttonMode?this.element.style.cursor="pointer":this.element.style.cursor="default"},this.setBackgroundColor=e=>{this.element.style.backgroundColor=e},this.setSelectable=e=>{e?(this.utils.isFirefox()||this.utils.isIE()?(this.element.style.userSelect="element",this.element.style.MozUserSelect="element",this.element.style.msUserSelect="element"):this.utils.isSafari()?(this.element.style.userSelect="text",this.element.style.webkitUserSelect="text"):(this.element.style.userSelect="auto",this.element.style.webkitUserSelect="auto"),this.element.style.khtmlUserSelect="auto",this.element.style.oUserSelect="auto",this.utils.isIEAndLessThen9()?(this.element.ondragstart=null,this.element.onselectstart=null,this.element.ontouchstart=null):(this.element.ondragstart=void 0,this.element.onselectstart=void 0,this.element.ontouchstart=void 0),this.element.style.webkitTouchCallout="default",this.isHasBeenSetSelectable=!1):(this.element.style.userSelect="none",this.element.style.MozUserSelect="none",this.element.style.webkitUserSelect="none",this.element.style.khtmlUserSelect="none",this.element.style.oUserSelect="none",this.element.style.msUserSelect="none",this.element.msUserSelect="none",this.element.ondragstart=function(e){return!1},this.element.onselectstart=function(){return!1},this.element.ontouchstart=function(){return!1},this.element.style.webkitTouchCallout="none",this.isHasBeenSetSelectable=!0)},this.setResizableSizeAfterParent=()=>{this.element.style.width="100%",this.element.style.height="100%"},this.getRect=()=>this.element.getBoundingClientRect(),this.getGlobalX=()=>this.getRect().left,this.getGlobalY=()=>this.getRect().top,this.addChild=e=>{this.contains(e)?(this.arrChildren.splice(this.utils.indexOfArray(this.arrChildren,e),1),this.arrChildren.push(e),this.element.appendChild(e.element)):(this.arrChildren.push(e),this.element.appendChild(e.element))},this.removeChild=e=>{if(!this.contains(e))throw Error("Child dosen't exist, it can't be removed!");this.arrChildren.splice(this.utils.indexOfArray(this.arrChildren,e),1),this.element.removeChild(e.element)},this.contains=e=>-1!==this.utils.indexOfArray(this.arrChildren,e),this.addChildAt=(e,t)=>{if(0===this.getNumChildren())this.arrChildren.push(e),this.element.appendChild(e.element);else if(1===t)this.element.insertBefore(e.element,this.arrChildren[0].element),this.element.insertBefore(this.arrChildren[0].element,e.element),this.contains(e)?this.arrChildren.splice(this.utils.indexOfArray(this.arrChildren,e),1,e):this.arrChildren.splice(this.utils.indexOfArray(this.arrChildren,e),0,e);else{if(t<0||t>this.getNumChildren()-1)throw Error("Index out of bounds!");this.element.insertBefore(e.element,this.arrChildren[t].element),this.contains(e)?this.arrChildren.splice(this.utils.indexOfArray(this.arrChildren,e),1,e):this.arrChildren.splice(this.utils.indexOfArray(this.arrChildren,e),0,e)}},this.getChildAt=e=>{if(e<0||e>this.getNumChildren()-1)throw Error("Index out of bounds!");if(0===this.getNumChildren())throw Error("Child dose not exist!");return this.arrChildren[e]},this.getChildIndex=e=>this.contains(e)?this.utils.indexOfArray(this.arrChildren,e):0,this.removeChildAtZero=()=>{this.element.removeChild(this.arrChildren[0].element),this.arrChildren.shift()},this.getNumChildren=()=>this.arrChildren.length,this.addListener=(e,t)=>{if(void 0===e)throw Error("type is required.");if("object"==typeof e)throw Error("type must be of type String.");if("function"!=typeof t)throw Error("listener must be of type Function.");let r={};r.type=e,r.listener=t,r.target=this,this.listeners.arrEvents.push(r)},this.dispatchEvent=(e,t)=>{if(null!==this.listeners){if(void 0===e)throw Error("type is required.");if("object"==typeof e)throw Error("type must be of type String.");for(let r=0,i=this.listeners.arrEvents.length;r<i;r++)if(this.listeners.arrEvents[r].target===this&&this.listeners.arrEvents[r].type===e){if(t)for(let e in t)this.listeners.arrEvents[r][e]=t[e];this.listeners.arrEvents[r].listener.call(this,this.listeners.arrEvents[r])}}},this.removeListener=(e,t)=>{if(void 0===e)throw Error("type is required.");if("object"==typeof e)throw Error("type must be of type String.");if("function"!=typeof t)throw Error("listener must be of type Function."+e);for(let r=0,i=this.listeners.arrEvents.length;r<i;r++)if(this.listeners.arrEvents[r].target===this&&this.listeners.arrEvents[r].type===e&&this.listeners.arrEvents[r].listener===t){this.listeners.arrEvents.splice(r,1);break}},this.disposeImage=()=>{"img"===this.type&&(this.element.src=null)},this.destroy=()=>{this.isHasBeenSetSelectable&&(this.element.ondragstart=null,this.element.onselectstart=null,this.element.ontouchstart=null),this.listeners=null,this.arrChildren=null,this.arrChildren=null},this.utils=e,!t||"div"!==t&&"img"!==t&&"canvas"!==t&&"input"!==t)throw Error("Type is not valid! "+t);this.type=t,this.t=n,this.listeners={arrEvents:[]},this.arrChildren=[],this.position=r||"absolute",this.overflow=i||"hidden",this.display="block",this.visible=!0,this.x=this.y=this.w=this.h=this.rotation=0,this.scale=1,this.alpha=1,this.hasT3D=!0,this.hasT2D=!0,this.init()}}},6202:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0,t.EventDispatcher=class{constructor(){this.listeners={arrEvent:[]}}addListener(e,t){if(void 0===e)throw Error("type is required.");if("object"==typeof e)throw Error("type must be of type String.");if("function"!=typeof t)throw Error("listener must be of type Function.");let r={};r.type=e,r.listener=t,r.target=this,this.listeners.arrEvent.push(r)}dispatchEvent(e,t){if(null!=this.listeners){if(void 0===e)throw Error("type is required.");if("object"==typeof e)throw Error("type must be of type String.");if(this.listeners.arrEvent&&this.listeners.arrEvent.length>0)for(let r=0,i=this.listeners.arrEvent.length;r<i;r++)if(this.listeners.arrEvent[r].target===this&&this.listeners.arrEvent[r].type===e){if(t)for(let e in t)this.listeners.arrEvent[r][e]=t[e];this.listeners.arrEvent[r].listener.call(this,this.listeners.arrEvent[r])}}}removeListener(e,t){if(void 0===e)throw Error("type is required.");if("object"==typeof e)throw Error("type must be of type String.");if("function"!=typeof t)throw Error("listener must be of type Function."+e);for(let r=0,i=this.listeners.arrEvent.length;r<i;r++)if(this.listeners.arrEvent[r].target===this&&this.listeners.arrEvent[r].type===e&&this.listeners.arrEvent[r].listener===t){this.listeners.arrEvent.splice(r,1);break}}destroy(){this.listeners=null}}},6727:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FDPlayerConfig=t.VideoType=void 0;const n=r(6202),s=i(r(1821));t.VideoType={Replay:0,Interactive:1};class a extends n.EventDispatcher{constructor(e,t){super(),this.onPreloaderLoadHandler=()=>{this.dispatchEvent(s.default.PLAYER_EVENT.PRELOADER_LOAD_DONE)},this.utils=e,this.props=t,this.arrSkinPaths=[],this.arrImages=[],this.intControllerHeight=0,this.intCountLoadedSkinImages=0,this.fVolume=1,this.intControllerHideDelay=0,this.intStartSpaceBetweenBtns=0,this.intSpaceBetweenBtns=0,this.intSlidersOffsetWidth=0,this.intVolumeSliderOffsetRightWidth=0,this.intTimeOffsetLeftWidth=0,this.intTimeOffsetTop=0,this.intLogoMargins=0,this.intEmbedWindowCloseButtonMargins=0,this.intLoadImageId=0,this.intDispatchLoadSkinCompleteWithDelayId=0,this.isAllowToChangeVolume=!0,this.isMobile=this.utils.isMobile(),this.isHasPointerEvent=this.utils.hasPointerEvent(),this.init()}init(){this.parseProperties()}parseProperties(){try{this.fVolume=this.props.volume,this.fVolume||(this.fVolume=1),this.fVolume>1?this.fVolume=1:this.fVolume<=0&&(this.fVolume=0),this.intControllerHeight=parseInt(this.props.controllerHeight)||100,this.intStartSpaceBetweenBtns=this.props.startSpaceBetweenButtons||0,this.intControllerHideDelay=this.props.controllerHideDelay||2,this.intControllerHideDelay*=1e3,this.intSpaceBetweenBtns=this.props.spaceBetweenButtons||0,this.intSlidersOffsetWidth=this.props.slidersOffsetWidth||0,this.intVolumeSliderOffsetRightWidth=this.props.volumeSliderOffsetRightWidth||0,this.intTimeOffsetLeftWidth=this.props.timeOffsetLeftWidth||0,this.intTimeOffsetRightWidth=this.props.timeOffsetRightWidth||0,this.intTimeOffsetTop=this.props.timeOffsetTop||0,this.intLogoMargins=this.props.logoMargins||0,this.intTimeSliderOffestTop=this.props.timeSliderOffestTop||0,this.isPlaysinline=this.utils.convertStrToBool(this.props.playsinline),setTimeout((()=>{this.onPreloaderLoadHandler()}),1)}catch(e){console.log(e)}}}t.FDPlayerConfig=a},5020:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FDPlayerScreen=void 0;const n=r(6358),s=r(9562),a=r(6202),o=i(r(1821));class l extends a.EventDispatcher{constructor(e,t,r,i){super(),this.init=()=>{this.setVideo(),this.style().width="100%",this.style().height="100%"},this.setVideo=()=>{this.videoElement||(this.videoElement=document.createElement("video"),this.element.className="video-screen-holder",this.element.appendChild(this.videoElement),this.videoElement.controls=!1,this.videoElement.WebKitPlaysInline=!0,this.videoElement.playsinline=!0,this.videoElement.setAttribute("playsinline",""),this.videoElement.setAttribute("webkit-playsinline",""),this.videoElement.muted=!0,this.videoElement.autoplay=!0,this.videoElement.id="fdreplay",this.videoElement.style.position="relative",this.videoElement.style.left="0px",this.videoElement.style.top="0px",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.margin="0px",this.videoElement.style.padding="0px",this.videoElement.style.maxWidth="none",this.videoElement.style.maxHeight="none",this.videoElement.style.border="none",this.videoElement.style.lineHeight="0",this.videoElement.style.msTouchAction="none",this.element.appendChild(this.videoElement)),this.videoElement.addEventListener("play",this.onPlayHandler),this.videoElement.addEventListener("playing",this.onStopToBuffer),this.videoElement.addEventListener("pause",this.onPauseHandler),this.videoElement.addEventListener("canplay",this.onCanplayHandler),this.videoElement.addEventListener("suspend",this.onSuspendHandler),this.videoElement.addEventListener("seeking",this.onSeekingHandler),this.videoElement.addEventListener("seeked",this.onSeekedHandler),this.videoElement.addEventListener("timeupdate",this.onUpdateVideoHandler),this.videoElement.addEventListener("loadeddata",this.onLoadedDataHandler),this.videoElement.addEventListener("durationchange",this.onDurationChange),this.videoElement.addEventListener("ended",this.onEndedHandler),this.videoElement.addEventListener("error",this.onErrorHandler);const e=(t,{presentationTime:r,expectedDisplayTime:i,width:n,height:s,mediaTime:a,presentedFrames:o,processingDuration:l,captureTime:u,receiveTime:h,rtpTimestamp:f})=>{this.lastRenderedMediaTime=a,window.isFrameRendered=!0,this.videoElement.requestVideoFrameCallback(e)};this.videoElement.requestVideoFrameCallback(e),this.utils.isIE()||this.videoElement.addEventListener("waiting",this.onStartToBuffer)},this.onCanplayHandler=()=>{console.log("!!!!!!!!!! Video Canplay !!!!!!!!!!")},this.checkCurrentTime=()=>{this.checkedTime!==this.videoElement.currentTime&&(this.checkedTime=this.videoElement.currentTime,this.videoElement.dispatchEvent(new CustomEvent("timeupdate"))),window.requestAnimationFrame(this.checkCurrentTime)},this.onLoadedDataHandler=()=>{},this.onSuspendHandler=()=>{},this.onSeekingHandler=()=>{},this.onSeekedHandler=e=>{},this.onUpdateVideoHandler=e=>{},this.onDurationChange=()=>{},this.onPauseHandler=()=>{this.isAllowScrubbing||this.dispatchEvent(o.default.PLAYER_EVENT.PAUSE)},this.onPlayHandler=()=>{this.isAllowScrubbing||(this.isPlayHLS=!0,this.isAutoPlayStart&&(this.dispatchEvent(o.default.PLAYER_EVENT.START),this.isAutoPlayStart=!1),this.dispatchEvent(o.default.PLAYER_EVENT.PLAY))},this.onEndedHandler=()=>{this.dispatchEvent(o.default.PLAYER_EVENT.PLAY_COMPLETE)},this.onStartToBuffer=e=>{this.dispatchEvent(o.default.PLAYER_EVENT.START_TO_BUFFER)},this.onStopToBuffer=()=>{this.dispatchEvent(o.default.PLAYER_EVENT.STOP_TO_BUFFER)},this.onErrorHandler=e=>{let t;this.isHasError=!0,t=0===this.videoElement.networkState?"Error - networkState = 0":1===this.videoElement.networkState?"Error networkState = 1":3===this.videoElement.networkState?"Source not found":e,window.console&&window.console.log(this.videoElement.networkState),console.log("error code: ",this.videoElement.error.code," ",this.videoElement.error.message),this.dispatchEvent(o.default.PLAYER_EVENT.ERROR,{text:t})},this.destroyVideo=()=>{this.videoElement&&(this.videoElement.removeEventListener("play",this.onPlayHandler),this.videoElement.removeEventListener("playing",this.onStopToBuffer),this.videoElement.removeEventListener("pause",this.onPauseHandler),this.videoElement.removeEventListener("ended",this.onEndedHandler),this.videoElement.removeEventListener("error",this.onErrorHandler),this.utils.isIE()||this.videoElement.removeEventListener("waiting",this.onStartToBuffer),this.videoElement.currentTime=0,this.videoElement.pause(),this.videoElement.muted,this.videoElement.style.visibility="hidden")},this.resizeAndPosition=(e,t)=>{e&&(this.sW=e,this.sH=t),this.setWidth(this.sW),this.setHeight(this.sH),this.videoElement&&(this.videoElement.style.width="100%")},this.setSource=e=>{this.videoElement&&this.stop(),this.initVideo()},this.initVideo=()=>{this.isPlaying=!1,this.isHasError=!1,this.isAllowScrubbing=!1,this.isStopped=!1,this.setVideo(),this.videoElement.style.visibility="visible",this.setVolume(0),n.gsap.killTweensOf(this.element),this.setAlpha(0),n.gsap.to(this.element,{alpha:1,delay:.4,duration:.6})},this.play=e=>{if(console.log("fdplayer-screen play"),this.videoElement.ended)this.setVideo(),e.detachMedia(),e.attachMedia(this.videoElement);else try{this.isHasError=!1,this.isStopped=!1,this.isPlaying=!0,this.isPlayHLS=!0;let e=this.videoElement.play();this.dispatchEvent(o.default.PLAYER_EVENT.PROMISE,{promise:e}),this.setVolume(),this.utils.isIE()&&this.dispatchEvent(o.default.PLAYER_EVENT.PLAY)}catch(e){}},this.pause=()=>{if(null!==this&&!this.isStopped&&!this.isHasError&&!this.videoElement.ended)try{this.videoElement.pause(),this.isPlaying=!1,this.utils.isIE()&&this.dispatchEvent(o.default.PLAYER_EVENT.PAUSE)}catch(e){}},this.resume=()=>{this.isStopped||this.play()},this.stop=e=>{(null!==this&&null!==this.videoElement&&!this.isStopped||e)&&(this.isPlaying=!1,this.isStopped=!0,this.isPlayHLS=!1,this.destroyVideo(),this.dispatchEvent(o.default.PLAYER_EVENT.LOAD_PROGRESS,{percent:0}),this.dispatchEvent(o.default.PLAYER_EVENT.UPDATE_TIME,{curTime:"00:00",totalTime:"00:00"}),this.dispatchEvent(o.default.PLAYER_EVENT.STOP))},this.startToScrub=()=>{this.isAllowScrubbing=!0},this.stopToScrub=()=>{this.isAllowScrubbing=!1},this.scrubbAtTime=e=>{this.videoElement.currentTime=e;let t=this.utils.formatTime(this.videoElement.duration),r=this.utils.formatTime(this.videoElement.currentTime);this.dispatchEvent(o.default.PLAYER_EVENT.UPDATE_TIME,{curTime:r,totalTime:t})},this.scrub=(e,t)=>{t&&this.startToScrub();try{this.videoElement.currentTime=this.videoElement.duration*e;let t=this.utils.formatTime(Math.round(this.videoElement.duration)),r=this.utils.formatTime(Math.round(this.videoElement.currentTime));this.dispatchEvent(o.default.PLAYER_EVENT.UPDATE_TIME,{curTime:r,totalTime:t})}catch(t){}},this.setVolume=e=>{void 0!==e&&(this.volume=e),this.videoElement&&(this.videoElement.volume=this.volume,e&&(this.videoElement.muted=!1))},this.utils=e,this.parent=t,this.strBkColor=r,this.controllerHeight=t._playerMain.controllerHeight,this.sW=0,this.sH=0,this.volume=i,this.isHasError=!0,this.isStopped=!0,this.isMobile=this.utils.isMobile(),this.isAutoPlayStart=!0,this.__proto__=new s.CreateElement(this.utils,"div"),this.init()}replay(){this.scrub(0),this.play()}}t.FDPlayerScreen=l},1966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FDPlayerUtils=void 0,t.FDPlayerUtils=class{constructor(){this.dumy=document.createElement("div")}prt(e,t){for(void 0===t&&(t=1);t--&&e;)e=e.parentNode;return e&&1===e.nodeType?e:null}getChildById(e){return document.getElementById(e)||void 0}getChildAt(e,t){let r=this.getChildren(e);return t<0&&(t+=r.length),t<0?null:r[t]}getChildren(e,t){let r=[];for(let i=e.firstChild;null!==i;i=i.nextSibling)(t||1===i.nodeType)&&r.push(i);return r}getChildrenFromAttribute(e,t,r){let i=[];for(let n=e.firstChild;null!==n;n=n.nextSibling)(r&&this.hasAttribute(n,t)||1===n.nodeType&&this.hasAttribute(n,t))&&i.push(n);return 0===i.length?void 0:i}hasTransform3d(){let e,t,r=["transform","msTransform","WebkitTransform","MozTransform","OTransform","KhtmlTransform"];for(;e=r.shift();)if(void 0!==this.dumy.style[e]&&(this.dumy.style.position="absolute",t=this.dumy.getBoundingClientRect().left,this.dumy.style[e]="translate3d(500px, 0px, 0px)",this.dumy.getBoundingClientRect().left,t=Math.abs(this.dumy.getBoundingClientRect().left-t),t>100&&t<900)){try{document.documentElement.removeChild(this.dumy)}catch(e){}return!0}try{document.documentElement.removeChild(this.dumy)}catch(e){}return!1}hasTransform2d(){let e,t=["transform","msTransform","WebkitTransform","MozTransform","OTransform","KhtmlTransform"];for(;e===t.shift();)if(void 0!==this.dumy.style[e])return!0;try{document.documentElement.removeChild(this.dumy)}catch(e){}return!1}hitTest(e,t,r){if(!e)throw Error("Test target is null!");let i=e.getBoundingClientRect();return t>=i.left&&t<=i.left+(i.right-i.left)&&r>=i.top&&r<=i.top+(i.bottom-i.top)}getScrollOffsets(){return null!==window.pageXOffset?{x:window.pageXOffset,y:window.pageYOffset}:"CSS1Compat"===document.compatMode?{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}:void 0}getViewportSize(){return this.hasPointerEvent()&&navigator.msMaxTouchPoints>1?{w:document.documentElement.clientWidth||window.innerWidth,h:document.documentElement.clientHeight||window.innerHeight}:this.isMobile()?{w:window.innerWidth,h:window.innerHeight}:this.isChrome()||this.isFirefox()||this.isIE()||this.isSafari()?{w:window.screen.availWidth,h:window.screen.availHeight}:{w:document.documentElement.clientWidth||window.innerWidth,h:document.documentElement.clientHeight||window.innerHeight}}getViewportMouseCoordinates(e){let t=this.getScrollOffsets();return e.touches?{screenX:void 0===e.touches[0]?e.touches.pageX-t.x:e.touches[0].pageX-t.x,screenY:void 0===e.touches[0]?e.touches.pageY-t.y:e.touches[0].pageY-t.y}:{screenX:void 0===e.clientX?e.pageX-t.x:e.clientX,screenY:void 0===e.clientY?e.pageY-t.y:e.clientY}}trim(e){return e.replace(/\s/gi,"")}splitAndTrim(e,t){let r=e.split(","),i=r.length;for(let e=0;e<i;e++)t&&(r[e]=this.trim(r[e]));return r}checkTime(e){return!!/^(?:2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]$/.test(e)}formatTime(e){e=Math.round(e);let t=Math.floor(e/3600),r=e%3600,i=Math.floor(r/60),n=r%60,s=Math.ceil(n);return i=i>=10?i:"0"+i,s=s>=10?s:"0"+s,isNaN(s)?"00:00":t?t>=10?t+":"+i+":"+s:"0"+t+":"+i+":"+s:i+":"+s}formatTimeWithMiliseconds(e){let t=60*parseInt(e.split(":")[0])*60+60*parseInt(e.split(":")[1])+parseInt(e.split(":")[2])+parseInt(e.split(",")[1]||e.split(".")[1])/1e3;return t=Math.round(100*t)/100,t}getValidSource(e){if(!e)return;let t=e.substr(0,e.lastIndexOf("/")+1);this.isURLEncoded(t)||(t=encodeURI(t));let r=e.substr(e.lastIndexOf("/")+1);return r=e.match(/\.mp4|\.m3u8/gi)?this.isURLEncoded(r)?e.substr(e.lastIndexOf("/")+1):encodeURIComponent(e.substr(e.lastIndexOf("/")+1)):e.substr(e.lastIndexOf("/")+1),t+r}isURLEncoded(e){try{if(decodeURIComponent(e)!==e&&-1!==e.indexOf("%"))return!0}catch(e){}return!1}convertStrToBool(e){return"yes"===e}convertIntToBool(e){return 1===parseInt(e)}getSecondsFromString(e){let t=0,r=0,i=0,n=0;if(e)return t=(e=e.split(":"))[0],"0"===t[0]&&"0"!==t[1]&&(t=parseInt(t[1])),"00"===t&&(t=0),r=e[1],"0"===r[0]&&"0"!==r[1]&&(r=parseInt(r[1])),"00"===r&&(r=0),i=parseInt(e[2].replace(/,.*/gi,"")),"0"===i[0]&&"0"!==i[1]&&(i=parseInt(i[1])),"00"===i&&(i=0),0!==t&&(n+=60*t*60),0!==r&&(n+=60*r),n+=i,n}hexToRgb(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,i){return t+t+r+r+i+i}));let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t=t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null,"rgb("+t.r+","+t.g+","+t.b+")"}getUrlArgs(e){let t={},r=e.substr(e.indexOf("?")+1);r=r.replace(/(\?*)(\/*)/g,"");let i=r.split("&");for(let e=0;e<i.length;e++){let r=i[e].indexOf("="),n=i[e].substring(0,r),s=i[e].substring(r+1);s=decodeURIComponent(s),t[n]=s}return t}getStartTimeStamp(e){let t=window.location.href;if(t=t.substr(t.indexOf(e+"=")+2),-1!==t.indexOf("&")&&(t=t.substr(0,t.indexOf("&"))),-1!==t.indexOf("s&")&&(t=t.substr(0,t.indexOf("s&")+1)),t.match(/:/))return"00:00";let r=/\d+h/g,i=t.match(r);try{i=t.match(r)[0]}catch(e){}i&&(i=i.substr(0,i.length-1),1===i.length&&parseInt(i)<10&&(i="0"+i),parseInt(i)>59&&(i=59)),i=i||"00";let n=/\d+m/g,s=t.match(n);try{s=t.match(n)[0]}catch(e){}s&&(s=s.substr(0,s.length-1),1===s.length&&parseInt(s)<10&&(s="0"+s),parseInt(s)>59&&(s=59)),s=s||"00";let a=/\d+s/g,o=t.match(a);try{o=t.match(a)[0]}catch(e){}return o&&(o=o.substr(0,o.length-1),1===o.length&&parseInt(o)<10&&(o="0"+o),parseInt(o)>59&&(o=59)),o=o||"00",i+":"+s+":"+o}getCurrentTime(e){let t;return e||(e="text"),t="milliseconds"===e?this.curTimeInmilliseconds?this.curTimeInmilliseconds:0:"seconds"===e?this.curTimeInSecond?this.curTimeInSecond:0:this.curTime?this.curTime:"00:00",t}getCurrentTimeWithSecond(e){if(isNaN(e))return"00:00";const t=new Date(1e3*e),r=t.getUTCHours(),i=t.getUTCMinutes().toString().padStart(2,"0"),n=t.getUTCSeconds().toString().padStart(2,"0");return r?`${r}:${i}:${n}`:`${i}:${n}`}getCurrentTimeWithMillisecond(e){if(isNaN(e))return"00:00";const t=new Date(1e3*e),r=t.getUTCHours(),i=t.getUTCMinutes().toString().padStart(2,"0"),n=t.getUTCSeconds().toString().padStart(2,"0"),s=t.getUTCMilliseconds().toString().padStart(3,"0");return r?`${r}:${i}:${n}.${s}`:`${i}:${n}.${s}`}timeRangesToString(e,t){let r="";for(let i=0;i<e.length;i++)r="start"===t?e.start(i):e.end(i);return r}indexOfArray(e,t){let r=e.length;for(let i=0;i<r;i++)if(e[i]===t)return i;return-1}hasHTMLHLS(){let e=document.createElement("video"),t=!1;return e.canPlayType&&(t=Boolean("probably"===e.canPlayType("application/vnd.apple.mpegurl")||"maybe"===e.canPlayType("application/vnd.apple.mpegurl"))),t}hasPointerEvent(){return Boolean(window.navigator.msPointerEnabled)||Boolean(window.navigator.pointerEnabled)}isMobile(){const e=["android","webos","iphone","ipad","blackberry"];for(let t in e)if(-1!==navigator.userAgent.toLowerCase().indexOf(e[t]))return!0;return"macintel"===navigator.userAgent.toLowerCase()&&navigator.maxTouchPoints>1&&!window.MSStream}is4Dbrowser(){return-1!==navigator.userAgent.toLowerCase().indexOf("4dreplay")}isAndroid(){return-1!==navigator.userAgent.toLowerCase().indexOf("android".toLowerCase())}isIOS(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)}isFirefox(){return-1!==navigator.userAgent.toLowerCase().indexOf("firefox")}isSafari(){return-1!==navigator.userAgent.toLowerCase().indexOf("safari")&&-1===navigator.userAgent.toLowerCase().indexOf("chrome")}isOpera(){return-1!==navigator.userAgent.toLowerCase().indexOf("opr")}isIEWebKit(){return Boolean(document.documentElement.msRequestFullscreen)}isIE(){return Boolean(-1!==navigator.userAgent.toLowerCase().indexOf("msie"))||Boolean(-1!==navigator.userAgent.toLowerCase().indexOf("edge"))||Boolean(document.documentElement.msRequestFullscreen)}isIEAndLessThen9(){return Boolean(-1!==navigator.userAgent.toLowerCase().indexOf("msie 7"))||Boolean(-1!==navigator.userAgent.toLowerCase().indexOf("msie 8"))}isChrome(){if(this.isIE())return!1;let e=navigator.userAgent.toLowerCase();return e.match(/browser/gi)?void 0:e.match(/chrome/gi)}isIE7(){return Boolean(-1!==navigator.userAgent.toLowerCase().indexOf("msie 7"))}isApple(){return Boolean(-1!==navigator.userAgent.toLowerCase().indexOf("mac"))}IOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.userAgent&&navigator.maxTouchPoints>1}isIphone(){return navigator.userAgent.match(/(iPhone|iPod)/g)}hasFullScreen(){return this.dumy.requestFullScreen||this.dumy.mozRequestFullScreen||this.dumy.webkitRequestFullScreen||this.dumy.msieRequestFullScreen}createAnimationFrame(){window.requestAniFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},window.cancelAniFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(e){return window.clearTimeout(e)}}}},5587:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FDPlayer=void 0;const s=r(9945),a=r(1966),o=r(6727),l=r(5020),u=r(9562),h=r(6202),f=r(5542),c=n(r(9635)),d=n(r(1821)),m=r(2862),p={playerId:"hls-player",displayType:"responsive",playsinline:"yes",showPlayerByDefault:"yes",maxWidth:640,maxHeight:360,volume:.3,backgroundColor:"#212121",offsetX:0,offsetY:0,controllerHeight:85,controllerHideDelay:3,startSpaceBetweenButtons:7,spaceBetweenButtons:9,timeSliderOffestTop:14,slidersOffsetWidth:4,timeOffsetLeftWidth:5,timeOffsetRightWidth:3,volumeSliderWidth:80,volumeSliderOffsetRightWidth:0},g=1.001/30;class _ extends h.EventDispatcher{constructor(e){super(),this.props=p,this.stopLoad=()=>{this._hls&&this._hls.stopLoad()},this.startLoadLiveLevel=()=>{this._hls.startLoadLiveLevel()},this.stopLoadLiveLevel=()=>{this._hls.stopLoadLiveLevel()},this.getPlayerUtils=()=>this.utils,this.checkStreamState=()=>{if(this._hls)if(this._hls.isLive);else{const e=this._hls.state,t=this.objVideoScreen.videoElement;t.duration-t.currentTime<=2*g&&(e===f.State.ENDED||this.isVideoComplete)&&(this.isVideoComplete=!1,this.setCurrentTimeInfo(0),window.callUpdatePlaybackTime(0),this._hls.state=f.State.IDLE)}return!0},this.resetVideoState=()=>{this.setCurrentTimeInfo(0),this._hls.removeLastBufferedFragment(),this._hls.removeLastBufferedFrame(),this._hls.removeAllFrames(),this._hls.removeAllFragments();const e=this._hls.currentTime;this._hls.addInitFrameSegment=!1,this._hls.startLoad(e),window.callByInLoadingBar(!1),window.callByInIsPlaying(!0),this.resume()},this.checkPlayerReady=()=>this.isVideoPlayerReady,this.onPreloaderLoadDone=()=>{this.resizeHandler(),window.removeEventListener("scroll",this.onScrollHandler),this.setVideoPlayer()},this.onScrollHandler=e=>{this.scrollHandler();let t=this.utils.getScrollOffsets();this.scrollOffsets=t},this.scrollHandler=()=>{let e=this.utils.getScrollOffsets();this.pageXOffset=e.x,this.pageYOffset=e.y,this.isFullScreen&&(this._playerMain.setX(e.x),this._playerMain.setY(e.y))},this.onResizeHandler=()=>{this.resizeHandler(),clearTimeout(this.resizeHandler2Id_to),this.resizeHandler2Id_to=setTimeout((()=>{this.resizeHandler()}),300)},this.orientationChange=()=>{this.isOrintationChangeComplete=!1,clearTimeout(this.resizeHandlerId_to),clearTimeout(this.resizeHandler2Id_to),clearTimeout(this.orientationChangeId_to),this.orientationChangeId_to=setTimeout((()=>{this.isOrintationChangeComplete=!0,this.resizeHandler()}),150),this.videoContainer.style.left="-5000px",this.objPreloader&&this.objPreloader.setX(-5e3)},this.resizeHandler=()=>{let e=this.utils.getViewportSize();this.ws=e,this.isFullScreen?(this._playerMain.setX(0),this._playerMain.setY(0),this.sW=e.w+2,this.sH=e.h+2):(this.videoContainer.style.width="100%",this.videoContainer.offsetWidth>this.intMaxWidth&&(this.videoContainer.style.width=this.intMaxWidth+"px"),this.sW=this.videoContainer.offsetWidth,this.isAutoScale?(this.sW=this.originalPlayerSize.width,this.sH=this.intMaxHeight*(this.sW/this.intMaxWidth)):this.sH=this.intMaxHeight,this.videoContainer.style.height=this.sH+"px"),this.originalPlayerSize={width:this.videoContainer.clientWidth,height:this.videoContainer.clientHeight},this.tempVideoContainerWidth=this.sW,this.tempVideoContainerHeight=this.sH,this._playerMain.setWidth(this.sW),this._playerMain.setHeight(this.sH),this.objVideoScreen&&(this.objVideoScreen.resizeAndPosition(this.sW,this.sH),this.objVideoScreen.setX(0),this.objVideoScreen.setY(0))},this.videoScreenPromiseHandler=e=>{console.log("!!!!!!!!!! Video Promise !!!!!!!!!!"),"IDLE"!==this._hls.state&&(this._hls.state="IDLE"),this._hls.streamController.videoIsPlaying||(this._hls.streamController.videoIsPlaying=!0,this._hls.streamController.videoIsPause=!1),this.playPromise=e.promise},this.videoScreenStartHandler=()=>{console.log("!!!!!!!!!! Video Auto Start !!!!!!!!!!"),window.callByInLoadingBar(!1),window.callByInIsPlaying(!0),this.resume()},this.videoScreenStopHandler=()=>{console.log("!!!!!!!!!! Video Stop !!!!!!!!!!")},this.videoScreenPlayHandler=()=>{console.log("!!!!!!!!!! Video Play !!!!!!!!!!")},this.videoScreenPauseHandler=()=>{console.log("!!!!!!!!!! Video Pause !!!!!!!!!!"),this.isFramePauseAndContinue&&(this.isFramePauseAndContinue=!1)},this.videoScreenUpdateHandler=e=>{},this.videoScreenUpdateTimeHandler=e=>{},this.videoScreenLoadProgressHandler=e=>{},this.videoScreenStartToBufferHandler=()=>{if(console.log("!!!!!!!!!! Video Buffering waiting !!!!!!!!!!"),this.isVideoComplete){const e=this.objVideoScreen.videoElement;this._hls.currentTime=e.duration}this.isMobile&&this.isStopTimeslice&&!this.objVideoScreen.videoElement.paused&&!this._hls.videoIsPlaying&&void 0!==this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{}))},this.videoScreenStopToBufferHandler=()=>{console.log("!!!!!!!!!! Video Buffering playing !!!!!!!!!!")},this.videoScreenPlayCompleteHandler=()=>{console.log("!!!!!!!!!! Video Complete !!!!!!!!!!"),this.isLoop&&(this._hls.currentTime=0,this.mediaPlay())},this.videoScreenEnableToScrubHandler=()=>{},this.videoScreenErrorHandler=()=>{},this.addMainDoToTheOriginalParent=e=>{(this.isFullScreen||e)&&(document.removeEventListener&&(document.removeEventListener("fullscreenchange",this.onFullScreenChange),document.removeEventListener("mozfullscreenchange",this.onFullScreenChange),document.removeEventListener("webkitfullscreenchange",this.onFullScreenChange),document.removeEventListener("MSFullscreenChange",this.onFullScreenChange)),this.strDisplayType===d.default.CONST_VAL.RESPONSIVE?(document.documentElement.style.overflow="visible",this._playerMain.style().position="relative",this._playerMain.style().zIndex=0,this.isMin?(this._playerMain.style().position="fixed",this._playerMain.style().zIndex=9999999999999):(this._playerMain.style().position="relative",this._playerMain.style().zIndex=0)):(this._playerMain.style().position="absolute",this._playerMain.style().zIndex=9999999999998),this.showCursor(),window.scrollTo(this.lastX,this.lastY),this.isIE||setTimeout((()=>{window.scrollTo(this.lastX,this.lastY)}),150),this.isMobile&&window.removeEventListener("touchmove",this.disableFullScreenOnMobileHandler))},this.onFullScreenChange=e=>{document.fullScreen||document.msFullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msieFullScreen||(window.callBySetBtnFullScreenByESC(!1),this.isFullScreen=!1,this.addMainDoToTheOriginalParent(!0))},this.autoplay=()=>{this.mediaPlay()},this.resume=()=>{this.mediaPlay()},this.seek=e=>{this.isPositionInBufferRange(e)?(console.log("isPositionInBufferRange true"),this._hls.media.currentTime=e):(console.log("hoon"),this._hls.media.currentTime=e,this._hls.switchFrame({frameCount:0,startFrame:0,frameDirection:null,isPlaying:!1}))},this.mediaPlay=()=>{this.isVideoPlayerReady&&!this.isVideoComplete&&(this.isHLSManifestReady=this.getPrevHlsInfo(),this.isHLSManifestReady&&this.objVideoScreen&&(this.isStopTimeslice=!1,this.isRemoveRemainingBuffer=!1,this._hls.isLive||(this._hls.pausedBufferFrame=null),this.isMobile&&this._hls.mobileCurrentTime>0&&(this._hls.currentTime=this._hls.mobileCurrentTime,this._hls.mobileCurrentTime=-1),this.playbackTimer=window.requestAniFrame(this.checkPlayback),this.objVideoScreen.play(this._hls),console.log("set videoIsPlaying to true"),this._hls.videoIsPlaying=!0,this._hls.videoIsPause=!1,this._hls.state!==f.State.IDLE&&this._hls.state!==f.State.SWITCHING_CHANNEL&&this._hls.state!==f.State.SWITCHING_FRAME||this._hls.startLoad(this._hls.currentTime)))},this.pause=()=>{this.isVideoPlayerReady&&(this.playbackTimer&&window.cancelAniFrame(this.playbackTimer),this.objVideoScreen&&this.objVideoScreen.pause(),this._hls&&(this._hls.videoIsPlaying=!1,this._hls.videoIsPause=!0),this.setMediaLiveOff(!1))},this.stop=()=>{this.isVideoPlayerReady&&(this.objVideoScreen.stop(),this._hls&&(this._hls.videoIsPlaying=!1,this.playbackTimer&&window.cancelAniFrame(this.playbackTimer),this.destroyHLS()),this.isHLSManifestReady=!1)},this.startToScrub=()=>{this.isVideoPlayerReady&&this.objVideoScreen&&this.objVideoScreen.startToScrub()},this.stopToScrub=()=>{this.isVideoPlayerReady&&this.objVideoScreen&&this.objVideoScreen.stopToScrub()},this.scrub=(e,t)=>{this.isVideoPlayerReady&&(isNaN(e)||(e<0?e=0:e>1&&(e=1),this.objVideoScreen&&this.objVideoScreen.scrub(e)))},this.scrubbAtTime=e=>{this.isVideoPlayerReady&&e&&(-1!==String(e).indexOf(":")&&(e=this.utils.getSecondsFromString(e)),this.objVideoScreen&&this.objVideoScreen.scrubbAtTime(e))},this.setVolume=(e,t)=>{this.isVideoPlayerReady&&(e&&t&&(this._playerConfig.isAutoPlay=!1),this.volume=e,this.objVideoScreen.setVolume(this.volume))},this.loadHlsFile=e=>{this._hls?(this._hls.isMobile=this.isMobile,this._hls.currentChannelList=this.channelList,this._hls.playbackChannel=this.initChannel,this._hls.loadSource(this.fixedUrl,this.initVideoUrl),this._hls.videoType=e,this._hls.autoLevelCapping=-1,this._hls.attachMedia(this.objVideoScreen.videoElement),this.setHlsAddEventListeners(this._hls)):window.callByError("HLS Object is not loaded.")},this.seekBarMouseDownHandler=()=>{if(this.isVideoPlayerReady)try{this._hls.stopLoad(),this._hls.removeLastBufferedFragment(),this._hls.removeLastBufferedFrame(),clearInterval(this._hls.bufferTimer),this._hls.videoIsPlaying&&(this.playbackTimer&&window.cancelAniFrame(this.playbackTimer),this.objVideoScreen&&void 0!==this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{}))),this.objVideoScreen&&this.objVideoScreen.startToScrub()}catch(e){console.log(e)}},this.seekBarMouseUpHandler=e=>{if(!this.isVideoPlayerReady)return;const{_hls:t}=this;try{this.objVideoScreen&&this.objVideoScreen.stopToScrub(),this.objVideoScreen&&void 0!==this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{})),console.log(`SeekBar Current Time: ${e}`),t.seekStartPosition=e,t.addInitFrameSegment=!1,this.isVideoComplete&&(this.isVideoComplete=!1),t.isLive?(t.state=f.State.SEEK,t.switchingGOP(30),t.removeAllFrames(),t.removeAllFragments(),t.removeBufferAll()):(this.setCurrentTimeInfo(e),this.seekBarActionComplete())}catch(e){console.log(e)}},this.seekBarActionComplete=()=>{const{_hls:e}=this;e.videoIsPlaying&&setTimeout((()=>{this.playPromise=this.objVideoScreen.videoElement.play(),this.playbackTimer=window.requestAniFrame(this.checkPlayback)}),200),this.isMobile&&!e.videoIsPlaying&&(e.mobileCurrentTime=e.seekStartPosition),e.startLoad(e.seekStartPosition)},this.createObjHls=(e,t)=>i(this,void 0,void 0,(function*(){this._hls&&(this._hls.destroy(),clearInterval(this._hls.bufferTimer),this._hls=null),this.isHlsLoaded=!0,this._hls=yield new c.default,this._hls&&e(t)})),this.getPrevHlsInfo=()=>!!this._hls,this.setHlsAddEventListeners=e=>{e.on(c.default.Events.MEDIA_ATTACHED,(()=>{})),e.on(c.default.Events.MEDIA_DETACHED,(()=>{})),e.on(c.default.Events.BUFFER_RESET,(()=>{})),e.on(c.default.Events.BUFFER_RESET_FOR_CHANNEL,(()=>{clearInterval(this._hls.bufferTimer),this.checkBuffer(!1)})),e.on(c.default.Events.BUFFER_CREATED,((e,t)=>{})),e.on(c.default.Events.BUFFER_APPENDING,((e,t)=>{})),e.on(c.default.Events.LEVEL_SWITCHING,((e,t)=>{console.log("--- Level Switching ---"),this.updateLevelInfo()})),e.on(c.default.Events.LEVEL_SWITCHED,((e,t)=>{console.log("--- Level Switched ---"),this.updateLevelInfo()})),e.on(c.default.Events.MANIFEST_PARSED,((e,t)=>{this.isHLSManifestReady=!0,this.updateLevelInfo()})),e.on(c.default.Events.FRAG_CHANGED,((e,t)=>{})),e.on(c.default.Events.FRAG_BUFFERED,((e,t)=>{console.log("%c --- FRAG_BUFFERED ---","color:green"),clearInterval(this._hls.bufferTimer),this._hls.bufferTimer=window.self.setInterval(this.checkBuffer,100)})),e.on(c.default.Events.FRAG_LOAD_EMERGENCY_ABORTED,((e,t)=>{})),e.on(c.default.Events.LEVEL_LOADED,((e,t)=>{if(console.log("Hls.Events.LEVEL_LOADED: ",t.level),t){if(!t.details)return;t.level&&window.callByLevel(t.level)}})),e.on(c.default.Events.DESTROYING,(()=>{clearInterval(this._hls.bufferTimer)})),e.on(c.default.Events.ERROR,((e,t)=>{console.log(t)})),e.on(c.default.Events.PLAY_CHANNEL_BUFFER,(()=>{this.objVideoScreen&&(e.frameIsPlaying=!0,this.playPromise=this.objVideoScreen.videoElement.play())})),e.on(c.default.Events.MEDIA_PAUSE,(()=>{this.objVideoScreen&&void 0!==this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{}))})),e.on(c.default.Events.PLAY_COMPLETE,(()=>{clearInterval(this._hls.bufferTimer)})),e.on(c.default.Events.RESET_PREVIOUS_DATA,(()=>{this.previousFrame=-1,this.previousChannel=-1,this.previousContinueFrameSn=-1})),e.on(c.default.Events.RESET_VIDEO_STATE,(()=>{switch(this._hls.state){case f.State.SEEK:this.seekBarActionComplete();break;case f.State.SWITCHING_LIVE_ON:this.startLiveOnNow();break;default:this.resetVideoState()}})),e.on(c.default.Events.BUFFER_REMOVE_ALL,(()=>{console.log("BUFFER_REMOVE_ALL DONE"),this._hls.state===f.State.SWITCHING_CHANNEL?this.executeChannelSwitch():this._hls.state===f.State.SWITCHING_POSITION&&this._hls.switchPosition({channelNumber:this.nextChannelNumber,channelSwitchRequestedTimestamp:this.channelSwitchRequestedTimestamp})})),e.on(c.default.Events.BUFFER_REMOVE_RANGE,((e,t)=>{switch(this._hls.state){case f.State.SWITCHING_CHANNEL:case f.State.ENDED:t.isTest||(console.log("BUFFER_REMOVE_RANGE"),this.executeChannelSwitch());break;case f.State.SWITCHING_FRAME:console.log("BUFFER_REMOVE_RANGE"),this.executeFrameSwitch();break;case f.State.SWITCHING_FRAME_STOP:this._hls.removeAllFrames();const e=this._hls.mobileCurrentTime;this._hls.mobileCurrentTime=-1,this._hls.state=f.State.IDLE,this._hls.addInitFrameSegment=!1,console.log(`Start Position: ${e}`),this._hls.currentTime=e,this._hls.startLoad(e);break;case f.State.SEEK:this.seekBarActionComplete()}})),e.on(c.default.Events.TIMESLICE_EMSG_PARSED,(()=>{})),e.on(c.default.Events.TIMESLICE_FRAG_APPENDED,(()=>{this.isChannelSwitching=!1,console.log("hoon TIMESLICE_FRAG_APPENDED. set state to IDLE: ",this.isChannelSwitching),this._hls.state=f.State.IDLE})),e.on(c.default.Events.TIMEMACHINE_EMSG_PARSED,((e,t)=>{t.frameTime&&window.callUpdatePlaybackTime(t.frameTime)})),e.on(c.default.Events.STREAM_STATE_TRANSITION,((e,t)=>{console.log(`Stream State: ${t.previousState} -> ${t.nextState}`)})),e.on(c.default.Events.MEDIA_LIVE_ON,((e,t)=>{window.callUpdateIsLive(!0),window.callUpdateIsNow(!0),this._hls.liveIsNow=!0,this._hls.playlistDownload=t.download})),e.on(c.default.Events.MEDIA_LIVE_OFF,((e,t)=>{window.callUpdateIsLive(!0),window.callUpdateIsNow(!1),this._hls.liveIsNow=!1,this._hls.playlistDownload=t.download})),e.on(c.default.Events.START_LIVE_ON_NOW,((e,t)=>{window.callByInLoadingBar(!1),window.callByInIsPlaying(!0);let r=this.objVideoScreen.videoElement.currentTime;console.log("%c *************************************************","color:orange"),console.log(`%c LiveStartTime: ${r}`,"color:orange"),console.log("%c *************************************************","color:orange"),this.resume()}))},this.checkBuffer=(e=!0)=>{try{this._hls.videoIsPlaying&&this.isSwitchBuffering&&(this.isSwitchBuffering=!1,this.objVideoScreen&&(this.playPromise=this.objVideoScreen.videoElement.play()),window.cancelAniFrame(this.playbackTimer),this.playbackTimer=window.requestAniFrame(this.checkPlayback)),this.objVideoScreen&&(!this.isMobile||this._hls.state!==f.State.SWITCHING_CHANNEL&&this._hls.state!==f.State.SWITCHING_FRAME?(window.callUpdateDuration(this.objVideoScreen.videoElement.duration),this._hls.videoIsPlaying||window.callUpdatePlaybackTime(this.objVideoScreen.videoElement.currentTime)):this._hls.isLive?(window.callUpdateDuration(this._hls.liveEndSeq*this._hls.config.FRAGMENT_DURATION),this._hls.videoIsPlaying||window.callUpdatePlaybackTime(this._hls.mobileCurrentTime)):this._hls.videoIsPlaying||window.callUpdatePlaybackTime(this._hls.mobileCurrentTime))}catch(e){console.log(`checkBuffer Error: ${e}`)}},this.checkPlayback=()=>{let e=this.objVideoScreen.videoElement.currentTime,t=this.objVideoScreen.videoElement.duration;try{if(window.cancelAniFrame(this.playbackTimer),this.playbackTimer=window.requestAniFrame(this.checkPlayback),e>=t)return e=t,window.callByInIsPlaying(!1),this._hls.videoIsPlaying&&this.objVideoScreen&&this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{})),this._hls.videoIsPlaying=!1,window.callUpdatePlaybackTime(e),void window.callUpdateDuration(t);window.callUpdatePlaybackTime(e),e<=t&&(this.playbackTimer=window.requestAniFrame(this.checkPlayback)),window.callUpdateDuration(t)}catch(e){console.log(`checkPlayback Error: ${e}`)}},this.updateLevelInfo=()=>{this._hls.levels&&(this._hls.levels,this._hls.currentLevel,this._hls.manualLevel,this._hls.currentLevelHeight)},this.updateLevelAuto=()=>{this._hls.loadLevel=-1},this.updateLevelManual=e=>{this._hls.loadLevel=e},this.setCurrentTimeInfo=e=>{this._hls.currentTime=e},this.setInitFrameSegment=()=>{this._hls&&(this._hls.addInitFrameSegment=!1)},this.setChannelDirection=e=>{this.previousChannel=-1,this.previousContinueFrameSn=-1,this.channelDirection=e},this.setMediaLiveOn=e=>{this._hls&&this._hls.isLive&&this._hls.trigger(c.default.Events.MEDIA_LIVE_ON,{download:e})},this.setMediaLiveOff=e=>{this._hls&&this._hls.isLive&&this._hls.trigger(c.default.Events.MEDIA_LIVE_OFF,{download:e})},this.changeStateRequestAniFrameForChannel=e=>{this.isRequestAniFrameForChannel=e},this.removeRemainingBuffer=e=>{let t,r,i,n;if(this._hls){const s=this._hls.currentTime,a=this._hls.videoIsPlaying;this.isMobile&&this._hls.state!==f.State.SWITCHING_CHANNEL&&-1===this._hls.mobileCurrentTime&&(this._hls.mobileCurrentTime=s),this._hls.state=f.State.SWITCHING_CHANNEL,t=this._hls.pausedBufferFrame?this._hls.pausedBufferFrame:this._hls.lastBufferedFrame,r=t?t.sn:Math.floor(s/g),i=a?r+1:r,n=i*g,console.log(`Timeslice Start Time: ${s}`),console.log(`Timeslice Start Frame Seq: ${r}`),console.log(`Timeslice Request Time: ${n}`),console.log(`Timeslice Request Frame Seq: ${i}`),console.log(""),this.isMobile?this._hls.removeBufferAllForTimeslice(e):this._hls.removeBufferAll()}},this.executeChannelSwitchForSlider=e=>{if(!this.isVideoPlayerReady)return;this.setChannelDirection(e),this.setMediaLiveOff(!1);const t=this._hls.playbackChannel;switch(this.channelDirection){case"R":if(t===this.lastChannel)return;break;case"L":if(t===this.firstChannel)return;break;default:return}if(this.isChannelSwitching)return void console.log("hoon Already channel switching... ignore current channel switch command. isChannelSwitching: ",this.isChannelSwitching);if(this.isChannelSwitching=!0,console.log("hoon start to channel switching this.isChannelSwitching: ",this.isChannelSwitching),this._hls.state===f.State.PARSED)return void console.log("ignore channel switch on parsed state");const r=1e3*(this._hls.media.currentTime-this.objVideoScreen.lastRenderedMediaTime);this.channelSwitchRequestedTimestamp=Date.now()+r,console.log("rendererAndEventOffset: ",r),this._hls.state!==f.State.SWITCHING_CHANNEL&&(this._hls.state=f.State.SWITCHING_CHANNEL),this._hls.removeBufferAll(),this.isStopTimeslice=!1},this.executeChannelSwitchForStep=()=>{this.isVideoPlayerReady&&(this._hls.state!==f.State.SWITCHING_CHANNEL?(this.setInitFrameSegment(),this.setMediaLiveOff(!1),this.removeRemainingBuffer(!1)):this.executeChannelSwitch(),this.isStopTimeslice=!0)},this.executeChannelSwitch=()=>{const e=this._hls.playbackChannel;let t=0;switch(this.channelDirection){case"R":t=e+1;break;case"L":t=e-1;break;default:return}if(t>this.lastChannel||t<this.firstChannel){if(this._hls.videoIsPlaying){const e=this._hls.lastBufferedFrame;e&&this.previousContinueFrameSn!==e.sn&&(this.previousContinueFrameSn=e.sn,this._hls.continueChannel(this.channelDirection))}}else this.previousContinueFrameSn=-1,this.playbackTimer&&(window.cancelAniFrame(this.playbackTimer),this.playbackTimer=null),this.objVideoScreen&&this.isMobile&&(this.playPromise=this.objVideoScreen.videoElement.play()),this.previousChannel!==e&&(this.previousChannel=e,this._hls.switchChannel(e,this.channelDirection,this._hls.videoIsPlaying,this.channelSwitchRequestedTimestamp))},this.stopChannelSwitch=()=>{const{_hls:e}=this;e&&(e.videoIsPlaying||this.isMobile||this.objVideoScreen&&this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{})),this.playbackTimer&&window.cancelAniFrame(this.playbackTimer),this.channelHandler&&window.cancelAniFrame(this.channelHandler),this.channelHandler=null,this.currentFrameForChannel=0,this.currentFrameTimeForChannel=0,this.isSwitchBuffering=!0,e.removeAllFragments(),e.removeLastBufferedFragment(),e.videoIsPlaying?(e.pausedBufferFrame=null,e.state=f.State.IDLE,e.addInitFrameSegment=!1,e.removeAllFrames(),this.isMobile&&-1!==e.mobileCurrentTime&&(e.currentTime=e.mobileCurrentTime,e.mobileCurrentTime=-1),e.startLoad(e.currentTime)):(e.pausedBufferFrame=e.lastBufferedFrame,e.mediaStartSeq>-1&&e.levelStartLoad()),this.isStopTimeslice=!0,this.isRemoveRemainingBuffer=!1)},this.continueNextFrame=()=>{if(!this.isFramePauseAndContinue){this.requestAniFrameForFrame=!1,window.cancelAniFrame(this.frameTimer);let e=this._hls.currentTime;this._hls.addInitFrameSegment=!1,this._hls.startLoad(e)}this.requestAniFrameForFrame&&(window.cancelAniFrame(this.frameTimer),this.frameTimer=window.requestAniFrame(this.continueNextFrame))},this.setFrameDirection=e=>{this.frameDirection=e},this.setFrameMoveCount=e=>{this.frameMoveCount=e},this.changeStateRequestAniFrameForFrame=e=>{this.isRequestAniFrameForFrame=e},this.checkConnectedDevice=()=>{const{_hls:e}=this;this.isMobile?(e.videoIsPlaying&&(this.playbackTimer&&window.cancelAniFrame(this.playbackTimer),this.objVideoScreen&&void 0!==this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{}))),-1===e.mobileCurrentTime&&(e.mobileCurrentTime=e.currentTime),console.log(e.currentTime),e.state=f.State.SWITCHING_FRAME,e.removeBufferAllForTimemachine()):this.executeFrameSwitch()},this.executeFrameSwitch=(e,t)=>{if(this.setFrameMoveCount(t),this.setFrameDirection(e),this.setMediaLiveOff(!1),this.changeStateRequestAniFrameForFrame(!1),!this.isVideoPlayerReady)return;const{_hls:r}=this;if(this._hls.videoIsPlaying||!this._hls.media.paused)return;r.pausedBufferFrame=null;const i=Math.round(1/60*1e3);this.currentFrameTimeForFrame+=i;const n=Math.floor(this.currentFrameTimeForFrame/70),s=r.totalFrame;let a;if(this.isMobile){if(this.isFetchingSwitchFrame&&!r.lastBufferedFrame)return this.currentFrameForFrame=n,void(this.isRequestAniFrameForFrame&&(window.cancelAniFrame(this.frameHandler),this.frameHandler=window.requestAniFrame(this.executeFrameSwitch)));this.isFetchingSwitchFrame=!0,a=Math.floor(r.mobileCurrentTime/r.config.FRAME_DURATION),console.log(`Request Timemachine Time: ${this._hls.mobileCurrentTime}`)}else a=Math.floor(r.currentTime/r.config.FRAME_DURATION);this.currentFrameForFrame=n,this.isVideoComplete&&(this.isVideoComplete=!1),"B"===this.frameDirection&&a-this.frameMoveCount<0||"F"===this.frameDirection&&a+this.frameMoveCount>s||(this.playbackTimer&&(window.cancelAniFrame(this.playbackTimer),this.playbackTimer=null),this.isMobile?this.objVideoScreen.videoElement.paused&&(this.playPromise=this.objVideoScreen.videoElement.play()):this._hls.videoIsPlaying&&this.objVideoScreen&&void 0!==this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{})),this._hls.switchFrame(this.frameMoveCount,a,this.frameDirection,this._hls.videoIsPlaying),this.isRequestAniFrameForFrame&&(window.cancelAniFrame(this.frameHandler),this.frameHandler=window.requestAniFrame(this.executeFrameSwitch)))},this.executeInteractive=e=>{if(!this.isVideoPlayerReady)return;const{_hls:t}=this;t.pausedBufferFrame=null,this.playbackTimer&&(window.cancelAniFrame(this.playbackTimer),this.playbackTimer=null),this._hls.videoIsPlaying&&this.objVideoScreen&&void 0!==this.playPromise&&this.playPromise.then((e=>{this.objVideoScreen.videoElement.pause()})).catch((e=>{})),this._hls.doInteractive(e)},this.stopFrameSwitch=()=>{console.log("*** Stop Frame Switch ***"),this._hls&&(this.playbackTimer&&window.cancelAniFrame(this.playbackTimer),this.frameHandler&&window.cancelAniFrame(this.frameHandler),this.frameHandler=null,this.currentFrameForFrame=0,this.currentFrameTimeForFrame=0,this.isSwitchBuffering=!0,this.isMobile?(this.isFetchingSwitchFrame=!1,this._hls.removeAllFragments(),this._hls.videoIsPlaying&&(this._hls.state=f.State.SWITCHING_FRAME_STOP,this._hls.removeBufferAllForTimemachine())):(this._hls.removeAllFrames(),this._hls.removeLastBufferedFrame(),this._hls.state=f.State.IDLE,this._hls.addInitFrameSegment=!1,this._hls.startLoad(this._hls.currentTime)))},this.resetVideo=(e,t,r,i)=>{this._hls&&(this._hls.stopLoad(),this.objVideoScreen.stop(),clearInterval(this._hls.bufferTimer),this.playbackTimer&&window.cancelAniFrame(this.playbackTimer),this._hls.videoIsPlaying=!1,this.isHLSManifestReady=!1,window.callUpdatePlaybackTime(0),this._hls.trigger(c.default.Events.MEDIA_DETACHING),setTimeout((()=>{this.fixedUrl=e,this.initVideoUrl=t,this.initTotalChannel=parseInt(r),this.initChannel=parseInt(i),this.setSource(e,t,this.initChannel)}),1e3))},this.handleUnsupported=()=>{-1!==navigator.userAgent.toLowerCase().indexOf("firefox")?window.callByError("You are using Firefox, it looks like MediaSource is not enabled."):window.callByError("Your Browser does not support MediaSourceExtension / MP4 mediasource")},this.useMediaStorage=e=>{},this.clearBufferForLiveOnNow=()=>{const{_hls:e}=this;e.state!=f.State.SWITCHING_CHANNEL&&(e.state=f.State.SWITCHING_LIVE_ON,e.removeAllFragments(),e.removeLastBufferedFragment(),e.removeAllFrames(),e.removeLastBufferedFrame(),e.removeBufferAll())},this.startLiveOnNow=()=>{const{_hls:e}=this,t=e.liveStartSeq;e.videoIsPause=!1,e.startLiveOnNow=!1,this.clearBufferForLiveOnNow(),1===e.currentGOP&&e.switchingGOP(30),e.state!==f.State.SWITCHING_CHANNEL&&e.state!==f.State.SWITCHING_FRAME&&e.state!==f.State.SWITCHING_LIVE_ON||(e.state=f.State.IDLE),e.startLoad(t)},this.setCurrentTime=e=>{e&&(this._hls.currentTime=e)},this.setCurrentLevel=e=>{e&&(this._hls.loadLevel=e)},this.destroyHLS=()=>{this._hls&&(this._hls.destroy(),this._hls=null)},this.options=e,this.utils=new a.FDPlayerUtils,this.fixedUrl="",this.initVideoUrl="",this.initChannel=0,this.channelList=[],this.firstChannel=0,this.lastChannel=0,this.originalPlayerSize={width:0,height:0},this.isFullScreen=!1,this.isVideoComplete=!1,this.isVideoPlayerReady=!1,this.isSwitchBuffering=!1,this.isFetchingSwitchFrame=!1,this.isStopTimeslice=!1,this.isRemoveRemainingBuffer=!1,this.requestAniFrameForFrame=!1,this.isFramePauseAndContinue=!1,this.frameTimer=0,this.playbackTimer=0,this.playPromise=null,this.pausedBufferFrame=null,this.isChannelSwitching=!1,this.channelSwitchRequestedTimestamp=0,this.isLoop=!1,this.initConfig(),this.initPlayer()}initConfig(){this.currentFrameForChannel=0,this.currentFrameTimeForChannel=0,this.currentFrameForFrame=0,this.currentFrameTimeForFrame=0,this.previousChannel=-1,this.previousContinueFrameSn=-1,this.previousFrame=-1,this.isRequestAniFrameForChannel=!0,this.isRequestAniFrameForFrame=!0,this.channelDirection="",this.frameDirection="",this.frameMoveCount=1}initPlayer(){c.default.isSupported()?this.props.playerId&&(this.utils.createAnimationFrame(),this.videoContainer=this.utils.getChildById(this.props.playerId),this.isShowed=this.utils.convertStrToBool(this.props.showPlayerByDefault),this.videoContainer.innerHTML="",this.isHlsLoaded=!1,this.isAutoScale=!0,this.strDisplayType=this.props.displayType,this.intMaxWidth=this.props.maxWidth,this.intMaxHeight=this.props.maxHeight,this.offsetX=this.props.offsetX||0,this.offsetY=this.props.offsetY||0,this.listeners={arrEvents:[]},this.strBackgroundColor=this.props.backgroundColor||"transparent",this.strVideoBackgroundColor="#000000",this.isMobile=this.utils.isMobile(),this.is4Dbrowser=this.utils.is4Dbrowser(),this.isHasPointerEvent=this.utils.hasPointerEvent(),this.isIE=this.utils.isIE(),this.setPlayerMainElement(),this.setConfig(),this.startResizeHandler()):this.handleUnsupported()}loadVideo(e,t){t&&(this.isLoop=t);try{const t=e.videoSrc,r=e.channelList,i=e.defaultChannel;let n="";if(this.setChannelInfo(r,i),t&&i)if(e.videoType==m.VideoType.Replay)t.includes("m3u8")?n=t:n+="master.m3u8",""!==this.initVideoUrl?this.resetVideo(t,n,r,i):(this.fixedUrl=t,this.initVideoUrl=n,this.setSource(t,n,this.initChannel,e.videoType,!1));else{let n="";if(1===r[0].length)n=t;else{const e=i.toString().padStart(3,"0")+"/master.m3u8";n=(0,s.buildAbsoluteURL)(t,e,{alwaysNormalize:!0})}this.fixedUrl=t,this.initVideoUrl=n,this.setSource(t,n,this.initChannel,e.videoType)}else window.callByError("Invalid Video Initialize Data!")}catch(e){window.callByError(e)}}setChannelInfo(e,t){if(e.length>=1){this.firstChannel=1,this.lastChannel=e[0].length;const r=e.map((e=>e.map((e=>({channelNumber:e,isActive:!0})))));this.channelList=r,this.initChannel=t}}setPlayerMainElement(){this._playerMain||(this._playerMain=new u.CreateElement(this.utils,"div","relative"),this.isHasPointerEvent&&(this._playerMain.element.style.touchAction="none"),this._playerMain.element.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)",this._playerMain.element.style.webkitFocusRingColor="rgba(0, 0, 0, 0)",this._playerMain.element.className="fdplayer",this._playerMain.element.style.width="100%",this._playerMain.element.style.height="100%",this._playerMain.setBackgroundColor(this.strBackgroundColor),(this.isMobile||this.isMobile&&this.isHasPointerEvent)&&this._playerMain.setSelectable(!1),this.videoContainer.style.overflow="hidden",this.videoContainer.appendChild(this._playerMain.element))}setConfig(){this._playerConfig=new o.FDPlayerConfig(this.utils,this.props),this._playerConfig.addListener(d.default.PLAYER_EVENT.PRELOADER_LOAD_DONE,this.onPreloaderLoadDone)}startResizeHandler(){window.addEventListener("resize",this.onResizeHandler),window.addEventListener("orientationchange",this.orientationChange),this.onResizeHandler(),this.resizeHandlerId_to=setTimeout((()=>{this.resizeHandler()}),500)}resizeDumyHandler(){this.objClickScreen&&(this.objClickScreen.setWidth(this.sW),this.objClickScreen.setHeight(this.sH))}setVideoPlayer(){this.isVideoPlayerCreated||(this.setVideoScreen(),this.resizeHandler(),this.isVideoPlayerCreated=!0,this.isVideoPlayerReady=!0,window.callByInPlayerReady(!0))}setVideoScreen(){this.objVideoScreen=new l.FDPlayerScreen(this.utils,this,this.strBackgroundColor,this._playerConfig.fVolume),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.PROMISE,this.videoScreenPromiseHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.START,this.videoScreenStartHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.STOP,this.videoScreenStopHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.PLAY,this.videoScreenPlayHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.PAUSE,this.videoScreenPauseHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.UPDATE,this.videoScreenUpdateHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.UPDATE_TIME,this.videoScreenUpdateTimeHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.LOAD_PROGRESS,this.videoScreenLoadProgressHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.START_TO_BUFFER,this.videoScreenStartToBufferHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.STOP_TO_BUFFER,this.videoScreenStopToBufferHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.PLAY_COMPLETE,this.videoScreenPlayCompleteHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.ENABLE_TO_SCRUB,this.videoScreenEnableToScrubHandler),this.objVideoScreen.addListener(d.default.PLAYER_EVENT.ERROR,this.videoScreenErrorHandler),this._playerMain.addChild(this.objVideoScreen),this.originalPlayerSize={width:this.videoContainer.clientWidth,height:this.videoContainer.clientHeight}}showFullScreen(e){if(this.isFullScreen)return;document.addEventListener&&(document.addEventListener("fullscreenchange",this.onFullScreenChange),document.addEventListener("mozfullscreenchange",this.onFullScreenChange),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange),document.addEventListener("MSFullscreenChange",this.onFullScreenChange)),document.documentElement.requestFullScreen?e.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?e.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen?e.webkitRequestFullScreen():document.documentElement.msRequestFullscreen&&e.msRequestFullscreen(),this._playerMain.style().position="fixed",document.documentElement.style.overflow="hidden",this.isFullScreen=!0;let t=this.utils.getScrollOffsets();this.lastX=t.x,this.lastY=t.y,window.scrollTo(0,0),this.isMobile&&window.addEventListener("touchmove",this.disableFullScreenOnMobileHandler,{passive:!1}),this.resizeHandler()}showNormalScreen(){if(!this.isVideoPlayerReady||!this.isFullScreen)return;document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.addMainDoToTheOriginalParent(),this.isFullScreen=!1;let e=this.utils.getScrollOffsets();this.lastX=e.x,this.lastY=e.y,window.scrollTo(0,0),this.isMobile&&window.addEventListener("touchmove",this.disableFullScreenOnMobileHandler,{passive:!1}),this.resizeHandler()}stopVideo(){this.isVideoPlayerReady&&(this.curDurration=0,this.prevDuration=-1,this.stop())}updateVolume(){this.isVideoPlayerReady&&this.setVolume()}isPositionInBufferRange(e){const t=this._hls.media.buffered;for(let r=0;r<t.length;r++)if(t.start(r)<=e&&e<t.end(r))return!0;return!1}setSource(e,t,r,i,n){try{if(!this.isVideoPlayerReady)return;if(!(t=t.replace(/&amp;/g,"&")))return void window.callByError("Video URL is not defined!");this.createObjHls(this.loadHlsFile,i),this.resizeHandler(),this.objVideoScreen.setBkColor(this.strBackgroundColor),this.objVideoScreen.setX(0),this.objVideoScreen.setVisible(!0),this.objVideoScreen.setSource(t),n||this.setMediaLiveOff(!0),window.callUpdatePlaybackTime(0)}catch(e){console.log(e)}}setPlaybackRate(e){this.objVideoScreen&&this.objVideoScreen.setPlaybackRate(e)}hideCursor(){document.documentElement.style.cursor="none",document.getElementsByTagName("body")[0].style.cursor="none"}showCursor(){document.documentElement.style.cursor="auto",document.getElementsByTagName("body")[0].style.cursor="auto"}isValidChannel(e){let t=!1;for(const r of this.channelList)r.forEach((r=>{r.isActive&&r.channelNumber==e&&(t=!0)}));return t}executePositionSwitch(e){const t=this._hls.playbackChannel;this.channelSwitchRequestedTimestamp=Date.now(),t===e||!1!==this.isValidChannel(e)?(console.log("executePositionSwitch media currentTime: ",this._hls.media.currentTime),this._hls.state=f.State.SWITCHING_POSITION,this.nextChannelNumber=e,this._hls.removeBufferAll()):console.log("Invalid channel number: ",e)}}t.FDPlayer=_},2862:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hlsDefaultConfig=t.VideoType=void 0;const n=i(r(4133)),s=i(r(7289)),a=i(r(4299)),o=i(r(4105));var l;(l=t.VideoType||(t.VideoType={}))[l.Replay=0]="Replay",l[l.Interactive=1]="Interactive",t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:90,maxMaxBufferLength:600,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:3,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,appendErrorMaxRetry:3,loader:o.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,abrController:n.default,bufferController:s.default,capLevelController:a.default,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,audioStreamController:void 0,audioTrackController:void 0,TICK_INTERVAL:100,VIDEO_FPS:30,MAX_START_GAP_JUMP:2,FRAGMENT_DURATION:1.001,FRAME_DURATION:1.001/30,MS_IFRAME_PATH:"_iframe/",S3_IFRAME_PATH:"iframe/",ADAPT_NAME:"p",URL_PATH:"p/",DIRECT_LEFT:"L",DIRECT_RIGHT:"R"}},4133:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6479)),a=n(r(9510)),o=r(7790),l=r(3895),u=n(r(4397)),{performance:h}=window;class f extends a.default{constructor(e){super(e,s.default.FRAG_LOADING,s.default.FRAG_LOADED,s.default.FRAG_BUFFERED,s.default.ERROR),this.destroy=()=>i(this,void 0,void 0,(function*(){this.clearTimer(),a.default.prototype.destroy.call(this)})),this.onFragLoading=e=>i(this,void 0,void 0,(function*(){const t=e.frag;if(t&&"main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){const e=this.hls,r=e.config,i=t.level;let n,s;e.levels[i].details.live?(n=r.abrEwmaFastLive,s=r.abrEwmaSlowLive):(n=r.abrEwmaFastVoD,s=r.abrEwmaSlowVoD),this._bwEstimator=new u.default(e,s,n,r.abrEwmaDefaultEstimate)}})),this.onFragLoaded=e=>i(this,void 0,void 0,(function*(){const t=e.frag;"main"===t.type&&Number.isFinite(t.sn)&&(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1)})),this.onFragBuffered=e=>i(this,void 0,void 0,(function*(){const t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Number.isFinite(r.sn)){let e=t.tparsed-t.trequest;this._bwEstimator.sample(e,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate()}})),this.onError=e=>i(this,void 0,void 0,(function*(){switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}})),this.clearTimer=()=>i(this,void 0,void 0,(function*(){clearInterval(this.timer),this.timer=null})),this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.hls=e,this.timer=null,this._bwEstimator=null,this.onCheck=this._abandonRulesCheck.bind(this)}_abandonRulesCheck(){const e=this.hls,t=e.media,r=this.fragCurrent;if(!r)return;const i=r.loader;if(!i||i.stats&&i.stats.aborted)return this.clearTimer(),void(this._nextAutoLevel=-1);let n=i.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){const a=h.now()-n.trequest,l=Math.abs(t.playbackRate);if(a>500*r.duration/l){const u=e.levels,h=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/a),f=u[r.level];if(!f)return;const c=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,d=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*c/8)),m=t.currentTime,p=(d-n.loaded)/h,g=(o.BufferHelper.bufferInfo(t,m,e.config.maxBufferHole).end-m)/l;if(g<2*r.duration/l&&p>g){const t=e.minAutoLevel;let o,l;for(l=r.level-1;l>t;l--){const e=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate;if(r.duration*e/(6.4*h)<g)break}o<p&&(e.nextLoadLevel=l,this._bwEstimator.sample(a,n.loaded),i.abort(),this.clearTimer(),e.trigger(s.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}get nextAutoLevel(){const e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;let r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r}get _nextABRAutoLevel(){let e=this.hls;const{maxAutoLevel:t,levels:r,config:i,minAutoLevel:n}=e,s=e.media,a=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,u=s?s.currentTime:0,h=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,c=(o.BufferHelper.bufferInfo(s,u,i.maxBufferHole).end-u)/h;let d=this._findBestLevel(a,l,f,n,t,c,i.abrBandWidthFactor,i.abrBandWidthUpFactor,r);if(d>=0)return d;{let e=l?Math.min(l,i.maxStarvationDelay):i.maxStarvationDelay,s=i.abrBandWidthFactor,o=i.abrBandWidthUpFactor;return d=this._findBestLevel(a,l,f,n,t,c+e,s,o,r),Math.max(d,0)}}_findBestLevel(e,t,r,i,n,s,a,o,l){for(let u=n;u>=i;u--){let i=l[u];if(!i)continue;const n=i.details,h=n?n.totalduration/n.fragments.length:t,f=!!n&&n.live;let c;c=u<=e?a*r:o*r;const d=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,m=d*h/c;if(c>d&&(!m||f||m<s))return u}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}}t.default=f},5542:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FramePosition=t.FrameType=t.SegmentType=t.State=t.Gop1EmsgPosition=t.Gop30EmsgPosition=void 0;const n=i(r(4381)),s=r(2266),a=r(7790);t.Gop30EmsgPosition={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER_CENTER:4,CENTER_RIGHT:5,BOTTOM_LEFT:6,BOTTOM_CENTER:7,BOTTOM_RIGHT:8},t.Gop1EmsgPosition={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,CENTER_LEFT:3,CENTER_RIGHT:4,BOTTOM_LEFT:5,BOTTOM_CENTER:6,BOTTOM_RIGHT:7},t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",SEEK:"SEEK",FRAG_LOADING:"FRAG_LOADING",FRAG_SEEKING:"FRAG_SEEKING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL",SWITCHING:"SWITCHING",SWITCHING_CHANNEL:"SWITCHING_CHANNEL",SWITCHING_POSITION:"SWITCHING_POSITION",SWITCHING_FRAME:"SWITCHING_FRAME",SWITCHING_FRAME_STOP:"SWITCHING_FRAME_STOP",SWITCHING_LIVE_ON:"SWITCHING_LIVE_ON",SWITCHING_LIVE_OFF:"SWITCHING_LIVE_OFF"},t.SegmentType={SEEKING:"SEEKING",CONTINUE:"CONTINUE"},t.FrameType={SWITCH:"SWITCH",SEEK:"SEEK",CONTINUE:"CONTINUE",TIMESLICE:"TIMESLICE",TIMEMACHINE:"TIMEMACHINE"},t.FramePosition={START:"START",MIDDLE:"MIDDLE",END:"END"};class o extends n.default{doTick(){}startLoad(e){}stopLoad(){let e=this.fragCurrent,r=this.frameCurrent;e&&e.loader&&e.loader.abort(),r&&r.loader&&r.loader.abort(),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.frameCurrent=null,this.framePrevious=null,this.clearInterval(),this.clearNextTick(),this._state!==t.State.SWITCHING_CHANNEL&&this._state!==t.State.SWITCHING_FRAME&&this._state!==t.State.SEEK&&this._state!==t.State.ENDED&&(this._state=t.State.STOPPED)}_isStreamEnded(e,t){const{fragCurrent:r,fragmentTracker:i}=this;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){const e=i.getState(r);return e===s.FragmentState.PARTIAL||e===s.FragmentState.OK}return!1}onMediaSeeking(){var e;const{config:r,media:i,mediaBuffer:n,_state:s}=this,o=i?i.currentTime:null,l=a.BufferHelper.bufferInfo(n||i,o,this.config.maxBufferHole);if(s===t.State.FRAG_LOADING){let e=this.fragCurrent;if(0===l.len&&e){const i=r.maxFragLookUpTolerance,n=e.start-i,s=e.start+e.duration+i;(o<n||o>s)&&(e.loader&&e.loader.abort(),this.fragCurrent=null,this.fragPrevious=null,this._state=t.State.IDLE)}}else s===t.State.ENDED&&(0===l.len&&(this.fragPrevious=null,this.fragCurrent=null),(null===(e=this.frameCurrent)||void 0===e?void 0:e.byteRange)||(this._state=t.State.IDLE));i&&(this.lastCurrentTime=o),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=o)}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this._state=t.State.STOPPED,this.fragmentTracker=null}computeLivePosition(e,t){let r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}}t.default=o},7289:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6479)),a=n(r(9510)),o=r(7790),l=r(3895),u=r(103),h=r(5542),f=r(5542),c=(0,u.getMediaSource)();class d extends a.default{constructor(e){super(e,s.default.MEDIA_ATTACHING,s.default.MANIFEST_PARSED,s.default.BUFFER_RESET,s.default.BUFFER_FRAME_APPENDING,s.default.BUFFER_APPENDING,s.default.BUFFER_CODECS,s.default.BUFFER_EOS,s.default.BUFFER_FLUSHING,s.default.LEVEL_PTS_UPDATED,s.default.LEVEL_UPDATED),this._msDuration=null,this._levelDuration=null,this._levelTargetDuration=10,this._live=null,this._objectUrl=null,this._needsFlush=!1,this._needsEos=!1,this._isTest=!1,this._bufferRangeReset=!1,this._bufferAllReset=!1,this._isBufferFrameExist=!1,this.isInitSegmentAppended=!1,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.segments=[],this.frames=[],this.appending=!1,this.appended=0,this.appendError=0,this.flushBufferCounter=0,this.timestampOffset=0,this.tracks={},this.pendingTracks={},this.sourceBuffer={},this.flushRange=[],this.destroy=()=>i(this,void 0,void 0,(function*(){a.default.prototype.destroy.call(this)})),this.onMediaDetaching=()=>i(this,void 0,void 0,(function*(){let e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl&&(this.media.removeAttribute("src"),this.media.load())),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(s.default.MEDIA_DETACHED)})),this._onMediaSourceOpen=()=>i(this,void 0,void 0,(function*(){this.hls.trigger(s.default.MEDIA_ATTACHED,{media:this.media});let e=this.mediaSource;e&&e.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()})),this._onMediaSourceClose=()=>i(this,void 0,void 0,(function*(){console.log("media source closed")})),this._onMediaSourceEnded=()=>i(this,void 0,void 0,(function*(){console.log("media source ended")})),this._onSBUpdate=()=>i(this,void 0,void 0,(function*(){console.log("_onSBUpdate")})),this._onSBUpdateEnd=()=>i(this,void 0,void 0,(function*(){if(console.log("_onSBUpdateEnd: ",this._isBufferFrameExist,this._bufferAllReset),this.printBufferRangeInfo(),this._isBufferFrameExist){const e=this.sourceBuffer.video;if(e&&(e.mode&&"sequence"!==e.mode&&(e.mode="sequence"),this._bufferFrameFrag&&console.log(`[ Appended Frame]: ${this._bufferFrameFrag.channelName} - ${this._bufferFrameFrag.sn} - ${this._bufferFrameFrag.fileName}`),!e.updating))switch(this._bufferFrameType){case h.FrameType.TIMESLICE:e.buffered.length>0&&this.media&&(console.log(`media after currentTime: ${this.media.currentTime}`),console.log(`media buffered end Time: ${e.buffered.end(e.buffered.length-1)}`),this.hls.trigger(s.default.TIMESLICE_FRAG_APPENDED));break;case h.FrameType.TIMEMACHINE:this.hls.isMobile;break;case h.FrameType.SEEK:break;case h.FrameType.CONTINUE:!this.hls.videoIsPlaying&&this.hls.frameIsPlaying&&this.hls.trigger(s.default.MEDIA_PAUSE,{})}this.appending=!1,this.frames&&this.frames.length>0?(this.updateMediaElementDuration(),this.doFrameAppending()):(this._bufferFrameType=void 0,this._isBufferFrameExist=!1,this._bufferFrameFrag=void 0)}else{if(this._bufferAllReset)return this._bufferAllReset=!1,void this.removeBufferAll();if(this.hls.state===f.State.SWITCHING_CHANNEL||this.hls.state===f.State.SWITCHING_POSITION)return console.log("_onSBUpdateEnd isInitSegmentAppended: ",this.isInitSegmentAppended),this.isInitSegmentAppended,void this.hls.trigger(s.default.BUFFER_REMOVE_ALL);if(this._bufferRangeReset)return console.log("!! Remove Whole Buffer Completely for Timeslice !!"),this._bufferRangeReset=!1,void(this.hls.isMobile?this.hls.state===f.State.SWITCHING_CHANNEL?this.removeBufferAllForTimeslice():this.removeBufferAllForTimemachine():this.hls.state===f.State.SWITCHING_CHANNEL&&this.removeBufferAllForTimeslice());this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.media&&(console.log(`%c After Media duration: ${this.media.duration}`,"color:green"),console.log(`%c After Media Time: ${this.media.currentTime}`,"color:green"),console.log("%c ********** Finish ********** ","color:green"));let e=this.parent,t=this.segments.reduce(((t,r)=>r.parent===e?t++:t),0);const r={},i=this.sourceBuffer;for(let e in i){const t=i[e];t&&(t.mode&&"sequence"!==t.mode&&(t.mode="sequence"),r[e]=o.BufferHelper.getBuffered(t))}if(this.appending=!1,this._bufferSegmentType===h.SegmentType.SEEKING){const e=this.sourceBuffer.video;return e&&(e.timestampOffset=0),this.hls.trigger(s.default.FRAG_SEEKED,{frag:this._bufferSegmentFrag}),this._bufferSegmentType=void 0,void(this._bufferSegmentFrag=void 0)}this.hls.trigger(s.default.BUFFER_APPENDED,{parent:e,pending:t,timeRanges:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),this.media&&this.media.duration>0&&this.hls.isLive&&!this.hls.startLiveOnNow&&(this.hls.startLiveOnNow=!0,this.media.currentTime=1.001*this.hls.liveStartSeq,this.hls.trigger(s.default.START_LIVE_ON_NOW,{}))}})),this._onSBUpdateError=e=>i(this,void 0,void 0,(function*(){this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})})),this.config=e.config}onLevelPtsUpdated(e){let t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){let t=this.sourceBuffer.audio;if(!t)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(t.timestampOffset-e.start)>.1){let r=t.updating;try{t.abort()}catch(e){}r?this.audioTimestampOffset=e.start:t.timestampOffset=e.start}}this.config.liveDurationInfinity&&this.updateSeekableRange(e.details)}onManifestParsed(e){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=1}onMediaAttaching(e){let t=this.media=e.media;if(t&&c){let e=this.mediaSource=new c;e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(e),this._objectUrl=t.src}}checkPendingTracks(){let{bufferCodecEventsExpected:e,pendingTracks:t}=this;const r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())}seekToMiddleOfBufferRange(e){const t=this.sourceBuffer.video,r=o.BufferHelper.getBuffered(t);for(let t=0;t<r.length;t++){let i=r.start(t),n=r.end(t);if(i<=e.start&&e.start<=n)return console.log(this.seekToMiddleOfBufferRange.name,": ",this.media.currentTime," -> ",(i+n)/2),void(this.media.currentTime=(i+n)/2)}}printBufferRangeInfo(){const e=this.sourceBuffer.video,t=o.BufferHelper.getBuffered(e);t.length&&console.log("printBufferRangeInfo buffer length 0");for(let e=0;e<t.length;e++){let r=t.start(e),i=t.end(e);console.log("printBufferRangeInfo ",r," ~ ",i)}}onBufferReset(){const e=this.sourceBuffer;for(let t in e){const r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}onBufferCodecs(e){Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((t=>{this.pendingTracks[t]=e[t]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(let i in e)if(!t[i]){let n=e[i];if(!n)throw Error(`source buffer exists for track ${i}, however track does not`);let a=n.levelCodec||n.codec,o=`${n.container};codecs=${a}`;try{let e=t[i]=r.addSourceBuffer(o);e.addEventListener("update",this._onSBUpdate),e.addEventListener("updateend",this._onSBUpdateEnd),e.addEventListener("error",this._onSBUpdateError),this.tracks[i]={buffer:e,codec:a,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(e){this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(s.default.BUFFER_CREATED,{tracks:this.tracks})}onBufferAppending(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}onBufferEos(e){for(const t in this.sourceBuffer)if(!e.type||e.type===t){const e=this.sourceBuffer[t];e&&!e.ended&&(e.ended=!0)}this.checkEos()}checkEos(){const{sourceBuffer:e,mediaSource:t}=this;if(t&&"open"===t.readyState){for(let t in e){const r=e[t];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}try{t.endOfStream()}catch(e){}this._needsEos=!1}else this._needsEos=!1}onBufferFlushing(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()}flushLiveBackBuffer(){if(!this._live)return;const e=this.config.liveBackBufferLength;if(!isFinite(e)||e<0)return;if(!this.media)return;const t=this.media.currentTime,r=this.sourceBuffer,i=Object.keys(r),n=t-Math.max(e,this._levelTargetDuration);for(let e=i.length-1;e>=0;e--){const t=i[e],s=r[t];if(s){const e=o.BufferHelper.getBuffered(s);e.length>0&&n>e.start(0)&&this.removeBufferRange(t,s,0,n)}}}onLevelUpdated({details:e}){e.fragments.length>0&&(this._live=e.live,this._live?this._levelDuration=this.hls.liveStartSeq*this.hls.config.FRAGMENT_DURATION+e.totalduration:this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this.updateMediaElementDuration(),this.config.liveDurationInfinity&&this.updateSeekableRange(e))}updateMediaElementDuration(){let e,{config:t}=this;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(let e in this.sourceBuffer){const t=this.sourceBuffer[e];if(t&&!0===t.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&t.liveDurationInfinity||(this._levelDuration>this._msDuration&&this._levelDuration>e||!Number.isFinite(e))&&(this._msDuration=this.mediaSource.duration=this._levelDuration)}}updateSeekableRange(e){var t;const r=this.mediaSource,i=e.fragments,n=i.length;if(n&&(null==r?void 0:r.setLiveSeekableRange)){const e=null===(t=i[0])||void 0===t?void 0:t.start,s=i[n-1].start+i[n-1].duration;r.setLiveSeekableRange(e,s)}}doFlush(){for(;this.flushRange.length;){let e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;let e=0,t=this.sourceBuffer;for(let r in t){const i=t[r];i&&(e+=o.BufferHelper.getBuffered(i).length)}this.appended=e,this.hls.trigger(s.default.BUFFER_FLUSHED)}}doAppending(){let{config:e,hls:t,segments:r,sourceBuffer:i}=this;if(!Object.keys(i).length)return;if(!this.media||this.media.error)return void(this.segments=[]);if(this.appending)return;const n=r.shift();if(n)try{const e=i[n.type];if(e&&e.mode&&"sequence"!==e.mode&&(e.mode="sequence"),!e)return void this._onSBUpdateEnd();if(e.updating)return void r.unshift(n);"initSegment"!==n.content?(this.hls.isLive?e.timestampOffset=n.frag.liveStartTime:e.timestampOffset=n.frag.start,this._bufferSegmentType=n.fragType,this._bufferSegmentFrag=n.frag):"initSegment"===n.content&&(this.initSegmentData=n.data),this.media&&(console.log("%c ********** start ********** ","color:blue"),console.log(`Before Media duration: ${this.media.duration}`),console.log(`Before Media Time: ${this.media.currentTime}`)),e.ended=!1,this.parent=n.parent,e.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0,"initSegment"!==n.content?console.log(`%c [ Appending Segment ]: ${n.frag.channelName} - ${n.frag.sn} - ${n.url} `,"color:green"):console.log(`%c [ Appending Segment ]: Init Segment - ${n.url}`,"color:red")}catch(i){r.unshift(n);let a={type:l.ErrorTypes.MEDIA_ERROR,parent:n.parent,details:"",fatal:!1};22===i.code?(this.segments=[],a.details=l.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,a.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(this.segments=[],a.fatal=!0)),t.trigger(s.default.ERROR,a)}}flushBuffer(e,t,r){const i=this.sourceBuffer;if(!Object.keys(i).length)return!0;if(this.flushBufferCounter>=this.appended)return!0;const n=i[r];if(n){if(n.ended=!1,n.updating)return!1;if(this.removeBufferRange(r,n,e,t))return this.flushBufferCounter++,!1}return!0}removeBufferRange(e,t,r,i){try{if(t&&!t.updating){const n=o.BufferHelper.getBuffered(t);for(let s=0;s<n.length;s++){let a=n.start(s),o=n.end(s),l=Math.max(a,r),u=Math.min(o,i);if(Math.min(u,o)-l>.5){let r="null";return this.media&&(r=this.media.currentTime.toString()),console.log("%c *********************************************************************************************","color:orange"),console.log(`sb remove ${e} [${l},${u}], of [${a},${o}], pos:${r}`),console.log("%c *********************************************************************************************","color:orange"),t.remove(l,u),!0}}}}catch(e){console.log(`removeBufferRange failed: ${e} `)}return!1}removeBufferStartToAll(e,t){const r=this.sourceBuffer.video;try{if(r&&!r.updating){const i=o.BufferHelper.getBuffered(r);for(let n=0;n<i.length;n++){let s=i.start(n),a=i.end(n),o=Math.max(s,e);if(a-o>.5){let e="null";return this.media&&(e=this.media.currentTime.toString()),console.log("%c *********************************************************************************************","color:orange"),console.log(`sb remove video [${o},${a}], of [${s},${a}], pos:${e}`),console.log("%c *********************************************************************************************","color:orange"),r.remove(o,a),this._bufferRangeReset=!0,this._isTest=t,!0}}return this._bufferRangeReset||this.hls.trigger(s.default.BUFFER_REMOVE_RANGE,{isTest:t}),!0}}catch(e){console.log("removeBufferStartToAll failed",e)}return!1}removeBufferAllForTimeslice(e=!1){const t=this.sourceBuffer,r=Object.keys(t);for(let i=r.length-1;i>=0;i--){const n=t[r[i]];if(n){const t=o.BufferHelper.getBuffered(n);if(t.length>0)for(let r=0;r<t.length;r++){let i=t.start(r),s=t.end(r);if(!n.updating)return console.log("%c *********************************************************************************************","color:orange"),console.log(`sb remove video [${i},${s}], of [${i},${s}]`),console.log("%c *********************************************************************************************","color:orange"),n.remove(i,s),this._bufferRangeReset=!0,this._isTest=e,!0}}}return this._bufferRangeReset||(this.timestampOffset=0,this.media.currentTime=0,this.hls.trigger(s.default.BUFFER_REMOVE_RANGE,{isTest:this._isTest})),!0}removeBufferAllForTimemachine(){const e=this.sourceBuffer,t=Object.keys(e);for(let r=t.length-1;r>=0;r--){const i=e[t[r]];if(i){const e=o.BufferHelper.getBuffered(i);if(e.length>0)for(let t=0;t<e.length;t++){let r=e.start(t),n=e.end(t);if(!i.updating)return console.log("%c *********************************************************************************************","color:orange"),console.log(`sb remove video [${r},${n}], of [${r},${n}]`),console.log("%c *********************************************************************************************","color:orange"),i.remove(r,n),this._bufferRangeReset=!0,!0}}}return this._bufferRangeReset||(this.timestampOffset=0,this.media.currentTime=0,this.hls.trigger(s.default.BUFFER_REMOVE_RANGE)),!0}onBufferFrameAppending(e){const t=e.isInitSegment,r=e.channelSwitchRequestedTimestamp;let i={type:"video",data:e.payload,frameType:e.type};("init"!==e.type||t)&&(i.frag=e.frag,i.context=e.context),this.frames.push(i),this.doFrameAppending(t,r)}doFrameAppending(e,t){let{config:r,hls:i,frames:n,sourceBuffer:a}=this;if(!Object.keys(a).length)return;if(!this.media||this.media.error)return void(this.frames=[]);if(this.appending)return;const o=n.shift();if(o)try{const e=a[o.type];if(e&&e.mode&&"sequence"!==e.mode&&(e.mode="sequence"),!e)return void this._onSBUpdateEnd();if(e.updating)return n.unshift(o),void console.warn("sb is updating. unable to append buffer");if(o.frag)if(console.log(`media readyState: ${this.media.readyState}`),console.log(`media before currentTime: ${this.media.currentTime}`),i.videoIsPlaying){if(this.hls.isMobile)e.timestampOffset=this.timestampOffset,this.timestampOffset+=o.frag.timeOffset;else if("initSegment"!==o.frag.sn)if(e.timestampOffset=o.frag.start,o.frag.position+.03<o.frag.start+1){let e=0;t&&(e=(Date.now()-t)/1e3),this.media.currentTime=o.frag.position+e}else this.media.currentTime=o.frag.position}else switch(o.frameType){case h.FrameType.TIMESLICE:0===this.media.buffered.length&&o.frag.position<o.frag.start&&(console.log("before update frag.start: ",o.frag.start,o.frag.position),o.frag.start+=.005),this.media.currentTime=o.frag.position,e.timestampOffset=o.frag.start;break;case h.FrameType.TIMEMACHINE:this.hls.isMobile&&(console.log(`TimestampOffset: ${this.timestampOffset}`),e.timestampOffset=this.timestampOffset,this.timestampOffset+=o.frag.timeOffset);break;case h.FrameType.CONTINUE:case h.FrameType.SEEK:e.timestampOffset=o.frag.start}if(e.ended=!1,e.appendBuffer(o.data),this.appendError=0,this.appending=!0,this._bufferFrameType=o.frameType,this._isBufferFrameExist=!0,this.hls.state===f.State.SWITCHING_CHANNEL||this.hls.state===f.State.SWITCHING_POSITION){if(!this.isInitSegmentAppended)return this.isInitSegmentAppended=!0,void this.hls.trigger(s.default.TIMESLICE_INIT_SEG_APPENDED,o.frag);this.isInitSegmentAppended=!1,this.hls.trigger(s.default.TIMESLICE_FRAG_APPENDED)}"init"!==o.frameType?(this._bufferFrameFrag=o.frag,o.frag&&console.log(`[ Appending Frame]: ${o.frag.channelName} - ${o.frag.sn} - ${o.frag.fileName}`)):console.log("%c [ Appending Frame ]: Init Frame","color:green")}catch(e){n.unshift(o);let t={type:l.ErrorTypes.MEDIA_ERROR,details:"",fatal:!1};22===e.code?(this.segments=[],t.details=l.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,t.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>r.appendErrorMaxRetry&&(this.frames=[],t.fatal=!0)),i.trigger(s.default.ERROR,t)}}removeBufferAll(){const e=this.sourceBuffer,t=Object.keys(e);console.log("removeBufferAll currentTime: ",this.media.currentTime);for(let r=t.length-1;r>=0;r--){const i=e[t[r]];if(i){const e=o.BufferHelper.getBuffered(i);if(e.length>0)for(let t=0;t<e.length;t++){let r=e.start(t),n=e.end(t);i.updating||(console.log("%c *********************************************************************************************","color:orange"),console.log(`sb remove video [${r},${n}], of [${r},${n}]`),console.log("%c *********************************************************************************************","color:orange"),i.remove(r,n),this._bufferAllReset=!1)}}}this.isInitSegmentAppended}}t.default=d},4299:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(6479)),s=i(r(9510));class a extends s.default{constructor(e){super(e,n.default.FPS_DROP_LEVEL_CAPPING,n.default.MEDIA_ATTACHING,n.default.MANIFEST_PARSED,n.default.LEVELS_UPDATED,n.default.BUFFER_CODECS,n.default.MEDIA_DETACHING),this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=null,this.levels=[],this.media=null,this.restrictedLevels=[],this.timer=null,this.clientRect=null}destroy(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())}onMediaAttaching(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null}onManifestParsed(e){const t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()}onBufferCodecs(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()}onLevelsUpdated(e){this.levels=e.levels}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){let e=this.levels?this.levels.length:0;if(e){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){if(!this.levels)return-1;const t=this.levels.filter(((t,r)=>a.isLevelAllowed(r,this.restrictedLevels)&&r<=e));return this.clientRect=null,a.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*a.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*a.contentScaleFactor}static get contentScaleFactor(){let e=1;try{e=window.devicePixelRatio}catch(e){}return e}static isLevelAllowed(e,t=[]){return-1===t.indexOf(e)}static getMaxLevelByMediaSize(e,t,r){if(!e||e&&!e.length)return-1;let i=e.length-1;for(let a=0;a<e.length;a+=1){const o=e[a];if((o.width>=t||o.height>=r)&&(n=o,!(s=e[a+1])||n.width!==s.width||n.height!==s.height)){i=a;break}}var n,s;return i}}t.default=a},6650:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.findFragmentByPTS=t.findFragmentByPDT=t.pdtWithinToleranceTest=t.fragmentWithinToleranceTest=void 0;const n=i(r(4502));function s(e=0,t=0,r){let i=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=e?1:r.start-i>e&&r.start?-1:0}function a(e,t,r){let i=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>e}t.fragmentWithinToleranceTest=s,t.pdtWithinToleranceTest=a,t.findFragmentByPDT=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Number.isFinite(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(let i=0;i<e.length;++i){let n=e[i];if(a(t,r,n))return n}return null},t.findFragmentByPTS=function(e,t,r=0,i=0){let a=null;if(a=e?t[e.sn-t[0].sn+1]:t[0],a&&0===s(r,i,a))return a;return n.default.search(t,s.bind(null,r,i))||a}},2266:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FragmentTracker=t.FragmentState=void 0;const n=i(r(9510)),s=i(r(6479)),a=i(r(8370)),o=i(r(9875)),l=r(5542);t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class u extends n.default{constructor(e){super(e,s.default.BUFFER_APPENDED,s.default.FRAG_BUFFERED,s.default.FRAG_LOADED,s.default.FRAG_SEEKED,s.default.BUFFER_FRAME_APPENDING),this.bufferPadding=.02,this.fragments=Object.create(null),this.frames=Object.create(null),this.timeRanges=Object.create(null),this._lastBufferedFragment=null,this._lastBufferedFrame=null,this._mobileCurrentTime=-1,this.config=e.config}get lastBufferedFragment(){return this._lastBufferedFragment}set lastBufferedFragment(e){this._lastBufferedFragment=e}get lastBufferedFrame(){return this._lastBufferedFrame}set lastBufferedFrame(e){this._lastBufferedFrame=e}get mobileCurrentTime(){return this._mobileCurrentTime}set mobileCurrentTime(e){this._mobileCurrentTime=e}destroy(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,n.default.prototype.destroy.call(this),super.destroy()}getBufferedFrag(e,t){const r=this.fragments,i=Object.keys(r).filter((i=>{const n=r[i];if(n.body.type!==t)return!1;if(!n.buffered)return!1;const s=n.body;return s.startPTS<=e&&e<=s.endPTS}));if(0===i.length)return null;{const e=i.pop();return r[e].body}}detectEvictedFragments(e,t){Object.keys(this.fragments).forEach((r=>{const i=this.fragments[r];if(!i||!i.buffered)return;const n=i.range[e];if(!n)return;const s=n.time;for(let e=0;e<s.length;e++){const r=s[e];if(!this.isTimeBuffered(r.startPTS,r.endPTS,t)){this.removeFragment(i.body);break}}}))}detectPartialFragments(e){if(e&&"initSegment"!==e.sn){let t=this.getFragmentKey(e),r=this.fragments[t];r&&(r.buffered=!0,this._lastBufferedFragment=e,Object.keys(this.timeRanges).forEach((t=>{if(e.hasElementaryStream(t)){let i=this.timeRanges[t];r.range[t]=this.getBufferedTimes(e.startPTS,e.endPTS,i)}})))}}getBufferedTimes(e,t,r){let i,n,s=[],a=!1;for(let o=0;o<r.length;o++){if(i=r.start(o)-this.bufferPadding,n=r.end(o)+this.bufferPadding,e>=i&&t<=n){s.push({startPTS:Math.max(e,r.start(o)),endPTS:Math.min(t,r.end(o))});break}if(e<n&&t>i)s.push({startPTS:Math.max(e,r.start(o)),endPTS:Math.min(t,r.end(o))}),a=!0;else if(t<=i)break}return{time:s,partial:a}}getFragmentKey(e){return`${e.type}_${e.channel}_${e.level}_${e.sn}`}getNextFragmentKey(e){return`${e.type}_${e.channel}_${e.level}_${e.sn+1}`}getFrameKey(e){return`${e.type}_${e.channel}_${e.level}_${e.sn}`}getPartialFragment(e){let t,r,i,n=null,s=0;return Object.keys(this.fragments).forEach((a=>{const o=this.fragments[a];this.isPartial(o)&&(r=o.body.startPTS-this.bufferPadding,i=o.body.endPTS+this.bufferPadding,e>=r&&e<=i&&(t=Math.min(e-r,i-e),s<=t&&(n=o.body,s=t)))})),n}getCurrentFragment(e,t,r){let i=null,n=0,s=0,a=0,o=0;const{bufferPadding:l,fragments:u}=this;return u&&Object.keys(u).forEach((t=>{const h=u[t];h&&h.body.channel===r&&(this.hls.isLive?(s=h.body.liveStartTime-l,a=h.body.liveEndTime+l):(s=h.body.start-l,a=h.body.end+l),e>=s&&e<=a&&(n=Math.min(e-s,a-e),o<=n&&(i=h.body,o=n)))})),i}getCurrentFrame(e){const t=this.getFrameKey(e);return this.frames[t]}getState(e){let r=this.getFragmentKey(e),i=this.fragments[r],n=t.FragmentState.NOT_LOADED;return void 0!==i&&(n=i.buffered?!0===this.isPartial(i)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),n}isPartial(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)}isTimeBuffered(e,t,r){let i,n;for(let s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,n=r.end(s)+this.bufferPadding,e>=i&&t<=n)return!0;if(t<=i)return!1}return!1}onFragLoaded(e){const t=e.frag,r=e.stats,i=e.payload;if(!Number.isFinite(t.sn))return;const n=a.default.parseSegment(i);o.default.parseSegment(i),n&&n.length>0?t.emsg=n:console.log(`%c [ ** Error ** ]: Fragment Emsg is NULL -> ${t.channelName} - ${t.sn} - ${t.fileName}`,"color:blue"),this.fragments[this.getFragmentKey(t)]={seq:t.sn,body:t,stats:r,range:Object.create(null),buffered:!1}}onBufferAppended(e){this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((e=>{let t=this.timeRanges[e];this.detectEvictedFragments(e,t)}))}onBufferFrameAppending(e){if("init"!==e.type){const t=e.frag,r=e.payload,i=e.context;if(t){if(!Number.isFinite(t.sn))return;try{if(!t.emsg){const e=a.default.parseFrame(r);if(!(e&&e.length>0))return void console.log(`!!!!! [ Error ]: Frame Emsg is NULL -> ${t.channelName} - ${t.sn} - ${t.fileName}`);t.emsg=e,t.payload=r}switch(this.hasFrame(t)||(this.frames[this.getFrameKey(t)]={body:t}),this.lastBufferedFrame=t,this.hls.playbackChannel=t.channel,e.type){case l.FrameType.TIMESLICE:if(i&&i.position===l.FramePosition.START)this.hls.trigger(s.default.RESET_PREVIOUS_DATA);else if(this.hls.videoIsPlaying){let e=0;this.hls.isLive,e=t.start,window.callUpdatePlaybackTime(e)}break;case l.FrameType.CONTINUE:break;case l.FrameType.SEEK:console.log("***** Seek *****");break;case l.FrameType.TIMEMACHINE:if(i&&i.position===l.FramePosition.START)this.hls.trigger(s.default.RESET_PREVIOUS_DATA);else if(this.hls.isMobile&&this.hls.videoIsPlaying){let e=0;this.hls.isLive,e=this.hls.mobileCurrentTime,window.callUpdatePlaybackTime(e)}}}catch(e){console.log("tracker_onFrameLoaded",e)}}else console.log("Invalid Frame Data!!!")}}onFragBuffered(e){this.detectPartialFragments(e.frag)}onFragSeeked(e){this.detectPartialFragments(e.frag)}hasFragment(e){const t=this.getFragmentKey(e);return void 0!==this.fragments[t]}hasFrame(e){const t=this.getFrameKey(e);return void 0!==this.frames[t]}removeFragment(e){let t=this.getFragmentKey(e);delete this.fragments[t]}removeAllFragments(){this.fragments=Object.create(null)}removeAllFrames(){console.log("removeAllFrames"),this.frames=Object.create(null)}removeLastBufferedFragment(){this._lastBufferedFragment=null}removeLastBufferedFrame(){console.log("^^ removeLastBufferedFrame ^^"),this._lastBufferedFrame=null}}t.FragmentTracker=u},2107:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SKIP_BUFFER_RANGE_START=t.SKIP_BUFFER_HOLE_STEP_SECONDS=t.MAX_START_GAP_JUMP=t.STALL_MINIMUM_DURATION_MS=void 0;const n=r(7790),s=r(3895),a=i(r(6479));t.STALL_MINIMUM_DURATION_MS=250,t.MAX_START_GAP_JUMP=2,t.SKIP_BUFFER_HOLE_STEP_SECONDS=.1,t.SKIP_BUFFER_RANGE_START=.05,t.default=class{constructor(e,t,r,i){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=i,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}poll(e){var r;const{config:i,media:s,stalled:a}=this,{currentTime:o,seeking:l}=s,u=this.seeking&&!l,h=!this.seeking&&l;if(this.seeking=l,o!==e)return this.moved=!0,void(null!==a&&(this.stallReported&&(this.stallReported=!1),this.stalled=null,this.nudgeRetry=0));if((h||u)&&(this.stalled=null),s.paused||s.ended||0===s.playbackRate||!n.BufferHelper.getBuffered(s).length)return;const f=n.BufferHelper.bufferInfo(s,o,0),c=f.len>0,d=f.nextStart||0;if(!c&&!d)return;if(l){const e=f.len>t.MAX_START_GAP_JUMP,r=!d||d-o>t.MAX_START_GAP_JUMP&&!this.fragmentTracker.getPartialFragment(o);if(e||r)return;this.moved=!1}if(!this.moved&&this.stalled){const e=Math.max(d,f.start||0)-o,i=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,n=(null===(r=null==i?void 0:i.details)||void 0===r?void 0:r.live)?2*i.details.targetduration:t.MAX_START_GAP_JUMP;if(e>0&&e<=n)return void this._trySkipBufferHole(null)}const m=window.self.performance.now();if(null===a)return void(this.stalled=m);const p=m-a;!l&&p>=t.STALL_MINIMUM_DURATION_MS&&this._reportStall(f.len);const g=n.BufferHelper.bufferInfo(s,o,i.maxBufferHole);this._tryFixBufferStall(g,p)}_tryFixBufferStall(e,t){const{config:r,fragmentTracker:i,media:n}=this,s=n.currentTime,a=i.getPartialFragment(s);a&&this._trySkipBufferHole(a)||e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,stallReported:r}=this;r||(this.stallReported=!0,t.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))}_trySkipBufferHole(e){const{config:r,hls:i,media:o}=this,l=o.currentTime;let u=0;const h=n.BufferHelper.getBuffered(o);for(let n=0;n<h.length;n++){const f=h.start(n);if(l+r.maxBufferHole>=u&&l<f){const r=Math.max(f+t.SKIP_BUFFER_RANGE_START,o.currentTime+t.SKIP_BUFFER_HOLE_STEP_SECONDS);return this.moved=!0,this.stalled=null,o.currentTime=r,e&&i.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:`fragment loaded with buffer holes, seeking from ${l} to ${r}`,frag:e}),r}u=h.end(n)}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:r}=this,i=r.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<e.nudgeMaxRetry){const o=i+n*e.nudgeOffset;r.currentTime=o,t.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else t.trigger(a.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}}},4454:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(6479)),s=i(r(9510)),a=r(3895),o=r(8540),l=r(9324);class u extends s.default{constructor(e){super(e,n.default.MANIFEST_LOADED,n.default.LEVEL_LOADED,n.default.FRAG_LOADED,n.default.GOP_LEVEL_SWITCHING,n.default.ERROR),this.canload=!1,this.currentLevelIndex=null,this.currentLevelHeight=null,this.manualLevelIndex=-1,this.timer=null,this._levels=[],this._levels_GOP=[],this._levels_FRAME=[]}onHandlerDestroying(){this.clearTimer(),this.manualLevelIndex=-1}clearTimer(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}startLoad(){let e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((e=>{e.loadError=0})),null!==this.timer&&this.loadLevel()}stopLoad(){this.hls.isLive||(this.canload=!1)}onManifestLoaded(e){let t,r=[],i=[],s={},l=null,u=!1;if(e.levels.forEach((e=>{e.loadError=0,e.fragmentError=!1,u=u||!!e.videoCodec,l=s[e.bitrate],l?l.url.push(e.url):(e.url=[e.url],e.urlId=0,s[e.bitrate]=e,r.push(e))})),u&&(r=r.filter((({videoCodec:e})=>!!e))),r=r.filter((({videoCodec:e})=>!e||(0,o.isCodecSupportedInMp4)(e,"video"))),e.frameLevels&&e.frameLevels.length>0&&(i=this.setFrameLevels(e)),r.length>0){t=r[0].bitrate,r.sort(((e,t)=>e.bitrate-t.bitrate)),this._levels=this._levels_GOP=r;for(let e=0;e<r.length;e++)if(r[e].bitrate===t){this._firstLevel=e;break}i&&i.length>0&&(i.sort(((e,t)=>e.bitrate-t.bitrate)),this._levels_FRAME=i),this.hls.trigger(n.default.MANIFEST_PARSED,{levels:r,frameLevels:i,firstLevel:this._firstLevel,stats:e.stats,video:u})}else this.hls.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})}setLevelAuto(){this.hls.trigger(Event.LEVEL_SWITCHING,{})}setLevelInternal(e){const t=this._levels,r=this.hls;if(e>=0&&e<t.length){this.clearTimer();const i=t[e],s=i.details;if(this.currentLevelIndex!==e){this.currentLevelIndex=e,this.currentLevelHeight=i.height;const s=t[e];s.level=e,r.trigger(n.default.LEVEL_SWITCHING,s)}if(!s||s.live){let t=i.urlId;r.trigger(n.default.LEVEL_LOADING,{url:i.url[t],fixedurl:i.fixedurl,level:e,id:t,levelDetails:s})}}else r.trigger(n.default.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}onError(e){if(e.fatal)return void(e.type===a.ErrorTypes.NETWORK_ERROR&&this.clearTimer());let t,r=!1,i=!1;switch(e.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:t=e.frag.level,i=!0;break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,i)}recoverLevel(e,t,r,i){let n,s,a,{config:o}=this.hls,{details:l}=e,u=this._levels[t];if(u.loadError++,u.fragmentError=i,r){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);s=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout((()=>this.loadLevel()),s),e.levelRetry=!0,this.levelRetryCount++}(r||i)&&(n=u.url.length,n>1&&u.loadError<n?(u.urlId=(u.urlId+1)%n,u.details=void 0):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,this.hls.nextAutoLevel=this.currentLevelIndex=a):i&&(this.currentLevelIndex=null))}onFragLoaded({frag:e}){if(void 0!==e&&"main"===e.type){const t=this._levels[e.level];void 0!==t&&(t.fragmentError=!1,t.loadError=0,this.levelRetryCount=0)}}onLevelLoaded(e){const{level:t,details:r}=e;if(t!==this.currentLevelIndex)return;const i=this._levels[t];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){const t=(0,l.computeReloadInterval)(i.details,r,e.stats.trequest);this.timer=setTimeout((()=>this.loadLevel()),t)}else this.clearTimer()}onGopLevelSwitching(e){switch(e.gop){case 30:this._levels=this._levels_GOP;break;case 1:this._levels=this._levels_FRAME}}loadLevel(){if(null!==this.currentLevelIndex&&this.canload){const e=this._levels_GOP[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){const t=this.currentLevelIndex,r=e.urlId,i=e.url[r],s=e.fixedurl,a=e.details;this.hls.trigger(n.default.LEVEL_LOADING,{url:i,fixedurl:s,level:t,id:r,levelDetails:a})}}}removeLevel(e,t){const r=this.levels.filter(((r,i)=>i!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter(((e,r)=>r!==t)),r.urlId=0,!0))).map(((e,t)=>{const{details:r}=e;return r&&r.fragments&&r.fragments.forEach((e=>{e.level=t})),e}));this._levels=r,this.hls.trigger(n.default.LEVELS_UPDATED,{levels:r})}setFrameLevels(e){let t={},r=null,i=!1,n=[];return e.frameLevels.forEach((e=>{e.loadError=0,e.fragmentError=!1,i=i||!!e.videoCodec,r=t[e.bitrate],r?r.url.push(e.url):(e.url=[e.url],e.urlId=0,t[e.bitrate]=e,n.push(e))})),n=n.filter((({videoCodec:e})=>!e||(0,o.isCodecSupportedInMp4)(e,"video"))),n}get levels(){return this._levels}get level(){return this.currentLevelIndex}get levelHeight(){return this.currentLevelHeight}set level(e){let t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e?this.level=e:this.setLevelAuto()}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){let e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}t.default=u},9324:(e,t)=>{"use strict";function r(e,t,r){let i=e[t],n=e[r],s=n.startPTS;if(Number.isFinite(s))r>t?i.duration=s-i.start:n.duration=i.start-s;else if(r>t){const e=i.cc===n.cc;n.start=i.start+(e&&i.minEndPTS?i.minEndPTS-i.start:i.duration)}else n.start=Math.max(i.start-n.duration,0)}function i(e,t,i,n,s,a){let o=i,l=n;if(Number.isFinite(t.startPTS)){let e=Math.abs(t.startPTS-i);Number.isFinite(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,o=Math.max(i,t.startPTS),i=Math.min(i,t.startPTS),l=Math.min(n,t.endPTS),n=Math.max(n,t.endPTS),s=Math.min(s,t.startDTS),a=Math.max(a,t.endDTS)}const u=i-t.start;t.start=t.startPTS=i,t.maxStartPTS=o,t.endPTS=n,t.minEndPTS=l,t.startDTS=s,t.endDTS=a,t.duration=n-i;const h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;let f,c,d;for(f=h-e.startSN,c=e.fragments,c[f]=t,d=f;d>0;d--)r(c,d,d-1);for(d=f;d<c.length-1;d++)r(c,d,d+1);return e.PTSKnown=!0,u}function n(e,t,r){if(!e||!t)return;const i=Math.max(e.startSN,t.startSN)-t.startSN,n=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN;for(let a=i;a<=n;a++){const i=e.fragments[s+a],n=t.fragments[a];if(!i||!n)break;r(i,n,a)}}function s(e,t){const r=t.startSN-e.startSN,i=e.fragments,n=t.fragments;if(!(r<0||r>i.length))for(let e=0;e<n.length;e++)n[e].start=i[r].start}Object.defineProperty(t,"__esModule",{value:!0}),t.computeReloadInterval=t.adjustSliding=t.mapFragmentIntersection=t.mergeDetails=t.updateFragPTSDTS=t.updatePTS=t.addGroupId=void 0,t.addGroupId=function(e,t,r){"audio"===t&&(e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r))},t.updatePTS=r,t.updateFragPTSDTS=i,t.mergeDetails=function(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment,t.initFrameSegment=e.initFrameSegment);let r,a=0;if(n(e,t,((e,i)=>{a=e.cc-i.cc,Number.isFinite(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,r=i),t.PTSKnown=!0})),t.PTSKnown){if(a){const e=t.fragments;for(let t=0;t<e.length;t++)e[t].cc+=a}r?i(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):s(e,t),t.PTSKnown=e.PTSKnown}},t.mapFragmentIntersection=n,t.adjustSliding=s,t.computeReloadInterval=function(e,t,r){let i=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration);const n=i/2;return e&&t.endSN===e.endSN&&(i=n),r&&(i=Math.max(n,i-(window.performance.now()-r))),Math.round(i)}},4051:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=s(r(6486)),u=o(r(6479)),h=r(7790),f=o(r(4818)),c=o(r(8790)),d=r(2266),m=r(8790),p=r(8158),g=s(r(9324)),_=r(3895),v=r(5699),y=r(6650),E=s(r(2107)),T=s(r(5542)),S=o(r(467)),b=o(r(7715)),A=r(6727);class R extends T.default{constructor(e,t){super(e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.FRAG_SEEKED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.CHANNEL_SWITCHING,u.default.POSITION_SWITCHING,u.default.GOP_LEVEL_SWITCHING,u.default.TIMESLICE_FRAG_LOADED,u.default.TIMESLICE_INIT_SEG_APPENDED,u.default.TIMESLICE_FRAG_APPENDED,u.default.TIMEMACHINE_FRAG_LOADED,u.default.FRAME_FRAG_LOADED,u.default.FRAME_META_LOADED,u.default.FRAME_SWITCHING,u.default.FRAME_INTERACTIVE,u.default.CHANNEL_CONTINUING,u.default.ERROR),this._liveStartSeq=-1,this._liveEndSeq=-1,this._liveInitStart=!1,this._fixedurl=void 0,this._url=void 0,this._levels=[],this._levels_GOP=[],this._levels_FRAME=[],this._totalFrame=0,this._totalDuration=0,this._currentChannel=0,this._currentGop=30,this._seekStartPosition=0,this._isPlaying=!1,this._isPause=!1,this._isNow=!1,this._isPlaylistDownload=!1,this._isAddInitFrameSegment=!1,this._frameIsPlaying=!1,this._isUseMediaStorage=!1,this._isStartLiveOnNow=!1,this.fragPrevious=void 0,this.fragCurrent=void 0,this.framePrevious=void 0,this.frameCurrent=void 0,this.frameTimer=0,this.tempFrameMS=0,this.tempCurrentFrame=0,this.isRequestAniFrameForFrame=!1,this.pausedBufferFrame=null,this.level=-1,this.levelLastLoad=-1,this.startChannel=-1,this._loadFragment=e=>a(this,void 0,void 0,(function*(){let t=this.fragmentTracker.getState(e);if(this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Number.isFinite(e.sn)&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===d.FragmentState.NOT_LOADED||t===d.FragmentState.PARTIAL)e.autoLevel=this.hls.autoLevelEnabled,this.hls.trigger(u.default.FRAG_LOADING,{frag:e,type:T.SegmentType.CONTINUE}),this.demuxer||(this.demuxer=new f.default(this.hls,"main")),this.state=T.State.FRAG_LOADING;else if(t===d.FragmentState.APPENDING)this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e);else if(t===d.FragmentState.OK){if(!(e=this.getNextFragment(e)))return;console.log("[loadFragment] frag is already appended. request next frag: ",e),this.fragPrevious=e,this.nextLoadPosition=e.start+e.duration,this.demuxer||(this.demuxer=new f.default(this.hls,"main")),this.state=T.State.FRAG_LOADING,this.hls.trigger(u.default.FRAG_LOADING,{frag:e,type:T.SegmentType.CONTINUE})}})),this.doFrame=()=>a(this,void 0,void 0,(function*(){let e=Math.round(1/60*1e3);this.tempFrameMS+=e;let t=Math.floor(this.tempFrameMS/33);this.tempCurrentFrame<t&&(this.tempCurrentFrame=t,this._doTickFrame()),this.requestAniFrameForFrame?(window.cancelAniFrame(this.frameTimer),this.frameTimer=window.requestAniFrame(this.doFrame)):window.cancelAniFrame(this.frameTimer)})),this._doTickFrame=()=>a(this,void 0,void 0,(function*(){const e=this.hls.config,t=this.totalFrame-1,r=this.hls.lastBufferedFrame;if(!r)return this.tempFrameMS=0,this.tempCurrentFrame=0,this.requestAniFrameForFrame=!1,this._switchingGOP(30),void this.startLoad(this.media.currentTime);if(t>0&&r.sn===t)return window.cancelAniFrame(this.frameTimer),void(this.requestAniFrameForFrame=!1);if(this.framePrevious===r)return;if(this.framePrevious=r,e.VIDEO_FPS-(r.sn+1)%e.VIDEO_FPS===e.VIDEO_FPS)return this.tempFrameMS=0,this.tempCurrentFrame=0,this.requestAniFrameForFrame=!1,this.isLive||this.hls.removeLastBufferedFrame(),this._switchingGOP(30),void this.startLoad(r.start+e.FRAME_DURATION);let i=this.hls.currentLevel,n=this._levels[i];n&&this._fetchFrameInfo(r,i,n)})),this._fetchFrameInfo=(e,t,r)=>a(this,void 0,void 0,(function*(){const i=this.hls.config;if(e&&"frame"===e.type){const n={type:p.PlaylistLevelType.FRAME,channel:e.channel,level:t,sn:e.sn+1};if(this.fragmentTracker.hasFrame(n)){const e=this.fragmentTracker.getCurrentFrame(n);if(e.body.payload){const t=e.body,r=e.body.payload;return void this.hls.trigger(u.default.BUFFER_FRAME_APPENDING,{type:T.FrameType.CONTINUE,frag:t,payload:r,context:{position:T.FramePosition.MIDDLE}})}}else{const n={type:p.PlaylistLevelType.FRAME,channel:e.channel,level:t,sn:e.sn};let s=-1,a=null,o=null,l=null,u=null;if(this.fragmentTracker.hasFrame(n)){const e=this.fragmentTracker.getCurrentFrame(n).body;e.emsg&&e.emsg.length>0&&(s=4,a=e.emsg[0],o=a?a.messages[s]:null),l=e.originurl,u=e.originBaseurl}if(!o)return;{let n=o.offset+"@"+o.size;console.log(`Frame byteRange: ${n}`);const s=r.height+i.ADAPT_NAME;let a=new c.default;a.type=p.PlaylistLevelType.FRAME,a.level=t,a.channelName=e.channelName,a.channel=e.channel,a.levelName=s,a.start=e.start+i.FRAME_DURATION,a.timeOffset=i.FRAME_DURATION,a.duration=i.FRAME_DURATION,a.cc=0,a.sn=e.sn+1,a.fileName=e.fileName,a.setByteRange(n),l?(a.originurl=u+e.channelName+"/"+r.height+i.URL_PATH+e.fileName,a.originBaseurl=u):(a.fixedurl=this._fixedurl,a.url=this._fixedurl),this.frameCurrent=a,new S.default(this.hls).loadFrame({type:T.FrameType.CONTINUE,frag:a,index:this._currentChannel,gop:this._currentGop,height:r.height})}}}})),this.doFragmentSeek=e=>a(this,void 0,void 0,(function*(){switch(this.state){case T.State.SWITCHING_CHANNEL:case T.State.SWITCHING_FRAME:break;case T.State.SEEK:this.fetchFragmentInfoForSeeking(e)}})),this.flushMainBuffer=(e,t)=>a(this,void 0,void 0,(function*(){this.state=T.State.BUFFER_FLUSHING;let r={startOffset:e,endOffset:t,type:"video"};this.hls.trigger(u.default.BUFFER_FLUSHING,r)})),this.onMediaAttached=e=>a(this,void 0,void 0,(function*(){let t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);let r=this.config;this._levels&&this._levels.length>0&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new E.default(r,t,this.fragmentTracker,this.hls)})),this.onMediaDetaching=()=>a(this,void 0,void 0,(function*(){let e=this.media;e&&e.ended&&(this.startPosition=this.lastCurrentTime=0);let t=this._levels;t&&t.forEach((e=>{e.details&&e.details.fragments.forEach((e=>{e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()})),this.onManifestLoading=e=>a(this,void 0,void 0,(function*(){this.hls.trigger(u.default.BUFFER_RESET),this.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this._url=e.url,this._fixedurl=e.fixedurl})),this.fragmentTracker=t,this.config=e.config,this.media=void 0,this._state=T.State.STOPPED,this.stallReported=!1,this.gapController=null,this._isLive=!1,this._liveStartSeq=-1,this._liveEndSeq=-1,this._liveInitStart=!1,this._fixedurl=void 0,this._url=void 0,this._levels=[],this._levels_GOP=[],this._levels_FRAME=[],this._totalFrame=0,this._totalDuration=0,this._currentChannel=0,this._currentGop=30,this._seekStartPosition=0,this._isPlaying=!1,this._isPause=!1,this._isNow=!1,this._isPlaylistDownload=!1,this._isAddInitFrameSegment=!1,this._frameIsPlaying=!1,this._isUseMediaStorage=!1,this._isStartLiveOnNow=!1,this.fragPrevious=void 0,this.fragCurrent=void 0,this.framePrevious=void 0,this.frameCurrent=void 0,this.frameTimer=0,this.tempFrameMS=0,this.tempCurrentFrame=0,this.isRequestAniFrameForFrame=!1,this.pausedBufferFrame=null,this.previousEmsgOffset=-1,this.startChannel=-1,this.channelDirection=null,this.initSegments=[],this.channelSwitchRequestedTimestamp=0}startLoad(e){if(this._levels&&this._levels.length>0){let t=this.lastCurrentTime;if(30===this._currentGop){if((this.state!==T.State.SEEK||this.videoIsPlaying)&&this.setInterval(this.config.TICK_INTERVAL),this.level=-1,this.fragLoadError=0,!this.startFragRequested){let e=this.hls.startLevel;-1===e&&(e=this.hls.nextAutoLevel),this.level=this.hls.nextLoadLevel=e,this.loadedmetadata=!1}t>0&&-1===e&&(e=t),this.state!==T.State.SWITCHING_CHANNEL&&this.state!==T.State.SWITCHING_FRAME?(this.state=T.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):this.doFragmentSeek(e)}else this.clearInterval(),this.hls.isLive&&this.hls.videoIsPlaying||(console.log("removeLastBufferedFrame. startPosition: ",e),this.hls.removeLastBufferedFrame()),this._switchingGOP(30),this.startLoad(e)}else this.forceStartLoad=!0,this.state=T.State.STOPPED}stopLoad(){this.forceStartLoad=!1,this.tempFrameMS=0,this.tempCurrentFrame=0,this.isRequestAniFrameForFrame=!1,window.cancelAniFrame(this.frameTimer),super.stopLoad()}doTick(){var e;switch(this.state){case T.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case T.State.SEEK:case T.State.SWITCHING_CHANNEL:case T.State.SWITCHING_FRAME:case T.State.SWITCHING_POSITION:break;case T.State.IDLE:this._doTickIdle();break;case T.State.WAITING_LEVEL:var t=null===(e=this._levels[this.level])||void 0===e?void 0:e.details;!t||t.live&&this.levelLastLoaded!==this.level||(this.state=T.State.IDLE);break;case T.State.FRAG_LOADING_WAITING_RETRY:var r=window.performance.now(),i=this.retryDate;(!i||r>=i||this.media&&this.media.seeking)&&(this.state=T.State.IDLE);case T.State.ERROR:case T.State.STOPPED:case T.State.FRAG_LOADING:case T.State.PARSING:case T.State.PARSED:case T.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}_doTickIdle(){var e;const{hls:t,media:r}=this,i=t.config;if(this.videoIsPause)return;if(void 0===this.levelLastLoaded||!r&&(this.startFragRequested||!i.startFragPrefetch))return;let n=0;this.loadedmetadata?this.seekStartPosition>0?(n=this.seekStartPosition,this.seekStartPosition=0):n=r.currentTime:n=this.nextLoadPosition;let s=t.nextLoadLevel,a=this._levels[s];if(!a)return;let o,l=a.bitrate;o=l?Math.max(8*i.maxBufferSize/l,i.maxBufferLength):i.maxBufferLength,o=Math.min(o,i.maxMaxBufferLength);const f=n<i.maxBufferHole?Math.max(E.MAX_START_GAP_JUMP,i.maxBufferHole):i.maxBufferHole,c=h.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,f);if(c.len>=o)return;if(this.fragPrevious&&this.fragPlaying&&this.fragPlaying.channel!==this._currentChannel){const t=this._levels[this.fragPlaying.level];return t.details=null===(e=this._levels[this.fragPlaying.level])||void 0===e?void 0:e.details,void this._fetchFragmentInfo(n,c,t,t.details)}this.level=t.nextLoadLevel=s;const d=a.details;if(!d||d.live&&this.levelLastLoaded!==s)this.state=T.State.WAITING_LEVEL;else{if(this._isStreamEnded(c,d)){const e={type:"video"};return this.hls.trigger(u.default.BUFFER_EOS,e),void(this.state=T.State.ENDED)}this._fetchFragmentInfo(n,c,a,d)}}_updateChannelInLevels(e,t){e.map((e=>{e&&e.url&&(e.url[0]=((e,t)=>{let r=e.split("/"),i=r[r.length-3];if(i&&Number(i)){let r=String(t+1).padStart(3,"0");return e.replace(i,r)}})(e.url[0],t))}))}_fetchFragmentInfo(e,t,r,i){const{config:n}=this;let s,a,o,l,u,h=this.fragPrevious,f=t.end;const d=this.hls.originChannel(this._currentChannel).toString().padStart(3,"0");try{if(i.live&&!this.playlistDownload){const e=this.fragmentTracker.lastBufferedFrame;if(e){this.fragmentTracker.removeLastBufferedFrame();let t=e.fileName.replace("iframe/","");t=t.substring(0,t.lastIndexOf(".")),t&&(a=parseInt(t),o=a*n.FRAGMENT_DURATION,l=o)}else h||(this.fragPrevious=h=this.fragmentTracker.lastBufferedFragment),h?(a=h.sn+1,o=h.start+n.FRAGMENT_DURATION,l=a*n.FRAGMENT_DURATION):this.hls.pausedBufferFrame&&(a=parseInt(String(this.hls.pausedBufferFrame.sn/n.VIDEO_FPS)),o=a*n.FRAGMENT_DURATION,l=o,this.hls.pausedBufferFrame=null);if(a&&a>0){if(u=a.toString().padStart(10,"0")+".m4s",!(a<=this.liveEndSeq))return;s=new c.default,s.type=p.PlaylistLevelType.MAIN,s.fixedurl=this._fixedurl,s.level=r.level,s.channelName=d,s.channel=this._currentChannel,s.levelName=r.height+n.ADAPT_NAME,s.timeOffset=n.FRAGMENT_DURATION,s.duration=n.FRAGMENT_DURATION,s.cc=0,s.sn=a,s.start=o,s.end=o+n.FRAGMENT_DURATION,s.liveStartTime=l,s.liveEndTime=l+n.FRAGMENT_DURATION,s.fileName=u,s.originurl?s.originurl=s.originBaseurl+d+"/"+r.height+this.hls.config.URL_PATH+s.fileName:this.hls.videoType==A.VideoType.Replay?s.url=s.fixedurl+r.height+this.hls.config.URL_PATH+s.fileName:s.url=s.fixedurl+d+"/"+r.height+this.hls.config.URL_PATH+s.fileName}}else{const e=i.fragments,t=e.length;if(0===t)return;this.hls.lastBufferedFrame&&this.hls.removeLastBufferedFrame();let n=0,a=0;if(i.live?(n=e[0].liveStartTime,a=e[t-1].liveStartTime+e[t-1].duration):(n=e[0].start,a=e[t-1].start+e[t-1].duration),i.initSegment&&!i.initSegment.data)s=i.initSegment;else if(i.initFrameSegment&&!i.initFrameSegment.data)s=i.initFrameSegment;else if(i.live){if(t<this.config.initialLiveManifestSize)return}else 0===this.currentTime&&(!h||f<n)&&(s=e[0],s.channel=this._currentChannel,s.channelName=d,s.originurl?s.originurl=s.originBaseurl+d+"/"+r.height+this.hls.config.URL_PATH+s.fileName:this.hls.videoType==A.VideoType.Replay?s.url=s.fixedurl+r.height+this.hls.config.URL_PATH+s.fileName:s.url=s.fixedurl+d+"/"+r.height+this.hls.config.URL_PATH+s.fileName);if(!s)if(s=this._findFragment(n,h,t,e,f,a,i),s){if(s.fixedurl||console.log(s.url),!1===this.isValidMediaFileName(s,r))return void console.log("invalid frag sn: ",s.sn);s.channel=this._currentChannel,s.channelName=d,s.originurl?s.originurl=s.originBaseurl+d+"/"+r.height+this.hls.config.URL_PATH+s.fileName:this.hls.videoType==A.VideoType.Replay?s.url=s.fixedurl+r.height+this.hls.config.URL_PATH+s.fileName:s.url=s.fixedurl+d+"/"+r.height+this.hls.config.URL_PATH+s.fileName,console.log(`*** Next Frag : ${s.url}`)}else{if(Math.floor(this.currentTime)===r.details.endSN)return;console.log("*** Next Frag : null ***")}}s&&this._loadFragment(s)}catch(e){console.log(e)}}getNextFragment(e){let t=Object.assign({},e);const r=(parseInt(t.sn)+1).toString().padStart(10,"0")+".m4s",i=this._levels[e.level];return t.sn=e.sn+1,t.start+=this.config.FRAGMENT_DURATION,t.startDTS+=this.config.FRAGMENT_DURATION,t.startPTS+=this.config.FRAGMENT_DURATION,t.end+=this.config.FRAGMENT_DURATION,t.endDTS+=this.config.FRAGMENT_DURATION,t.endPTS+=this.config.FRAGMENT_DURATION,t.liveEndTime+=this.config.FRAGMENT_DURATION,t.liveStartTime+=this.config.FRAGMENT_DURATION,t.maxStartPTS+=this.config.FRAGMENT_DURATION,t.minEndPTS+=this.config.FRAGMENT_DURATION,t.fileName=r,t.url=t.fixedurl+t.channelName+"/"+i.height+this.config.URL_PATH+t.fileName,!1===this.isValidMediaFileName(t,i)?(console.log("invalid media file: ",t),null):t}_findFragment(e,t,r,i,n,s,a){const o=this.hls.config;let l;if(n<s){const e=0;l=(0,y.findFragmentByPTS)(t,i,n,e)}else l=i[r-1];if(l){const e=l.sn-a.startSN,r=t&&l.level===t.level,n=i[e-1],s=i[e+1];if(t&&l.sn===t.sn)if(r&&!l.backtracked)if(l.sn<a.endSN){let r=t.deltaPTS;l=r&&r>o.maxBufferHole&&t.dropped&&e?n:s}else l=null;else l.backtracked&&(s&&s.backtracked?l=s:(l.dropped=0,n?(l=n,l.backtracked=!0):e&&(l=null)))}return l}_checkFragmentChanged(){let e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(t=r.currentTime,t>this.lastCurrentTime&&(this.lastCurrentTime=t),h.BufferHelper.isBuffered(r,t)?e=this.getBufferedFrag(t):h.BufferHelper.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){let t=e;if(t!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:t});const e=t.level;this.fragPlaying&&this.fragPlaying.level===e||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:e}),this.fragPlaying=t}}}immediateLevelSwitch(){if(!this.immediateSwitch){this.immediateSwitch=!0;let e,t=this.media;t?(e=t.paused,e||t.pause()):e=!0,this.previouslyPaused=e}let e=this.fragCurrent;e&&e.loader&&e.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}immediateLevelSwitchEnd(){const e=this.media;e&&h.BufferHelper.getBuffered(e).length&&(this.immediateSwitch=!1,e.currentTime>0&&h.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}nextLevelSwitch(){const e=this.media;if(e&&e.readyState){let t;const r=this.getBufferedFrag(e.currentTime);if(r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{let e=this.hls.nextLoadLevel,r=this._levels[e],i=this.fragLastKbps;t=i&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*i)+1:0}const i=this.getBufferedFrag(e.currentTime+t);if(i){const e=this.followingBufferedFrag(i);if(e){let t=this.fragCurrent;t&&t.loader&&t.loader.abort(),this.fragCurrent=null;const r=Math.max(i.endPTS,e.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,e.duration));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}onMediaSeeked(){}onManifestParsed(e){this._levels=this._levels_GOP=e.levels,this._levels_FRAME=e.frameLevels,this.startFragRequested=!1;let t=this.config;(t.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(t.startPosition)}onLevelLoaded(e){const t=e.details,r=e.level,i=this._levels[this.levelLastLoaded],n=this._levels[r],s=t.totalduration;let a=0;if(t.live||n.details&&n.details.live){let e=n.details;this.liveStartSeq=t.startSN,this.liveEndSeq=t.endSN,this.totalDuration=this.liveEndSeq*this.config.FRAGMENT_DURATION,this.totalFrame=Math.ceil(this.totalDuration/this.config.FRAME_DURATION),e&&t.fragments.length>0?(g.mergeDetails(e,t),a=t.fragments[0].start,t.PTSKnown&&Number.isFinite(a)||a||(0,v.alignStream)(this.fragPrevious,i,t)):(t.PTSKnown=!1,(0,v.alignStream)(this.fragPrevious,i,t)),console.log("%c ### Loaded Live Level","color:orange"),console.log(`%c [Start] : ${this.liveStartSeq}`,"color:orange"),console.log(`%c [End] : ${this.liveEndSeq}`,"color:orange"),console.log(`%c [Duration] : ${this.totalDuration}`,"color:orange"),console.log(`%c [Frame] : ${this.totalFrame}`,"color:orange")}else t.PTSKnown=!1,this.totalDuration=s,this.totalFrame=Math.ceil(s/this.config.FRAME_DURATION);if(n.details=t,this._isLive=t.live,this._levels_FRAME&&this._levels_FRAME.length>0&&(this._levels_FRAME[r].details=t),this.levelLastLoaded=r,this.hls.trigger(u.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){let e=t.startTimeOffset;Number.isFinite(e)?(e<0&&(e=a+s+e),this.startPosition=e):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===T.State.WAITING_LEVEL&&(this.state=T.State.IDLE)}onFragLoaded(e){const{fragCurrent:t,hls:r,_levels:i,media:n}=this,s=e.frag,a=e.payload,o=e.fragType;if("CONTINUE"===o){if(!this.videoIsPlaying&&this._frameIsPlaying&&r.trigger(u.default.MEDIA_PAUSE,{}),this.state===T.State.FRAG_LOADING&&t&&("main"===s.type||"frame"===s.type)&&s.level===t.level&&s.sn===t.sn){const l=e.stats,h=i[t.level],c=h.details;if(this.stats=l,"initSegment"===s.sn)this.initSegments[this.level]={context:{frag:e.frag},payload:e.payload},this.state=T.State.IDLE,l.tparsed=l.tbuffered=window.performance.now(),"frame"===s.type?c.initFrameSegment.data=a:(c.initSegment.data=a,r.trigger(u.default.FRAG_BUFFERED,{stats:l,frag:t,id:"main"}));else{this.state=T.State.PARSING,this.pendingBuffering=!0,this.appended=!1;const r=!(n&&n.seeking)&&(c.PTSKnown||!c.live),i=c.initSegment?c.initSegment.data:[];(this.demuxer=this.demuxer||new f.default(this.hls,"main")).push(e.payload,i,"",h.videoCodec,t,c.totalduration,r,o)}}this.fragLoadError=0}else if(t&&"main"===s.type&&s.level===t.level&&s.sn===t.sn){const r=e.stats,s=i[t.level],a=s.details;this.state=T.State.PARSING,this.stats=r,this.pendingBuffering=!0,this.appended=!1;const l=!(n&&n.seeking)&&(a.PTSKnown||!a.live),u=a.initSegment?a.initSegment.data:[];(this.demuxer=this.demuxer||new f.default(this.hls,"main")).push(e.payload,u,"",s.videoCodec,t,a.totalduration,l,o)}}onFragParsingInitSegment(e){const t=this.fragCurrent,r=e.frag;if(e.fragType,t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===T.State.PARSING){let t,i,n=e.tracks;for(t in i=n.video,i&&(i.levelCodec=this._levels[r.level].videoCodec,i.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,n),n){i=n[t];let e=i.initSegment;e&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:t,data:e,parent:"main",content:"initSegment"}))}}}onFragParsingData(e){const t=this.fragCurrent,r=e.frag,i=e.fragType;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===T.State.PARSING){let n=this._levels[r.level],s=t;if(Number.isFinite(e.endPTS)||(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),!0===e.hasVideo&&s.addElementaryStream(m.ElementaryStreamTypes.VIDEO),"video"===e.type)if(s.dropped=e.dropped,s.dropped){if(!s.backtracked){const t=n.details;if(t&&s.sn!==t.startSN)return this.fragmentTracker.removeFragment(s),s.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=T.State.IDLE,this.fragPrevious=s,void(this.demuxer&&(this.demuxer.destroy(),this.demuxer=null))}}else s.backtracked=!1;let a=g.updateFragPTSDTS(n.details,s,e.startPTS,e.endPTS,e.startDTS,e.endDTS),o=this.hls;o.trigger(u.default.LEVEL_PTS_UPDATED,{details:n.details,level:r.level,drift:a,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((t=>{t&&t.length&&this.state===T.State.PARSING&&(this.appended=!0,this.pendingBuffering=!0,o.trigger(u.default.BUFFER_APPENDING,{type:e.type,data:t,parent:"main",content:"data",url:r.fileName,frag:r,fragType:i}))}))}}onFragParsed(e){const t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===T.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=T.State.PARSED,this._checkAppendedParsed())}onBufferCreated(e){let t,r=e.tracks,i=!1;for(let e in r){let n=r[e];"main"===n.id?(t=n,"video"===e&&(this.videoBuffer=r[e].buffer)):i=!0}this.mediaBuffer=i&&t?t.buffer:this.media}onBufferAppended(e){if("main"===e.parent){const t=this.state;t!==T.State.PARSING&&t!==T.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}onGopLevelSwitching(e){switch(e.gop){case 30:this._levels=this._levels_GOP;break;case 1:this._levels=this._levels_FRAME}}_checkAppendedParsed(){if(!(this.state!==T.State.PARSED||this.appended&&this.pendingBuffering)){const e=this.fragCurrent;if(e){this.fragPrevious=e;const t=this.stats;t.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*t.total/(t.tbuffered-t.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:t,frag:e,id:"main"}),this.state=T.State.IDLE}this.seekStartPosition>0&&(this.currentTime=this.seekStartPosition,this.seekStartPosition=0)}}disableChannel(e){console.log("disable channel: ",e),this.hls.currentChannelList=this.hls.currentChannelList.map((t=>t.map((t=>(t.channelNumber===e&&(t.isActive=!1),t)))))}onError(e){let t=e.frag||this.fragCurrent;if(t&&"main"!==t.type)return;let r=!!this.media&&h.BufferHelper.isBuffered(this.media,this.media.currentTime)&&h.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case _.ErrorDetails.FRAG_LOAD_ERROR:case _.ErrorDetails.FRAG_LOAD_TIMEOUT:if(console.log("onError FRAG_LOAD_ERROR|FRAG_LOAD_TIMEOUT: ",e),!e.fatal)if(404===e.response.code||403===e.response.code){if("SWITCHING_CHANNEL"===this.hls.state){const t=e.frag.channel;this.disableChannel(t),console.log("after disable channel list: ",this.hls.currentChannelList),this.hls.trigger(u.default.TIMESLICE_INIT_SEG_APPENDED)}}else if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){let e=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);this.retryDate=window.performance.now()+e,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=T.State.FRAG_LOADING_WAITING_RETRY}else e.fatal=!0,this.state=T.State.ERROR;break;case _.ErrorDetails.LEVEL_LOAD_ERROR:case _.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==T.State.ERROR&&(e.fatal?this.state=T.State.ERROR:e.levelRetry||this.state!==T.State.WAITING_LEVEL||(this.state=T.State.IDLE));break;case _.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==T.State.PARSING&&this.state!==T.State.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=T.State.IDLE):(this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}_reduceMaxBufferLength(e){let t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,!0)}_checkBuffer(){const{media:e}=this;if(!e||0===e.readyState)return;const t=this.mediaBuffer?this.mediaBuffer:e,r=h.BufferHelper.getBuffered(t);!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch&&this.immediateLevelSwitchEnd()}_switchingGOP(e){console.log("_switchingGOP"),1!==e&&30!==e||(this.currentGOP=e,this.hls.trigger(u.default.GOP_LEVEL_SWITCHING,{gop:this.currentGOP})),this.fragCurrent=null,this.frameCurrent=void 0,this.framePrevious=void 0,this._isAddInitFrameSegment=!1}onFragLoadEmergencyAborted(){this.state=T.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition)}onBufferFlushed(){const e=this.mediaBuffer?this.mediaBuffer:this.media;if(e){const t=m.ElementaryStreamTypes.VIDEO;this.fragmentTracker.detectEvictedFragments(t,h.BufferHelper.getBuffered(e))}this.fragPrevious=null,this.state!==T.State.SWITCHING_FRAME&&(this.state=T.State.IDLE)}onLevelsUpdated(e){this._levels=e.levels}_seekToStartPos(){const{media:e}=this,t=e.currentTime;let r=this.startPosition;if(t!==r&&r>=0){if(e.seeking)return;const t=h.BufferHelper.getBuffered(e),i=(t.length?t.start(0):0)-r;i>0&&i<this.config.maxBufferHole&&(r+=i,this.startPosition=r),e.currentTime=r}}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,p.PlaylistLevelType.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.endPTS+.5):null}onPositionSwitching(e){const t=e.channelNumber,r=e.channelSwitchRequestedTimestamp;this._isAddInitFrameSegment=!1,console.log("onPositionSwitching channelNumber: ",t),this.onChannelSwitching({startChannel:t,channelDirection:null,channelSwitchRequestedTimestamp:r})}loadFrameMeta(e){console.log("loadFrameMeta channelNumber: ",e);const t=this.fragPlaying,r=t.fixedurl,i=this.getTextChannel(e),n=this.getCurrentLevelInfo(),s=t.fileName.replace("m4s","json");let a=r+i+"/"+n.height+this.config.URL_PATH+"iframe/"+s;console.log("frameMetaUrl: ",a),new b.default(this.hls).onFrameMetaLoading({url:a,channelNumber:e})}getCurrentLevelInfo(){return this._levels[this.hls.currentLevel]}getTextChannel(e){return e?e.toString().padStart(3,"0"):this._currentChannel.toString().padStart(3,"0")}onFrameMetaLoaded(e){console.log("onFrameMetaLoaded");const{config:t}=this,{context:r}=e,i=e.payload.offset_list;if(!i||0===i.length||i.length>30)return void console.warn("Invalid metaData: ",i);const n=this.getCurrentFrameSn(),s=Math.floor(n%t.VIDEO_FPS),a=0===s?0:i[s-1],o=a+"@"+(i[s]-a);console.log("[onFrameMetaLoaded] request json ByteRange:",o);const l=this.getCurrentLevelInfo(),u=this.getTextChannel(r.channelNumber);let h=new c.default;h.type=p.PlaylistLevelType.FRAME,h.fixedurl=this._fixedurl,h.level=l.level,h.channelName=u,h.channel=r.channelNumber,h.url=r.url.replace(".json",".m4s"),h.frameurl=h.url,h.timeOffset=t.FRAME_DURATION,h.duration=t.FRAME_DURATION,h.cc=0,h.sn=n+1,h.start=h.sn*t.FRAME_DURATION,h.position=h.start+.01,h.setByteRange(o),new S.default(this.hls).loadFrame({type:T.FrameType.TIMESLICE,frag:h,index:r.channel,gop:this._currentGop,height:l.height,position:r.position})}onChannelSwitching(e){if(this.startChannel=e.startChannel,this.channelDirection=e.channelDirection,this.channelSwitchRequestedTimestamp=e.channelSwitchRequestedTimestamp,this.initSegments[this.level]){const{context:e,payload:t}=this.initSegments[this.level];e.frag.position=this.currentTime,console.log("[onChannelSwitching] append initSegment"),this.hls.trigger(u.default.BUFFER_FRAME_APPENDING,{type:e.type,frag:e.frag,payload:t,context:e,isInitSegment:"initSegment"===e.frag})}else console.log("[onChannelSwitching] loadTimesliceInitSegment"),this.loadTimesliceInitSegment(this.startChannel,this.channelDirection)}loadTimesliceIframeInitSegment(e){const{hls:t,config:r,level:i}=this,n=this.getCurrentLevelInfo(),s=this._fixedurl,a=this.getTextChannel(e);let o=new c.default;o.type=p.PlaylistLevelType.MAIN,o.level=i,o.channelName=a,o.channel=e,o.timeOffset=r.FRAME_DURATION,o.duration=r.FRAME_DURATION,o.cc=0,o.url=s+a+"/"+n.height+r.URL_PATH+this.getIFramePath()+"init.mp4",o.frameurl=o.url,o.fileName="init.mp4",o.originurl=o.url,o.fixedurl=s,o.start=Math.floor(this.currentTime),o.position=this.currentTime,o.end=o.start+r.FRAGMENT_DURATION,o.sn="initSegment",new S.default(t).loadFrame({type:T.FrameType.TIMESLICE,frag:o,index:o.channel,gop:this._currentGop,height:n.height})}isValidMediaFileName(e,t){return!(e.sn>t.details.endSN)}loadTimesliceFragment(e){const{hls:t,config:r,level:i}=this,n=this._levels[i],s=this._fixedurl;let{channelDirection:a}=this;const o=this.hls.originChannel(e).toString().padStart(3,"0"),l=Math.floor(this.currentTime),u=this.currentTime,h=T.FramePosition.MIDDLE,f=e;let d=1;(this.videoIsPause||this.videoIsPlaying)&&(d=u%1>.8?2:1);for(let e=0;e<d;e++){const d=(parseInt(String(this.currentTime/r.FRAGMENT_DURATION))+e).toString().padStart(10,"0")+".m4s",m=0===e?u:u+r.FRAGMENT_DURATION;let g=new c.default;(g.type=p.PlaylistLevelType.MAIN,g.level=i,g.channelName=o,g.channel=f,g.timeOffset=r.FRAGMENT_DURATION,g.duration=r.FRAGMENT_DURATION,g.cc=0,g.frameurl=null,g.url=s+o+"/"+n.height+r.URL_PATH+d,g.fileName=d,g.originurl=g.url,g.position=u,g.start=Math.floor(m),g.end=g.start+g.duration,g.fixedurl=s,g.sn=l+e,!1!==this.isValidMediaFileName(g,n))?new S.default(t).loadFrame({type:T.FrameType.TIMESLICE,frag:g,index:f,gop:this._currentGop,height:n.height,direction:a,position:h}):console.log("invalid frag.sn: ",g.sn," ",n.details.endSN)}}onTimesliceFragAppended(){console.log("onTimesliceFragAppended"),window.callByIsChannelSwitchDone(!0),window.callByChannel(this._currentChannel)}onTimesliceFragLoaded(e){console.log("onTimesliceFragLoaded channel: ",e.context.frag.channel);const t=e.context,r=e.payload;this.fragPrevious=t.frag,this._currentChannel=t.frag.channel,this.hls.trigger(u.default.BUFFER_FRAME_APPENDING,{type:t.type,frag:t.frag,payload:r,context:t,isInitSegment:"initSegment"===t.frag,channelSwitchRequestedTimestamp:this.channelSwitchRequestedTimestamp})}getNextActiveChannelInGroup(e){let t=-1;const r=this.hls.currentChannelList;let i,n,s;for(const e of r)if(n=e[0],s=e[e.length-1],n.channelNumber<=this._currentChannel&&this._currentChannel<=s.channelNumber){i=e;break}if("L"===e&&this._currentChannel===n.channelNumber||"R"===e&&this._currentChannel===s.channelNumber)return this._currentChannel;const a=i.findIndex((e=>e.channelNumber===this._currentChannel));for(let r="R"===e?a+1:a-1;"R"===e?r<i.length:r>=0;"R"===e?r++:r--){const e=i[r];if(e.isActive){t=e.channelNumber;break}}return t}onTimesliceInitSegAppended(e){if(console.log("onTimesliceInitFragAppended state: ",this.hls.state),this.hls.state===T.State.SWITCHING_CHANNEL){0===this._currentChannel&&(this._currentChannel=1);const e=this.getNextActiveChannelInGroup(this.channelDirection);-1===e&&console.log("error"),this._isAddInitFrameSegment=!0,this.loadTimesliceFragment(e)}else this.hls.state===T.State.SWITCHING_POSITION&&(this._isAddInitFrameSegment=!0,this.loadTimesliceFragment(this.startChannel))}onTimemachineFragLoaded(e){const t=e.context,r=e.payload;this._isAddInitFrameSegment||this.onAppendInitFrameSegment(t.frag),this.hls.trigger(u.default.BUFFER_FRAME_APPENDING,{type:t.type,frag:t.frag,payload:r,context:t})}onFrameFragLoaded(e){const t=e.context,r=e.payload,i=t.frag,n=this.framePrevious;n&&i.level===n.level||this.onAppendInitFrameSegment(i),this.hls.trigger(u.default.BUFFER_FRAME_APPENDING,{type:t.type,frag:i,payload:r,context:t})}loadTimesliceInitSegment(e,t){console.log("loadTimesliceInitSegment");const{hls:r,config:i,level:n}=this,s=this._fixedurl,a=this._levels[n],o=t?this.getNextActiveChannelInGroup(this.channelDirection):e,l=o.toString().padStart(3,"0");let u=new c.default;u.type=p.PlaylistLevelType.MAIN,u.level=n,u.channelName=l,u.channel=o,u.timeOffset=i.FRAGMENT_DURATION,u.duration=i.FRAGMENT_DURATION,u.cc=0,u.url=s+l+"/"+a.height+i.URL_PATH+"init.mp4",u.frameurl=u.url,u.fileName="init.mp4",u.originurl=u.url,u.fixedurl=s,u.start=Math.floor(this.currentTime),u.position=this.currentTime,u.end=u.start+i.FRAGMENT_DURATION,u.sn="initSegment",new S.default(r).loadFrame({type:T.FrameType.TIMESLICE,frag:u,index:u.channel,gop:this._currentGop,height:a.height})}onAppendInitFrameSegment(e){console.log("onAppendInitFrameSegment");const t=e,r=this._levels[t.level],i=r.details.initFrameSegment,n={};let s,a;for(s in n.video={id:"main",container:"video/mp4",codec:r.videoCodec,initSegment:i.data,levelCodec:r.videoCodec,url:i.fileName},n){a=n[s];let e=a.initSegment;e&&this.hls.trigger(u.default.BUFFER_FRAME_APPENDING,{type:"init",payload:e})}this._isAddInitFrameSegment=!0}onChannelContinuing(e){this.clearInterval();const{hls:t,config:r}=this,{channelDirection:i}=e;this.state=T.State.SWITCHING_CHANNEL;const n=this.hls.lastBufferedFrame;try{let e=t.currentLevel,s=this._levels[e];if(!s)return;const a=s.details;if(!a)return;const o={type:p.PlaylistLevelType.FRAME,channel:n.channel,level:e,sn:n.sn},l=this.fragmentTracker.hasFrame(o);let u=n.sn+1,h=n.start+r.FRAME_DURATION,f=-1,d=null,m=null,g=null;if(l){const t=this.fragmentTracker.getCurrentFrame(o).body;if(t.emsg&&t.emsg.length>0){if(f=4,u%r.VIDEO_FPS==0){const e=parseInt(String(u/r.VIDEO_FPS)),t=a.fragments[e];g=this.getIFramePath()+t.fileName}else g=t.fileName;if(d=t.emsg[0],m=d?d.messages[f]:null,m){let t=m.offset+"@"+m.size;console.log(`Frame byteRange: ${t}`);const a=s.height+r.ADAPT_NAME;let o=new c.default;o.type=p.PlaylistLevelType.FRAME,o.level=e,o.channelName=n.channelName,o.channel=n.channel,o.levelName=a,o.timeOffset=r.FRAME_DURATION,o.duration=r.FRAME_DURATION,o.cc=0,o.sn=u,o.fileName=g,o.setByteRange(t),this.isLive?(o.start=h,o.liveStartTime=h):o.start=h,n.originurl?(o.originurl=n.originBaseurl+n.channelName+"/"+s.height+r.URL_PATH+g,o.originBaseurl=n.originBaseurl):(o.fixedurl=this._fixedurl,o.url=this._fixedurl),this.frameCurrent=o,new S.default(this.hls).loadFrame({type:T.FrameType.TIMESLICE,frag:o,index:this._currentChannel,gop:this._currentGop,height:s.height,direction:i,position:T.FramePosition.MIDDLE})}}}}catch(e){}}onFrameSwitching(e){console.log("onFrameSwitching");const{hls:t,config:r,fragmentTracker:i}=this,{frameCount:n,frameDirection:s}=e;let a,o,h;this.state=T.State.SWITCHING_FRAME,this.clearInterval();const f=t.currentLevel;a=this.hls.isMobile?this.mobileCurrentTime:this.currentTime;try{const e=this._levels[f];if(!e)return;const c=e.details;if(!c)return;switch(s){case"F":a+=r.FRAME_DURATION*n;break;case"B":a-=r.FRAME_DURATION*n}if(c.live,h=a,t.isMobile){1!==this._currentGop&&this._switchingGOP(1),o=Math.floor(h/r.FRAME_DURATION);const n=t.originChannel(this._currentChannel).toString().padStart(3,"0"),d={type:p.PlaylistLevelType.FRAME,channel:this._currentChannel,level:f,sn:o};if(i.hasFrame(d)){const e=i.getCurrentFrame(d).body;switch(s){case"F":t.mobileCurrentTime+=r.FRAME_DURATION;break;case"B":t.mobileCurrentTime-=r.FRAME_DURATION;break;default:return}t.trigger(u.default.BUFFER_FRAME_APPENDING,{type:T.FrameType.TIMEMACHINE,frag:e,payload:e.payload})}else if(t.lastBufferedFrame){let i=null,n=null,a=null,o=0;if(t.lastBufferedFrame.channel===d.channel&&t.lastBufferedFrame.level===d.level&&t.lastBufferedFrame.emsg&&t.lastBufferedFrame.emsg.length>0){switch(n=t.lastBufferedFrame.emsg[0],s){case"F":t.lastBufferedFrame.sn===d.sn-1&&(i=n?n.messages[4]:null,o=0);break;case"B":t.lastBufferedFrame.sn===d.sn+1&&(i=n?n.messages[3]:null,o=29);break;default:return}if(i){console.log("SwitchingEmsg: ",n),console.log("EventMessage: ",i);const u=l.cloneDeep(t.lastBufferedFrame),h=i.offset+"@"+i.size;if(d.sn%r.VIDEO_FPS===o)if(u&&u.fileName){let e=u.fileName.replace("iframe/","");if(e=e.substring(0,e.lastIndexOf(".")),e){let t=parseInt(e)+1;switch(s){case"F":t=parseInt(e)+1;break;case"B":t=parseInt(e)-1;break;default:return}a=this.getIFramePath()+t.toString().padStart(10,"0")+".m4s",u.frameurl=null,u.fileName=a}}else console.log("Not bufferedFrame file!!");switch(s){case"F":u.sn+=1,u.start+=r.FRAME_DURATION,this.isLive&&(u.liveStartTime+=r.FRAME_DURATION);break;case"B":u.sn-=1,u.start-=r.FRAME_DURATION,this.isLive&&(u.liveStartTime-=r.FRAME_DURATION);break;default:return}if(u.sn>=0&&u.sn<=this.hls.totalFrame){switch(s){case"F":t.mobileCurrentTime+=r.FRAME_DURATION;break;case"B":t.mobileCurrentTime-=r.FRAME_DURATION;break;default:return}u.emsg=null,u.setByteRange(h),this.frameCurrent=u,console.log("%c ** loadFrame **","color:red"),new S.default(t).loadFrame({type:T.FrameType.TIMEMACHINE,frag:u,index:u.channel,gop:this._currentGop,height:e.height,position:T.FramePosition.MIDDLE})}else console.log("why ??????")}}}else{const i=parseInt(String(a/r.FRAGMENT_DURATION)),s=o%r.VIDEO_FPS;let l,u,h,d;if(c.live)l=i.toString().padStart(10,"0")+".json",u=i.toString().padStart(10,"0")+".m4s";else{const e=c.fragments[i];l=e.fileName.substring(0,e.fileName.lastIndexOf("."))+".json",u=e.fileName,h=e.originBaseurl,d=e.originurl}if(l&&u){let c=null;c=d&&h?h+n+"/"+e.height+r.URL_PATH+this.getIFramePath()+l:this._fixedurl+n+"/"+e.height+r.URL_PATH+this.getIFramePath()+l,new b.default(t).onFrameMetaLoading({type:T.FrameType.TIMEMACHINE,position:T.FramePosition.MIDDLE,url:c,originurl:d,originBaseurl:h,second:i,channel:this._currentChannel,level:f,frame:s,fileName:u,time:a,sn:o})}}}else{const e=i.getCurrentFragment(h,f,this._currentChannel),t=parseInt(String(a/r.FRAGMENT_DURATION)),n=c.fragments[t];if(n.fileName.substring(0,n.fileName.lastIndexOf(".")),e){const t=a%1,n=i.getNextFragmentKey(e);if(!i.fragments[n]){this.hls.originChannel(this._currentChannel).toString().padStart(3,"0");e.sn;r.FRAGMENT_DURATION,r.FRAGMENT_DURATION}if(t<.033){if(this.state===T.State.FRAG_SEEKING)return;this.state=T.State.SWITCHING_FRAME,this.currentTime=a,window.callUpdatePlaybackTime(this.currentTime)}else console.log(`Timemachine NextTime : ${a}`),this.currentTime=a,window.callUpdatePlaybackTime(this.currentTime)}else this.state!==T.State.FRAG_SEEKING&&(console.log("[onFrameSwitching] curFrag not exist. Fetch for seeking"),this.fetchFragmentInfoForSeeking(a))}}catch(e){console.log(e)}}_getNextFrameTimeByDirection(e,t,r){let i=null;switch(r){case"F":e>.2&&(i=t+1);break;case"B":e<.8&&(i=t-1);break;default:return}return i}onFrameInteractive(e){var t;if(console.log(this.onFrameInteractive.name," ",this.media.currentTime),!1===this.isValidDirection(e))return;this.state!==T.State.SWITCHING_FRAME&&(this.hls.removeBufferAllForTimemachine(),this._isAddInitFrameSegment=!0,this.state=T.State.SWITCHING_FRAME),console.log("onFrameInteractive direction: ",e);const{hls:r,fragmentTracker:i,level:n,currentTime:s}=this,a=this.hls.playbackChannel,o=this.getCurrentFrameSn(),l={type:p.PlaylistLevelType.FRAME,channel:a,level:n,sn:o};let u=null;u=i.hasFrame(l)?null===(t=i.getCurrentFrame(l))||void 0===t?void 0:t.body:i.getCurrentFragment(s,n),this.requestMultipleFragments(u,e,3)}generateRequestFragment(e,t,r,i){const{level:n,hls:s,config:a}=this,o=this._levels[n],l=this._fixedurl,u=this._currentChannel,h=this.getCurrentFrameSn(),f=this.hls.originChannel(u).toString().padStart(3,"0");let d=0,m=new c.default;return m.type=p.PlaylistLevelType.FRAME,m.level=n,m.channelName=f,m.channel=u,m.levelName=a.S3_IFRAME_PATH,m.timeOffset=a.FRAME_DURATION,m.duration=a.FRAME_DURATION,m.cc=0,m.frameurl=null,m.url=l+f+"/"+o.height+a.URL_PATH+a.S3_IFRAME_PATH+r,m.fileName=r,m.originurl=m.url,m.start=(h+1)*a.FRAME_DURATION,m.fixedurl=l,m.setByteRange(e),d="B"===t?h-1:"F"===t?h+1:h,i&&(d=i,m.start=(i+1)*a.FRAME_DURATION),m.sn=d,m}requestMultipleFragments(e,t,r=3){const{hls:i,level:n}=this,s=this.getCurrentFrameSn(),a=this._levels[n];let o=[],l=[],u=[];if(30!==this.currentGOP)return;const h=e.emsg[T.Gop30EmsgPosition.CENTER_CENTER].messages,f=s%this.currentGOP;if("F"===t){for(let e=0;e<r;e++)l.push(h[f+e]);for(let e=0;e<r;e++){let t=l[e];o.push(t.messages.offset+"@"+t.messages.size),console.log(`requestMultipleFragments byteRange: ${o[e]}`)}for(let i=0;i<r;i++){let r=this.generateRequestFragment(o[i],t,e.fileName,s-(i-1));u.push(r),1===i&&(this.frameCurrent=r)}u.forEach((e=>{new S.default(this.hls).loadFrame({type:T.FrameType.TIMEMACHINE,frag:e,index:this._currentChannel,gop:this._currentGop,height:a.height,position:T.FramePosition.MIDDLE})}))}}getNextFragmentFileNameByDirection(e,t){let r=Number(t.split(".")[0]),i=t;const n=e=>String(e).padStart(10,"0")+".m4s";return"F"===e?i=n(r+1):"B"===e&&(i=n(r-1)),i||null}isValidDirection(e){return["F","B","R","L"].some((t=>t===e))}getEmsgByteRangeForDirection(e,t,r){var i,n,s;let a=-1,o=null,l=null,u=!1;try{if("F"===r||"B"===r)if(30===this.currentGOP){if(a=t%this.currentGOP,0===a&&"B"===r){const t=e.emsg[T.Gop30EmsgPosition.CENTER_LEFT].messages;l=t[t.length-1],u=!0}else if(29===a&&"F"===r)l=e.emsg[T.Gop30EmsgPosition.CENTER_RIGHT].messages[0],u=!0;else{const t=e.emsg[T.Gop30EmsgPosition.CENTER_CENTER].messages;l="F"===r?t[++a]:t[--a]}if(0===l.messages.offset&&0===l.messages.size)return{byteRange:o,isMoveFragment:u};o=(null===(i=l.messages)||void 0===i?void 0:i.offset)+"@"+(null===(n=l.messages)||void 0===n?void 0:n.size),this._switchingGOP(1)}else if(1===this.currentGOP){const t=null===(s=e.emsg[0])||void 0===s?void 0:s.messages;if(l="F"===r?t[T.Gop1EmsgPosition.CENTER_RIGHT]:t[T.Gop1EmsgPosition.CENTER_LEFT],l&&l.size){const e=l.offset;(-1!==this.previousEmsgOffset&&"B"===r&&e>this.previousEmsgOffset||"F"===r&&this.previousEmsgOffset>e)&&(u=!0),this.previousEmsgOffset=l.offset,o=l.offset+"@"+l.size}}}catch(e){}return{byteRange:o,isMoveFragment:u}}getCurrentFrameSn(){const e=this.hls;let t=null;const{pausedBufferFrame:r}=e;return e.pausedBufferFrame?(t=r,e.pausedBufferFrame=null):t=e.lastBufferedFrame,t?t.sn:Math.floor(this.currentTime/this.config.FRAME_DURATION)}createFragment(e,t,r,i,n,s,a,o,l=0,u,h,f){let d=new c.default;return e&&(d.type=e),t&&(d.fixedurl=t),r&&(d.level=r),i&&(d.channelName=i),n&&(d.channel=n),s&&(d.levelName=s),r&&(d.level=r),a&&(d.timeOffset=a),o&&(d.duration=o),d.cc=l,u&&(d.sn=u),h&&(d.fileName=h),f&&d.setByteRange(f),d}fetchFragmentInfoForSeeking(e){this.state=T.State.FRAG_SEEKING;const{config:t}=this;let r=this.hls.currentLevel,i=this._levels[r];if(!i)return;const n=i.details;if(!n)return;const s=this._currentChannel.toString().padStart(3,"0"),a=n.fragments,o=Math.floor(e/this.config.FRAGMENT_DURATION);let l;if(n.live){const r=parseInt(String(e/t.FRAGMENT_DURATION)),n=r*t.FRAGMENT_DURATION,o=r*t.FRAGMENT_DURATION,h=this.getLiveFileSeqNum(r).toString().padStart(10,"0")+".m4s",f=a[0];l=new c.default,l.type=p.PlaylistLevelType.MAIN,l.fixedurl=this._fixedurl,l.level=i.level,l.channelName=s,l.channel=this._currentChannel,l.levelName=i.height+t.ADAPT_NAME,l.timeOffset=t.FRAGMENT_DURATION,l.duration=t.FRAGMENT_DURATION,l.cc=0,l.sn=r,l.start=n,l.liveStartTime=o,l.liveEndTime=o+t.FRAGMENT_DURATION,l.fileName=h,f.originurl?(l.originBaseurl=f.originBaseurl,l.originurl=f.originBaseurl+s+"/"+i.height+t.URL_PATH+h):l.url=this._fixedurl+s+"/"+i.height+t.URL_PATH+h,this.fragCurrent=l,this.hls.trigger(u.default.FRAG_LOADING,{frag:l,type:T.SegmentType.SEEKING})}else l=a[o],l&&(l.channel=this._currentChannel,l.channelName=s,l.autoLevel=this.hls.autoLevelEnabled,l.originurl||(l.url=l.fixedurl+s+"/"+i.height+this.config.URL_PATH+l.fileName),this.fragCurrent=l,this.hls.trigger(u.default.FRAG_LOADING,{frag:l,type:T.SegmentType.SEEKING}))}onFragSeeked(){console.log("[onFragSeeked]"),this.videoIsPlaying&&(this.hls.startLoad(this.seekStartPosition),this.liveStartSeq>-1&&console.log("Current Live"))}removeAllFragments(){this.fragmentTracker.removeAllFragments()}removeAllFrames(){this.fragmentTracker.removeAllFrames()}removeLastBufferedFragment(){this.fragmentTracker.removeLastBufferedFragment()}removeLastBufferedFrame(){this.fragmentTracker.removeLastBufferedFrame()}getIFramePath(){let e=this.config.S3_IFRAME_PATH;return this._isUseMediaStorage&&(e=this.config.MS_IFRAME_PATH),e}getLiveFileSeqNum(e){let t,r,i=this.hls.currentLevel,n=this._levels[i];if(!n)return;const s=n.details;if(s){if(e>=this.liveEndSeq){const i=e-this.liveEndSeq;t=s.fragments[i],r=parseInt(t.fileName.substring(0,t.fileName.lastIndexOf(".")))}else{const i=this.liveEndSeq-e;t=s.fragments[0];const n=t.fileName.substring(0,t.fileName.lastIndexOf("."));n&&(r=parseInt(n)-i)}return r}}set state(e){if(this.state!==e){const t=this.state;this._state=e,this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}}get state(){return this._state}get currentLevel(){let e=this.media;if(e){const t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}get nextBufferedFrag(){let e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get isLive(){return this._isLive}get liveStartSeq(){return this._liveStartSeq}set liveStartSeq(e){this._liveStartSeq=e}get liveEndSeq(){return this._liveEndSeq}set liveEndSeq(e){this._liveEndSeq=e}get liveIsNow(){return this._isNow}set liveIsNow(e){this._isNow=e}get totalDuration(){return this._totalDuration}set totalDuration(e){this._totalDuration=e}set currentTime(e){let t=this.media;t&&(console.log(`before currentTime: ${t.currentTime}`),t.currentTime=e,console.log(`after currentTime: ${t.currentTime}`))}get currentTime(){let e=this.media;return e?e.currentTime:-1}set playbackChannel(e){this._currentChannel=e,window.callByChannel(this._currentChannel)}get playbackChannel(){return this._currentChannel}set addInitFrameSegment(e){console.log("addInitFrameSegment state: ",e),this._isAddInitFrameSegment=e}get lastBufferedFragment(){return this.fragmentTracker.lastBufferedFragment}get lastBufferedFrame(){return this.fragmentTracker.lastBufferedFrame}set mobileCurrentTime(e){this.fragmentTracker.mobileCurrentTime=e}get mobileCurrentTime(){return this.fragmentTracker.mobileCurrentTime}set videoIsPlaying(e){this._isPlaying=e}get videoIsPlaying(){return this._isPlaying}set videoIsPause(e){this._isPause=e}get videoIsPause(){return this._isPause}set frameIsPlaying(e){this._frameIsPlaying=e}get frameIsPlaying(){return this._frameIsPlaying}get totalFrame(){return this._totalFrame}set totalFrame(e){this._totalFrame=e}set playlistDownload(e){this._isPlaylistDownload=e}get playlistDownload(){return this._isPlaylistDownload}set seekStartPosition(e){this._seekStartPosition=e}get seekStartPosition(){return this._seekStartPosition}get useMediaStorage(){return this._isUseMediaStorage}set useMediaStorage(e){this._isUseMediaStorage=e}get startLiveOnNow(){return this._isStartLiveOnNow}set startLiveOnNow(e){this._isStartLiveOnNow=e}get currentGOP(){return this._currentGop}set currentGOP(e){this._currentGop=e}}t.default=R},2857:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(997)),l=a(r(6291));t.default=class{constructor(e,t,r){this.observer=e,this.config=r,this.remuxer=t}resetInitSegment(e,t,r,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}}resetTimeStamp(){}static probe(e){if(!e)return!1;let t=(l.default.getID3Data(e,0)||[]).length;for(let r=e.length;t<r;t++)if(o.probe(e,t))return!0;return!1}append(e,t,r,i){let n=this._audioTrack,s=l.default.getID3Data(e,0)||[],a=l.default.getTimeStamp(s),u=Number.isFinite(a)?90*a:9e4*t,h=0,f=u,c=e.length,d=s.length,m=[{pts:f,dts:f,data:s}];for(;d<c-1;)if(o.isHeader(e,d)&&d+5<c){o.initTrackConfig(n,this.observer,e,d,n.manifestCodec);let t=o.appendFrame(n,e,d,u,h);if(!t)break;d+=t.length,f=t.sample.pts,h++}else l.default.isHeader(e,d)?(s=l.default.getID3Data(e,d),m.push({pts:f,dts:f,data:s}),d+=s.length):d++;this.remuxer.remux(n,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,r,i)}destroy(){}}},997:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.appendFrame=t.parseFrameHeader=t.getFrameDuration=t.initTrackConfig=t.probe=t.isHeader=t.getFullFrameLength=t.getHeaderLength=t.isHeaderPattern=t.getAudioConfig=void 0;const n=r(3895),s=i(r(6479));function a(e,t,r,i){let a,o,l,u,h,f=navigator.userAgent.toLowerCase(),c=i,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&t[r+2])>>>6),o=(60&t[r+2])>>>2,!(o>d.length-1))return u=(1&t[r+2])<<2,u|=(192&t[r+3])>>>6,/firefox/i.test(f)?o>=6?(a=5,h=new Array(4),l=o-3):(a=2,h=new Array(2),l=o):-1!==f.indexOf("android")?(a=2,h=new Array(2),l=o):(a=5,h=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&o>=6?l=o-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(o>=6&&1===u||/vivaldi/i.test(f))||!i&&1===u)&&(a=2,h=new Array(2)),l=o)),h[0]=a<<3,h[0]|=(14&o)>>1,h[1]|=(1&o)<<7,h[1]|=u<<3,5===a&&(h[1]|=(14&l)>>1,h[2]=(1&l)<<7,h[2]|=8,h[3]=0),{config:h,samplerate:d[o],channelCount:u,codec:"mp4a.40."+a,manifestCodec:c};e.trigger(s.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${o}`})}function o(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function h(e,t){return!!(t+1<e.length&&o(e,t))}function f(e){return 9216e4/e}function c(e,t,r,i,n){let s,a,o,h=e.length;if(s=l(e,t),a=u(e,t),a-=s,a>0&&t+s+a<=h)return o=r+i*n,{headerLength:s,frameLength:a,stamp:o}}t.getAudioConfig=a,t.isHeaderPattern=o,t.getHeaderLength=l,t.getFullFrameLength=u,t.isHeader=h,t.probe=function(e,t){if(h(e,t)){let r=l(e,t);if(t+r>=e.length)return!1;let i=u(e,t);if(i<=r)return!1;let n=t+i;if(n===e.length||n+1<e.length&&o(e,n))return!0}return!1},t.initTrackConfig=function(e,t,r,i,n){if(!e.samplerate){let s=a(t,r,i,n);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec}},t.getFrameDuration=f,t.parseFrameHeader=c,t.appendFrame=function(e,t,r,i,n){let s=c(t,r,i,n,f(e.samplerate));if(s){let i=s.stamp,n=s.headerLength,a=s.frameLength,o={unit:t.subarray(r+n,r+n+a),pts:i,dts:i};return e.samples.push(o),{sample:o,length:a+n}}}},1907:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(6479)),s=r(3895),a=i(r(2857)),o=i(r(1919)),l=i(r(8362)),u=i(r(7168)),h=i(r(9929)),f=i(r(7086));t.default=class{constructor(e,t,r,i){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=i}destroy(){let e=this.demuxer;e&&e.destroy()}push(e,t,r,i,n,s,a,o,l,u,h,f){this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),i,n,s,a,o,l,u,h,f)}pushDecrypted(e,t,r,i,c,d,m,p,g,_,v,y){let E=this.demuxer,T=this.remuxer;if(!E||m||p){const t=this.observer,r=this.typeSupported,i=this.config,c=[{demux:l.default,remux:h.default},{demux:o.default,remux:f.default},{demux:a.default,remux:h.default},{demux:u.default,remux:h.default}];let d;for(let t=0,r=c.length;t<r&&(d=c[t],!d.demux.probe(e));t++);if(!d)return void t.trigger(n.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});T&&T instanceof d.remux||(T=new d.remux(t,i,r,this.vendor)),E&&E instanceof d.demux||(E=new d.demux(t,T,i,r),this.probe=d.demux.probe),this.demuxer=E,this.remuxer=T}(m||p)&&(E.resetInitSegment(r,i,c,_),T.resetInitSegment()),m&&(E.resetTimeStamp(y),T.resetTimeStamp(y)),E.append(e,d,g,v)}}},4818:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(6479)),s=i(r(1907)),a=r(103),o=r(6696),l=r(1659),u=(0,o.getSelfScope)(),h=(0,a.getMediaSource)()||{isTypeSupported:()=>!1};t.default=class{constructor(e,t){this.hls=e,this.id=t;const r=this.observer=new l.Observer,i=e.config,a=(t,r)=>{(r=r||{}).frag=this.frag,r.fragType=this.fragType,r.id=this.id,e.trigger(t,r)};r.on(n.default.FRAG_DECRYPTED,a),r.on(n.default.FRAG_PARSING_INIT_SEGMENT,a),r.on(n.default.FRAG_PARSING_DATA,a),r.on(n.default.FRAG_PARSED,a),r.on(n.default.ERROR,a),r.on(n.default.FRAG_PARSING_METADATA,a),r.on(n.default.FRAG_PARSING_USERDATA,a),r.on(n.default.INIT_PTS_FOUND,a);const o={mp4:h.isTypeSupported("video/mp4"),mpeg:h.isTypeSupported("audio/mpeg"),mp3:h.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;this.demuxer=new s.default(r,o,i,u)}destroy(){let e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{let e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}const t=this.observer;t&&(t.removeAllListeners(),this.observer=null)}push(e,t,r,i,n,s,a,o,l){const u=this.w,h=Number.isFinite(n.startPTS)?n.startPTS:n.start,f=n.decryptdata,c=this.frag,d=!(c&&n.cc===c.cc),m=!(c&&n.level===c.level),p=c&&n.sn===c.sn+1,g=!m&&p;if(this.frag=n,this.fragType=o,u)u.postMessage({cmd:"demux",data:e,decryptdata:f,initSegment:t,audioCodec:r,videoCodec:i,timeOffset:h,discontinuity:d,trackSwitch:m,contiguous:g,duration:s,accurateTimeOffset:a,defaultInitPTS:l},e instanceof ArrayBuffer?[e]:[]);else{let n=this.demuxer;n&&n.push(e,f,t,r,i,h,d,m,g,s,a,l)}}onWorkerMessage(e){let t=e.data,r=this.hls;switch(t.event){case"init":u.URL.revokeObjectURL(this.w.objectURL);break;case n.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}},4023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){let e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");i.set(e.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}skipBits(e){let t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){let e=this.skipLZ();return this.readBits(e+1)-1}readEG(){let e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t,r,i=8,n=8;for(t=0;t<e;t++)0!==n&&(r=this.readEG(),n=(i+r+256)%256),i=0===n?i:n}readSPS(){let e,t,r,i,n,s,a,o,l,u=0,h=0,f=0,c=0,d=this.readUByte.bind(this),m=this.readBits.bind(this),p=this.readUEG.bind(this),g=this.readBoolean.bind(this),_=this.skipBits.bind(this),v=this.skipEG.bind(this),y=this.skipUEG.bind(this),E=this.skipScalingList.bind(this);if(d(),e=d(),t=m(5),_(3),r=d(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){let e=p();if(3===e&&_(1),y(),y(),_(1),g())for(o=3!==e?8:12,l=0;l<o;l++)g()&&E(l<6?16:64)}y();let T=p();if(0===T)p();else if(1===T)for(_(1),v(),v(),i=p(),l=0;l<i;l++)v();y(),_(1),n=p(),s=p(),a=m(1),0===a&&_(1),_(1),g()&&(u=p(),h=p(),f=p(),c=p());let S=[1,1];if(g()&&g())switch(d()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*u-2*h),height:(2-a)*(s+1)*16-(a?2:4)*(f+c),pixelRatio:S}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}},6291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utf8ArrayToStr=void 0;const i=r(6696);class n{static isHeader(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}static isFooter(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}static getID3Data(e,t){const r=t;let i=0;for(;n.isHeader(e,t);)i+=10,i+=n._readSize(e,t+6),n.isFooter(e,t+10)&&(i+=10),t+=i;if(i>0)return e.subarray(r,r+i)}static _readSize(e,t){let r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3],r}static getTimeStamp(e){const t=n.getID3Frames(e);for(let e=0;e<t.length;e++){const r=t[e];if(n.isTimeStampFrame(r))return n._readTimeStamp(r)}}static isTimeStampFrame(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}static _getFrameData(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),r=n._readSize(e,4);return{type:t,size:r,data:e.subarray(10,10+r)}}static getID3Frames(e){let t=0;const r=[];for(;n.isHeader(e,t);){const i=n._readSize(e,t+6);t+=10;const s=t+i;for(;t+8<s;){const i=n._getFrameData(e.subarray(t)),s=n._decodeFrame(i);s&&r.push(s),t+=i.size+10}n.isFooter(e,t)&&(t+=10)}return r}static _decodeFrame(e){return"PRIV"===e.type?n._decodePrivFrame(e):"T"===e.type[0]?n._decodeTextFrame(e):"W"===e.type[0]?n._decodeURLFrame(e):void 0}static _readTimeStamp(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),r=1&t[3];let i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}}static _decodePrivFrame(e){if(e.size<2)return;const t=n._utf8ArrayToStr(e.data,!0),r=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:r.buffer}}static _decodeTextFrame(e){if(!(e.size<2)){if("TXXX"===e.type){let t=1;const r=n._utf8ArrayToStr(e.data.subarray(t),!0);t+=r.length+1;const i=n._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:i}}{const t=n._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:t}}}}static _decodeURLFrame(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const r=n._utf8ArrayToStr(e.data.subarray(t),!0);t+=r.length+1;const i=n._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:r,data:i}}{const t=n._utf8ArrayToStr(e.data);return{key:e.type,data:t}}}static _utf8ArrayToStr(e,t=!1){const r=a();if(r){const i=r.decode(e);if(t){const e=i.indexOf("\0");return-1!==e?i.substring(0,e):i}return i.replace(/\0/g,"")}const i=e.length;let n,s,o,l="",u=0;for(;u<i;){if(n=e[u++],0===n&&t)return l;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(n);break;case 12:case 13:s=e[u++],l+=String.fromCharCode((31&n)<<6|63&s);break;case 14:s=e[u++],o=e[u++],l+=String.fromCharCode((15&n)<<12|(63&s)<<6|(63&o)<<0)}}return l}}let s;function a(){const e=(0,i.getSelfScope)();return s||void 0===e.TextDecoder||(s=new e.TextDecoder("utf-8")),s}const o=n._utf8ArrayToStr;t.utf8ArrayToStr=o,t.default=n},7168:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(6291)),s=i(r(790));t.default=class{constructor(e,t,r){this.observer=e,this.config=r,this.remuxer=t}resetInitSegment(e,t,r,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}}resetTimeStamp(){}static probe(e){let t,r,i=n.default.getID3Data(e,0);if(i&&void 0!==n.default.getTimeStamp(i))for(t=i.length,r=Math.min(e.length-1,t+100);t<r;t++)if(s.default.probe(e,t))return!0;return!1}append(e,t,r,i){let a=n.default.getID3Data(e,0)||[],o=n.default.getTimeStamp(a),l=void 0!==o?90*o:9e4*t,u=a.length,h=e.length,f=0,c=0,d=this._audioTrack,m=[{pts:l,dts:l,data:a}];for(;u<h;)if(s.default.isHeader(e,u)){let t=s.default.appendFrame(d,e,u,l,f);if(!t)break;u+=t.length,c=t.sample.pts,f++}else n.default.isHeader(e,u)?(a=n.default.getID3Data(e,u),m.push({pts:c,dts:c,data:a}),u+=a.length):u++;this.remuxer.remux(d,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,r,i)}destroy(){}}},1919:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(6479)),s=Math.pow(2,32)-1;class a{constructor(e,t){this.observer=e,this.remuxer=t}resetTimeStamp(e){this.initPTS=e}resetInitSegment(e,t,r,i){if(e&&e.byteLength){const s=this.initData=a.parseInitSegment(e);null==t&&(t="mp4a.40.5"),null==r&&(r="avc1.42e01e");const o={};s.audio&&s.video?o.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:i?e:null}:(s.audio&&(o.audio={container:"audio/mp4",codec:t,initSegment:i?e:null}),s.video&&(o.video={container:"video/mp4",codec:r,initSegment:i?e:null})),this.observer.trigger(n.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else t&&(this.audioCodec=t),r&&(this.videoCodec=r)}static probe(e){return a.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0}static bin2str(e){return String.fromCharCode.apply(null,e)}static readUint16(e,t){e.data&&(t+=e.start,e=e.data);const r=e[t]<<8|e[t+1];return r<0?65536+r:r}static readUint32(e,t){e.data&&(t+=e.start,e=e.data);const r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r}static writeUint32(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}static findBox(e,t){let r,i,n,s,o,l,u,h=[];if(e.data?(l=e.start,s=e.end,e=e.data):(l=0,s=e.byteLength),!t.length)return null;for(r=l;r<s;)i=a.readUint32(e,r),n=a.bin2str(e.subarray(r+4,r+8)),u=i>1?r+i:s,n===t[0]&&(1===t.length?h.push({data:e,start:r+8,end:u}):(o=a.findBox({data:e,start:r+8,end:u},t.slice(1)),o.length&&(h=h.concat(o)))),r=u;return h}static parseSegmentIndex(e){const t=a.findBox(e,["moov"])[0],r=t?t.end:null;let i,n=0,s=a.findBox(e,["sidx"]);if(!s||!s[0])return null;i=[],s=s[0];const o=s.data[0];n=0===o?8:16;const l=a.readUint32(s,n);n+=4,n+=0===o?8:16,n+=2;let u=s.end+0;const h=a.readUint16(s,n);n+=2;for(let e=0;e<h;e++){let e=n;const t=a.readUint32(s,e);e+=4;const r=2147483647&t;if(1==(2147483648&t)>>>31)return;const o=a.readUint32(s,e);e+=4,i.push({referenceSize:r,subsegmentDuration:o,info:{duration:o/l,start:u,end:u+r-1}}),u+=r,e+=4,n=e}return{earliestPresentationTime:0,timescale:l,version:o,referencesCount:h,references:i,moovEndOffset:r}}static parseInitSegment(e){let t=[];return a.findBox(e,["moov","trak"]).forEach((e=>{const r=a.findBox(e,["tkhd"])[0];if(r){let i=r.data[r.start],n=0===i?12:20,s=a.readUint32(r,n);const o=a.findBox(e,["mdia","mdhd"])[0];if(o){i=o.data[o.start],n=0===i?12:20;const r=a.readUint32(o,n),l=a.findBox(e,["mdia","hdlr"])[0];if(l){let i={soun:"audio",vide:"video"}[a.bin2str(l.data.subarray(l.start+8,l.start+12))];if(i){let n=a.findBox(e,["mdia","minf","stbl","stsd"]);n.length&&(n=n[0],a.bin2str(n.data.subarray(n.start+12,n.start+16))),t[s]={timescale:r,type:i},t[i]={timescale:r,id:s}}}}}})),t}static getStartDTS(e,t){let r,i,n;return r=a.findBox(t,["moof","traf"]),i=[].concat.apply([],r.map((function(t){return a.findBox(t,["tfhd"]).map((function(r){let i,n,s;return i=a.readUint32(r,4),n=e[i].timescale||9e4,s=a.findBox(t,["tfdt"]).map((function(e){let t,r;return t=e.data[e.start],r=a.readUint32(e,4),1===t&&(r*=Math.pow(2,32),r+=a.readUint32(e,8)),r}))[0],s/n}))}))),n=Math.min.apply(null,i),isFinite(n)?n:0}static offsetStartDTS(e,t,r){a.findBox(t,["moof","traf"]).map((function(t){return a.findBox(t,["tfhd"]).map((function(i){let n=a.readUint32(i,4),o=e[n].timescale||9e4;a.findBox(t,["tfdt"]).map((function(e){let t=e.data[e.start],i=a.readUint32(e,4);if(0===t)a.writeUint32(e,4,i-r*o);else{i*=Math.pow(2,32),i+=a.readUint32(e,8),i-=r*o,i=Math.max(i,0);const t=Math.floor(i/(s+1)),n=Math.floor(i%(s+1));a.writeUint32(e,4,t),a.writeUint32(e,8,n)}}))}))}))}append(e,t,r,i){let n=this.initData;n||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),n=this.initData);let s,o=this.initPTS;if(void 0===o){let r=a.getStartDTS(n,e);this.initPTS=o=r-t}a.offsetStartDTS(n,e,o),s=a.getStartDTS(n,e),this.remuxer.remux(n.audio,n.video,null,null,s,r,i,e)}destroy(){}}t.default=a},790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=navigator.userAgent.match(/Chrome\/(\d+)/i);const i=r&&parseInt(r[1])<=87,n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,i,n){if(r+24>t.length)return;let s=this.parseHeader(t,r);if(s&&r+s.frameLength<=t.length){let a=i+n*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:t.subarray(r,r+s.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=s.channelCount,e.samplerate=s.sampleRate,e.samples.push(o),{sample:o,length:s.frameLength}}},parseHeader:function(e,t){let r=e[t+1]>>3&3,s=e[t+1]>>1&3,a=e[t+2]>>4&15,o=e[t+2]>>2&3,l=e[t+2]>>1&1,u=e[t+3]>>6;if(1!==r&&0!==a&&15!==a&&3!==o){let h=3===r?3-s:3===s?3:4,f=1e3*n.BitratesMap[14*h+a-1],c=3===r?0:2===r?1:2,d=n.SamplingRateMap[3*c+o],m=3===u?1:2,p=n.SamplesCoefficients[r][s],g=n.BytesInSlot[s],_=8*p*g,v=parseInt(p*f/d+l,10)*g;return i&&2===s&&f>=224e3&&0===u&&(e[t+3]=128|e[t+3]),{sampleRate:d,channelCount:m,frameLength:v,samplesPerFrame:_}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){let r=4,i=this.parseHeader(e,t),n=r;i&&i.frameLength&&(n=i.frameLength);let s=t+n;if(s===e.length||s+1<e.length&&this.isHeaderPattern(e,s))return!0}return!1}};t.default=n},8362:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(997)),l=a(r(790)),u=a(r(6479)),h=a(r(4023)),f=r(3895),c=r(6291),d={video:1,audio:2,id3:3,text:4};class m{constructor(e,t,r,i){this.observer=e,this.config=r,this.typeSupported=i,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}static probe(e){return!(m._syncOffset(e)<0)}static _syncOffset(e){const t=Math.min(1e3,e.length-564);let r=0;for(;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:d[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=m.createTrack("video",i),this._audioTrack=m.createTrack("audio",i),this._id3Track=m.createTrack("id3",i),this._txtTrack=m.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=i}resetTimeStamp(){}append(e,t,r,i){let n,s,a,o,l,h,c=e.length,d=!1;this.pmtUnknownTypes={},this.contiguous=r;let p=this.pmtParsed,g=this._avcTrack,_=this._audioTrack,v=this._id3Track,y=g.pid,E=_.pid,T=v.pid,S=this._pmtId,b=g.pesData,A=_.pesData,R=v.pesData,w=this._parsePAT,I=this._parsePMT.bind(this),F=this._parsePES,L=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),P=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this);const D=m._syncOffset(e);for(c-=(c+D)%188,n=D;n<c;n+=188)if(71===e[n]){if(s=!!(64&e[n+1]),a=((31&e[n+1])<<8)+e[n+2],o=(48&e[n+3])>>4,o>1){if(l=n+5+e[n+4],l===n+188)continue}else l=n+4;switch(a){case y:s&&(b&&(h=F(b))&&L(h,!1),b={data:[],size:0}),b&&(b.data.push(e.subarray(l,n+188)),b.size+=n+188-l);break;case E:s&&(A&&(h=F(A))&&(_.isAAC?C(h):P(h)),A={data:[],size:0}),A&&(A.data.push(e.subarray(l,n+188)),A.size+=n+188-l);break;case T:s&&(R&&(h=F(R))&&O(h),R={data:[],size:0}),R&&(R.data.push(e.subarray(l,n+188)),R.size+=n+188-l);break;case 0:s&&(l+=e[l]+1),S=this._pmtId=w(e,l);break;case S:s&&(l+=e[l]+1);let t=I(e,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);y=t.avc,y>0&&(g.pid=y),E=t.audio,E>0&&(_.pid=E,_.isAAC=t.isAAC),T=t.id3,T>0&&(v.pid=T),d&&!p&&(d=!1,n=D-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(u.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(h=F(b))?(L(h,!0),g.pesData=null):g.pesData=b,A&&(h=F(A))?(_.isAAC?C(h):P(h),_.pesData=null):_.pesData=A,R&&(h=F(R))?(O(h),v.pesData=null):v.pesData=R,null==this.sampleAes?this.remuxer.remux(_,g,v,this._txtTrack,t,r,i):this.decryptAndRemux(_,g,v,this._txtTrack,t,r,i)}decryptAndRemux(e,t,r,i,n,s,a){if(e.samples&&e.isAAC){let o=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){o.decryptAndRemuxAvc(e,t,r,i,n,s,a)}))}else this.decryptAndRemuxAvc(e,t,r,i,n,s,a)}decryptAndRemuxAvc(e,t,r,i,n,s,a){if(t.samples){let o=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){o.remuxer.remux(e,t,r,i,n,s,a)}))}else this.remuxer.remux(e,t,r,i,n,s,a)}destroy(){this._initPTS=this._initDTS=void 0,this._duration=0}_parsePAT(e,t){return(31&e[t+10])<<8|e[t+11]}_trackUnknownPmt(e){const t=this.pmtUnknownTypes[e]||0;return 0===t&&(this.pmtUnknownTypes[e]=0),this.pmtUnknownTypes[e]++,t}_parsePMT(e,t,r,i){let n,s,a,o,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=(15&e[t+1])<<8|e[t+2],s=t+3+n-4,a=(15&e[t+10])<<8|e[t+11],t+=12+a;t<s;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){this._trackUnknownPmt(e[t]);break}case 15:-1===l.audio&&(l.audio=o);break;case 21:-1===l.id3&&(l.id3=o);break;case 219:if(!i){this._trackUnknownPmt(e[t]);break}case 27:-1===l.avc&&(l.avc=o);break;case 3:case 4:r?-1===l.audio&&(l.audio=o,l.isAAC=!1):this._trackUnknownPmt(e[t]);break;default:this._trackUnknownPmt(e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return l}_parsePES(e){let t,r,i,n,s,a,o,l,u,h=0,f=e.data;if(!e||0===e.size)return null;for(;f[0].length<19&&f.length>1;){let e=new Uint8Array(f[0].length+f[1].length);e.set(f[0]),e.set(f[1],f[0].length),f[0]=e,f.splice(1,1)}if(t=f[0],i=(t[0]<<16)+(t[1]<<8)+t[2],1===i){if(n=(t[4]<<8)+t[5],n&&n>e.size-6)return null;if(r=t[7],192&r&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&r?(l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,o-l>54e5&&(o=l)):l=o),s=t[8],u=s+9,e.size<=u)return null;e.size-=u,a=new Uint8Array(e.size);for(let e=0,r=f.length;e<r;e++){t=f[e];let r=t.byteLength;if(u){if(u>r){u-=r;continue}t=t.subarray(u),r-=u,u=0}a.set(t,h),h+=r}return n&&(n-=s+3),{data:a,pts:o,dts:l,len:n}}return null}pushAccesUnit(e,t){if(e.units.length&&e.frame){const r=t.samples,i=r.length;if(isNaN(e.pts)){if(!i)return void t.dropped++;{const t=r[i-1];e.pts=t.pts,e.dts=t.dts}}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,r.push(e)):t.dropped++}}_parseAVCPES(e,t){let r,i,n,s=this._avcTrack,a=this._parseAVCNALu(e.data),o=this.avcSample,l=!1,u=this.pushAccesUnit.bind(this),f=function(e,t,r,i){return{key:e,pts:t,dts:r,units:[],debug:i}};e.data=null,o&&a.length&&!s.audFound&&(u(o,s),o=this.avcSample=f(!1,e.pts,e.dts,"")),a.forEach((t=>{switch(t.type){case 1:i=!0,o||(o=this.avcSample=f(!0,e.pts,e.dts,"")),o.frame=!0;let g=t.data;if(l&&g.length>4){let e=new h.default(g).readSliceType();2!==e&&4!==e&&7!==e&&9!==e||(o.key=!0)}break;case 5:i=!0,o||(o=this.avcSample=f(!0,e.pts,e.dts,"")),o.key=!0,o.frame=!0;break;case 6:i=!0,r=new h.default(this.discardEPB(t.data)),r.readUByte();for(var a=0,d=0,m=!1,p=0;!m&&r.bytesAvailable>1;){a=0;do{a+=p=r.readUByte()}while(255===p);d=0;do{d+=p=r.readUByte()}while(255===p);if(4===a&&0!==r.bytesAvailable){if(m=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){let t=r.readUByte(),i=31&t,s=[t,r.readUByte()];for(n=0;n<i;n++)s.push(r.readUByte()),s.push(r.readUByte()),s.push(r.readUByte());this._insertSampleInOrder(this._txtTrack.samples,{type:3,pts:e.pts,bytes:s})}}else if(5===a&&0!==r.bytesAvailable){if(m=!0,d>16){const t=[];for(n=0;n<16;n++)t.push(r.readUByte().toString(16)),3!==n&&5!==n&&7!==n&&9!==n||t.push("-");const i=d-16,s=new Uint8Array(i);for(n=0;n<i;n++)s[n]=r.readUByte();this._insertSampleInOrder(this._txtTrack.samples,{pts:e.pts,payloadType:a,uuid:t.join(""),userDataBytes:s,userData:(0,c.utf8ArrayToStr)(s.buffer)})}}else if(d<r.bytesAvailable)for(n=0;n<d;n++)r.readUByte()}break;case 7:if(i=!0,l=!0,!s.sps){r=new h.default(t.data);let e=r.readSPS();s.width=e.width,s.height=e.height,s.pixelRatio=e.pixelRatio,s.sps=[t.data],s.duration=this._duration;let i=t.data.subarray(1,4),a="avc1.";for(n=0;n<3;n++){let e=i[n].toString(16);e.length<2&&(e="0"+e),a+=e}s.codec=a}break;case 8:i=!0,s.pps||(s.pps=[t.data]);break;case 9:i=!1,s.audFound=!0,o&&u(o,s),o=this.avcSample=f(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,o&&(o.debug+="unknown NAL "+t.type+" ")}o&&i&&o.units.push(t)})),t&&o&&(u(o,s),this.avcSample=null)}_insertSampleInOrder(e,t){let r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(let i=r-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)}_getLastNalUnit(){let e,t=this.avcSample;if(!t||0===t.units.length){let e=this._avcTrack.samples;t=e[e.length-1]}if(t){let r=t.units;e=r[r.length-1]}return e}_parseAVCNALu(e){let t,r,i,n,s,a=0,o=e.byteLength,l=this._avcTrack,u=l.naluState||0,h=u,f=[],c=-1;for(-1===u&&(c=0,s=31&e[0],u=0,a=1);a<o;)if(t=e[a++],u)if(1!==u)if(t)if(1===t){if(c>=0)i={data:e.subarray(c,a-u-1),type:s},f.push(i);else{let t=this._getLastNalUnit();if(t&&(h&&a<=4-h&&t.state&&(t.data=t.data.subarray(0,t.data.byteLength-h)),r=a-u-1,r>0)){let i=new Uint8Array(t.data.byteLength+r);i.set(t.data,0),i.set(e.subarray(0,r),t.data.byteLength),t.data=i}}a<o?(n=31&e[a],c=a,s=n,u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(c>=0&&u>=0&&(i={data:e.subarray(c,o),type:s,state:u},f.push(i)),0===f.length){let t=this._getLastNalUnit();if(t){let r=new Uint8Array(t.data.byteLength+e.byteLength);r.set(t.data,0),r.set(e,t.data.byteLength),t.data=r}}return l.naluState=u,f}discardEPB(e){let t,r,i=e.byteLength,n=[],s=1;for(;s<i-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(n.push(s+2),s+=2):s++;if(0===n.length)return e;t=i-n.length,r=new Uint8Array(t);let a=0;for(s=0;s<t;a++,s++)a===n[0]&&(a++,n.shift()),r[s]=e[a];return r}_parseAACPES(e){let t,r,i,n,s,a=this._audioTrack,l=e.data,h=e.pts,c=this.aacOverFlow,d=this.aacLastPTS;if(c){let e=new Uint8Array(c.byteLength+l.byteLength);e.set(c,0),e.set(l,c.byteLength),l=e}for(i=0,s=l.length;i<s-1&&!o.isHeader(l,i);i++);if(i){let e,t;if(i<s-1?(e=`AAC PES did not start with ADTS header,offset:${i}`,t=!1):(e="no ADTS header found in AAC PES",t=!0),this.observer.trigger(u.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:t,reason:e}),t)return}if(o.initTrackConfig(a,this.observer,l,i,this.audioCodec),r=0,t=o.getFrameDuration(a.samplerate),c&&d){let e=d+t;Math.abs(e-h)>1&&(h=e)}for(;i<s;){if(o.isHeader(l,i)){if(i+5<s){const e=o.appendFrame(a,l,i,h,r);if(e){i+=e.length,n=e.sample.pts,r++;continue}}break}i++}c=i<s?l.subarray(i,s):null,this.aacOverFlow=c,this.aacLastPTS=n}_parseMPEGPES(e){let t=e.data,r=t.length,i=0,n=0,s=e.pts;for(;n<r;)if(l.default.isHeader(t,n)){let e=l.default.appendFrame(this._audioTrack,t,n,s,i);if(!e)break;n+=e.length,i++}else n++}_parseID3PES(e){this._id3Track.samples.push(e)}}t.default=m},3895:(e,t)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorDetails=t.ErrorTypes=void 0,(i=t.ErrorTypes||(t.ErrorTypes={})).NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",(r=t.ErrorDetails||(t.ErrorDetails={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_PARSING_ERROR="fragParsingError",r.REMUX_ALLOC_ERROR="remuxAllocError",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.INTERNAL_EXCEPTION="internalException"},9510:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(3895),s=i(r(6479)),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0};t.default=class{constructor(e,...t){this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}destroy(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()}onHandlerDestroying(){}onHandlerDestroyed(){}isEventHandler(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent}registerListeners(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)}unregisterListeners(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)}onEvent(e,t){this.onEventGeneric(e,t)}onEventGeneric(e,t){let r=function(e,t){let r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error(`Event ${e} has no generic handler in this ${this.constructor.name} class (tried ${r})`);return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){this.hls.trigger(s.default.ERROR,{type:n.ErrorTypes.OTHER_ERROR,details:n.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}},6479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",ERROR:"hlsError",DESTROYING:"hlsDestroying",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached",START_LIVE_ON_NOW:"hlsStartLiveOnNow",BUFFER_REMOVE_RANGE:"hlsBufferRemoveRange",BUFFER_REMOVE_ALL:"hlsBufferRemoveAll",POSITION_SWITCHING:"hlsPositionSwitching",CHANNEL_SWITCHING:"hlsChannelSwitching",CHANNEL_CONTINUING:"hlsChannelContinuing",GOP_LEVEL_SWITCHING:"hlsGopLevelSwitching",TIMESLICE_FRAG_LOADED:"hlsTimesliceFragLoaded",TIMESLICE_FRAG_APPENDED:"hlsTimesliceFragAppended",TIMESLICE_INIT_SEG_APPENDED:"hlsTimesliceInitSegAppended",TIMESLICE_EMSG_PARSED:"hlsTimesliceEmsgParsed",TIMEMACHINE_FRAG_LOADED:"hlsTimemachineFragLoaded",TIMEMACHINE_EMSG_PARSED:"hlsTimemachineEmsgParsed",FRAME_FRAG_LOADED:"hlsFrameFragLoaded",FRAME_META_LOADED:"hlsFrameMetaLoaded",FRAME_SWITCHING:"hlsFrameSwitching",FRAME_INTERACTIVE:"hlsFrameInteractive",BUFFER_FRAME_APPENDING:"hlsBufferFrameAppending",RESET_VIDEO_STATE:"hlsResetVideoState",MEDIA_LIVE_ON:"hlsMediaLiveOn",MEDIA_LIVE_OFF:"hlsMediaLiveOff",MEDIA_PAUSE:"hlsMediaPause",FRAG_SEEKED:"hlsFragSeeked"}},9635:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(9945)),l=r(3895),u=a(r(7703)),h=a(r(6853)),f=r(2266),c=a(r(4051)),d=a(r(4454)),m=r(3259),p=r(2862),g=a(r(6479)),_=r(1659);class v extends _.Observer{constructor(e={}){super(),this.media=null,this.url=null,this.channelList=[],this._isMobile=!1;const t=v.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");this.config=Object.assign(Object.assign({},t),e);const{config:r}=this;if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(void 0===r.liveSyncDuration||r.liveMaxLatencyDuration<=r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');this._autoLevelCapping=-1;const i=this.abrController=new r.abrController(this),n=this.bufferController=new r.bufferController(this),s=this.capLevelController=new r.capLevelController(this),a=new u.default(this),o=new h.default(this),l=this.levelController=new d.default(this),m=new f.FragmentTracker(this);let p=[l,this.streamController=new c.default(this,m)],g=r.audioStreamController;g&&p.push(new g(this,m)),this.networkControllers=p;const _=[a,o,i,n,s,m];if(g=r.audioTrackController,g){const e=new g(this);this.audioTrackController=e,_.push(e)}this.coreComponents=_}static isSupported(){return(0,m.isSupported)()}static get Events(){return g.default}static get ErrorTypes(){return l.ErrorTypes}static get ErrorDetails(){return l.ErrorDetails}static get DefaultConfig(){return v.defaultConfig?v.defaultConfig:p.hlsDefaultConfig}static set DefaultConfig(e){v.defaultConfig=e}destroy(){this.trigger(g.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((e=>{e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1}attachMedia(e){this.media=e,this.trigger(g.default.MEDIA_ATTACHING,{media:e})}detachMedia(){this.trigger(g.default.MEDIA_DETACHING),this.media=null}loadSource(e,t){this.stopLoad();const r=this.media;r&&this.url&&(this.detachMedia(),this.attachMedia(r)),t=o.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),this.url=t,this.trigger(g.default.MANIFEST_LOADING,{fixedurl:e,url:t})}startLoad(e=-1){this.networkControllers.forEach((t=>{t.startLoad(e)}))}stopLoad(){this.networkControllers.forEach((e=>{e.stopLoad()}))}levelStartLoad(){this.levelController.startLoad()}recoverMediaError(){let e=this.media;this.detachMedia(),e&&this.attachMedia(e)}switchingGOP(e){this.streamController._switchingGOP(e)}removeLevel(e,t=0){this.levelController.removeLevel(e,t)}removeLastBufferedFragment(){this.streamController.removeLastBufferedFragment()}removeLastBufferedFrame(){this.streamController.removeLastBufferedFrame()}removeAllFragments(){this.streamController.removeAllFragments()}removeAllFrames(){this.streamController.removeAllFrames()}removeBufferAll(){this.bufferController.removeBufferAll()}removeBufferAllForTimeslice(e){this.bufferController.removeBufferAllForTimeslice(e)}removeBufferAllForTimemachine(){this.bufferController.removeBufferAllForTimemachine()}removeBufferStartToAll(e,t){this.bufferController.removeBufferStartToAll(e,t)}startLoadLiveLevel(){this.levelController.startLoad()}stopLoadLiveLevel(){this.levelController.clearTimer()}switchChannel(e,t,r,i){this.trigger(g.default.CHANNEL_SWITCHING,{startChannel:e,channelDirection:t,isPlaying:r,channelSwitchRequestedTimestamp:i})}switchPosition(e){this.trigger(g.default.POSITION_SWITCHING,e)}switchFrame(e,t,r,i){this.trigger(g.default.FRAME_SWITCHING,{frameCount:e,startFrame:t,frameDirection:r,isPlaying:i})}doInteractive(e){this.trigger(g.default.FRAME_INTERACTIVE,e)}continueChannel(e){this.trigger(g.default.CHANNEL_CONTINUING,{channelDirection:e})}originChannel(e){let t=1;return this.currentChannelList.forEach((r=>{r.forEach((r=>{r.channelNumber===e&&(t=r.channelNumber)}))})),t.toString()}get videoType(){return this._videoType}set videoType(e){this._videoType=e}get levels(){return this.levelController.levels}get currentLevel(){return this.levelController.level}set currentLevel(e){this.loadLevel=e,this.streamController.immediateLevelSwitch()}get currentLevelHeight(){return this.levelController.levelHeight}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.levelController.firstLevel=e}get startLevel(){return this.levelController.startLevel}set startLevel(e){-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}set autoLevelCapping(e){this._autoLevelCapping=e}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this,r=e?e.length:0;for(let i=0;i<r;i++)if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t}=this;let r;return r=-1===t&&e&&e.length?e.length-1:t,r}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}set state(e){this.streamController.state=e}get state(){return this.streamController.state}get isLive(){return this.streamController.isLive}get liveStartSeq(){return this.streamController.liveStartSeq}get liveIsNow(){return this.streamController.liveIsNow}set liveIsNow(e){this.streamController.liveIsNow=e}get liveEndSeq(){return this.streamController.liveEndSeq}set liveEndSeq(e){this.streamController.liveEndSeq=e}get totalDuration(){return this.streamController.totalDuration}get currentTime(){return this.streamController.currentTime}set currentTime(e){this.streamController.currentTime=e}get totalFrame(){return this.streamController.totalFrame}set totalFrame(e){this.streamController.totalFrame=e}set playbackChannel(e){this.streamController.playbackChannel=e}get playbackChannel(){return this.streamController.playbackChannel}set addInitFrameSegment(e){this.streamController.addInitFrameSegment=e}set pausedBufferFrame(e){this.streamController.pausedBufferFrame=e}get pausedBufferFrame(){return this.streamController.pausedBufferFrame}get lastBufferedFrame(){return this.streamController.lastBufferedFrame}set videoIsPlaying(e){this.streamController.videoIsPlaying=e}get videoIsPlaying(){return this.streamController.videoIsPlaying}set videoIsPause(e){this.streamController.videoIsPause=e}get videoIsPause(){return this.streamController.videoIsPause}set frameIsPlaying(e){this.streamController.frameIsPlaying=e}get frameIsPlaying(){return this.streamController.frameIsPlaying}set playlistDownload(e){this.streamController.playlistDownload=e}set seekStartPosition(e){this.streamController.seekStartPosition=e}get seekStartPosition(){return this.streamController.seekStartPosition}get useMediaStorage(){return this.streamController.useMediaStorage}set useMediaStorage(e){this.streamController.useMediaStorage=e}get startLiveOnNow(){return this.streamController.startLiveOnNow}set startLiveOnNow(e){this.streamController.startLiveOnNow=e}get currentGOP(){return this.streamController._currentGop}set currentGOP(e){this.streamController._currentGop=e}get currentChannelList(){return this.channelList}set currentChannelList(e){this.channelList=e}get isMobile(){return this._isMobile}set isMobile(e){this._isMobile=e}get mobileCurrentTime(){return this.streamController.mobileCurrentTime}set mobileCurrentTime(e){this.streamController.mobileCurrentTime=e}}t.default=v},3259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupported=void 0;const i=r(103);t.isSupported=function(){const e=(0,i.getMediaSource)();if(!e)return!1;const t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}},8370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(5953);function n(e,t,r){let i=[],n=0,s=0;try{for(;t+n<=r;){{let r=e.getUint8(t+n);if(0!==r)0===s&&(s=n),i.push(r);else if(s>0)break}n++}}catch(e){}return{id:n,message:String.fromCharCode.apply(null,i)}}t.default=class{static parseSegment(e){const t=new DataView(e),s=new Uint8Array(e),a=(0,i.findBox)(s,["emsg"]),o=[],l=(0,i.findBox)(s,["mdat"]);window.global=window,window.Buffer=window.Buffer||r(8764).lW;let u=0;return a&&a.length>0?(a.forEach(((e,r)=>{let i=n(t,e.start,e.end),s=n(t,e.start+i.id,e.end),a=16+(i.message.length+1)+(s.message.length+1);const l=e.start+a,h=e.data.subarray(l,e.end),f=[];if(h&&2160===h.length){let e=0;for(let t=0;t<9;t++){const r=h.slice(e,8*(t+1)*30);f.push(r),e+=240}f&&f.forEach(((e,t)=>{const r=[];u=window.performance.now();let i=0;for(let t=0;t<30;t++){const n=e.slice(i,8*(t+1)),s=n.slice(0,4),a=n.slice(4);let o=window.Buffer.from(s),l=window.Buffer.from(a),u={id:t+1,offset:o.readUIntBE(0,s.length),size:l.readUIntBE(0,a.length)};r.push({frameId:t+1,data:n,messages:u}),i+=8}u=window.performance.now()-u,o.push({segmentId:t,orginData:e,messages:r,timestamp:u})}))}})),l&&l.length>0&&l.forEach(((e,r)=>{let i=n(t,e.start,e.end),s=n(t,e.start+i.id,e.end);console.log(i),console.log(s)}))):console.log("Emsg is null"),o}static parseFrame(e){const t=new DataView(e),s=new Uint8Array(e),a=(0,i.findBox)(s,["emsg"]),o=[];window.global=window,window.Buffer=window.Buffer||r(8764).lW;let l=0;return a&&a.length>0?a.forEach(((e,r)=>{l=window.performance.now();let i=n(t,e.start,e.end),s=n(t,e.start+i.id,e.end);i.message.length,s.message.length;const a=e.start+49,u=e.data.subarray(a,e.end),h=[];if(u){let t=1;for(let r=0;r<u.length;r+=8){const i=e.data.subarray(a+r,a+r+4),n=e.data.subarray(a+r+4,a+r+8);let s=window.Buffer.from(i),o=window.Buffer.from(n),l={id:t,offset:s.readUIntBE(0,i.length),size:o.readUIntBE(0,n.length)};h.push(l),t++}}h.length,l=window.performance.now()-l,o.push({frameId:r,data:u,messages:h,timestamp:l})})):console.log("Loaded EmsgBox is Null."),o}}},6853:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6479)),a=n(r(9510)),o=r(3895);class l extends a.default{constructor(e){super(e,s.default.FRAG_LOADING),this.onFragLoading=e=>i(this,void 0,void 0,(function*(){const t=e.frag,r=e.type;if(t){const e=t.type,i=this.loaders,n=this.hls.config,s=n.fLoader,a=n.loader;t.loaded=0;let o,l,u,h=i[e];h&&h.abort(),h=i[e]=t.loader=n.fLoader?new s(n):new a(n),o={url:t.url,frag:t,type:r,responseType:"arraybuffer",progressData:!1};let f=t.byteRangeStartOffset,c=t.byteRangeEndOffset;Number.isFinite(f)&&Number.isFinite(c)&&(o.rangeStart=f,o.rangeEnd=c),l={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(o,l,u)}else console.log("onFragLoading: Invalid Fragment")})),this.loadsuccess=(e,t,r,n=null)=>i(this,void 0,void 0,(function*(){let i=e.data,a=r.frag,o=r.type;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(s.default.FRAG_LOADED,{payload:i,frag:a,fragType:o,stats:t,networkDetails:n})})),this.loaderror=(e,t,r=null)=>i(this,void 0,void 0,(function*(){const i=t.frag;let n=i.loader;n&&n.abort(),this.loaders[i.type]=void 0,this.hls.trigger(s.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})})),this.loadtimeout=(e,t,r=null)=>i(this,void 0,void 0,(function*(){const e=t.frag;let i=e.loader;i&&i.abort(),this.loaders[e.type]=void 0,this.hls.trigger(s.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})})),this.loadprogress=(e,t,r,n=null)=>i(this,void 0,void 0,(function*(){let r=t.frag;r.loaded=e.loaded,this.hls.trigger(s.default.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:n})})),this.loaders={}}destroy(){let e=this.loaders;for(let t in e){let r=e[t];r&&r.destroy()}this.loaders={},super.destroy()}}t.default=l},8790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementaryStreamTypes=void 0;const i=r(9945);var n;!function(e){e.AUDIO="audio",e.VIDEO="video"}(n=t.ElementaryStreamTypes||(t.ElementaryStreamTypes={})),t.default=class{constructor(){this._url=null,this._frameurl=null,this._byteRange=null,this._elementaryStreams={[n.AUDIO]:!1,[n.VIDEO]:!1},this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.sn=0,this.timeOffset=0,this.urlId=0,this.level=0,this.position=0}setByteRange(e,t){const r=e.split("@",2),i=[];1===r.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(r[0]),i[1]=i[0]+parseInt(r[1]),this._byteRange=i}get url(){return this.originurl?this._url=this.originurl:!this._url&&this.fileName&&(this._url=(0,i.buildAbsoluteURL)(this.baseurl,this.fileName,{alwaysNormalize:!0})),this._url}set url(e){this._url=e}get frameurl(){if(this.originurl)this._frameurl=this.originurl;else if(!this._frameurl&&this._url&&this.channelName&&this.levelName&&this.fileName){let e=this.channelName+"/"+this.levelName+"/"+this.fileName;this._frameurl=(0,i.buildAbsoluteURL)(this._url,e,{alwaysNormalize:!0})}return this._frameurl||""}set frameurl(e){this._frameurl=e}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get decryptdata(){return null}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!Number.isFinite(this.programDateTime))return null;let e=Number.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){return!!this.decryptdata}addElementaryStream(e){this._elementaryStreams[e]=!0}hasElementaryStream(e){return!0===this._elementaryStreams[e]}}},467:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6479)),a=n(r(9510)),o=r(5542),l=r(3895);class u extends a.default{constructor(e){super(e),this.loadFrame=e=>i(this,void 0,void 0,(function*(){const t=e.frag,r=this.hls.config,i=r.loader;let n,s,a,l,u;switch(t.loaded=0,this.loader&&this.loader.abort(),this.loader=t.loader=new i(r),e.type){case o.FrameType.SEEK:case o.FrameType.CONTINUE:n={type:e.type,url:t.frameurl,frag:t,responseType:"arraybuffer",progressData:!1,gop:e.gop,height:e.height,index:e.index||0};break;case o.FrameType.TIMESLICE:case o.FrameType.TIMEMACHINE:n={type:e.type,url:t.frameurl,frag:t,responseType:"arraybuffer",progressData:!1,gop:e.gop,height:e.height,index:e.index||0,direction:e.direction}}l=t.byteRangeStartOffset,u=t.byteRangeEndOffset,Number.isFinite(l)&&Number.isFinite(u)&&(n.rangeStart=l,n.rangeEnd=u),s={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},a={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},console.log("frag.frameurl: ",t.frameurl),this.loader.load(n,s,a)})),this.loadsuccess=(e,t,r,n=null)=>i(this,void 0,void 0,(function*(){console.log("frame-loader loadsuccess");let i=e.data,a=r.type;r.frag.loader=void 0,this.loader=void 0,console.log(i);const l={payload:i,context:r,stats:t,networkDetails:n};switch(a){case o.FrameType.TIMESLICE:this.hls.trigger(s.default.TIMESLICE_FRAG_LOADED,l);break;case o.FrameType.TIMEMACHINE:this.hls.trigger(s.default.TIMEMACHINE_FRAG_LOADED,l);break;case o.FrameType.CONTINUE:case o.FrameType.SEEK:this.hls.trigger(s.default.FRAME_FRAG_LOADED,l)}})),this.loaderror=(e,t,r=null)=>i(this,void 0,void 0,(function*(){let i=t.frag.loader;i&&i.abort(),this.loader=void 0,this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})})),this.loadtimeout=(e,t,r=null)=>i(this,void 0,void 0,(function*(){let e=t.frag.loader;e&&e.abort(),this.loader=void 0,this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})})),this.loader=void 0}destroy(){this.loader.destory(),super.destroy()}}t.default=u},7715:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6479)),a=n(r(9510)),o=r(3895);class l extends a.default{constructor(e){super(e),this.onFrameMetaLoading=e=>i(this,void 0,void 0,(function*(){const t=this.hls.config,r=t.loader;let i,n,s;this.loader&&this.loader.abort(),this.loader=new r(t),i={url:e.url,channelNumber:e.channelNumber,responseType:"json"},n={timeout:t.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:t.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},this.loader.load(i,n,s)})),this.loadsuccess=(e,t,r,n=null)=>i(this,void 0,void 0,(function*(){let i=e.data;this.loader=void 0,this.hls.trigger(s.default.FRAME_META_LOADED,{payload:i,context:r,stats:t,networkDetails:n})})),this.loaderror=(e,t,r=null)=>i(this,void 0,void 0,(function*(){let i=t.loader;i&&i.abort(),this.loader=void 0,this.hls.trigger(s.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})})),this.loader=void 0}loadtimeout(e,t,r=null){let i=t.loader;i&&i.abort(),this.loader=void 0,this.hls.trigger(s.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})}destroy(){this.loader.destory(),super.destroy()}}t.default=l},7288:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.initFrameSegment=null,this.live=!0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null,this.averagetargetduration=0}get hasProgramDateTime(){return!(!this.fragments[0]||!Number.isFinite(this.fragments[0].programDateTime))}}},8750:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(9945)),l=s(r(6486)),u=a(r(8790)),h=a(r(7288)),f=a(r(5735)),c=r(8540),d=r(8158),m=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,p=/#EXT-X-I-FRAME-STREAM-INF:([^\r\n]*)/g,g=/#EXT-X-MEDIA:(.*)/g,_=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,v=/\.(mp4|m4s|m4v|m4a)$/i,y=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g");function E(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null==t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Number.isFinite(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function T(e){let t=e.split("/"),r="";for(let e=0;e<t.length-3;e++)r+=t[e]+"/";return r}class S{static findGroup(e,t){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===t)return i}}static convertAVC1ToAVCOTI(e){let t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}static resolve(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static parseMasterPlaylist(e,t,r){let i,n=[],s={},a=!1;function o(e,t){["video","audio"].forEach((r=>{const i=e.filter((e=>(0,c.isCodecType)(e,r)));if(i.length){const n=i.filter((e=>0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)));t[`${r}Codec`]=n.length>0?n[0]:i[0],e=e.filter((e=>-1===i.indexOf(e)))}})),t.unknownCodecs=e}for(m.lastIndex=0;null!=(i=m.exec(e));)if(i[1]){const e={},s=e.attrs=new f.default(i[1]);e.url=S.resolve(i[2],t),e.fixedurl=r;const a=s.decimalResolution("RESOLUTION");a&&(e.width=a.width,e.height=a.height,s.NAME&&""!==s.NAME?e.name=s.NAME:e.name=a.height.toString()),e.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o([].concat((s.CODECS||"").split(/[ ,]+/)),e),e.videoCodec&&-1!==e.videoCodec.indexOf("avc1")&&(e.videoCodec=S.convertAVC1ToAVCOTI(e.videoCodec)),n.push(e)}else if(i[3]){let e=new f.default(i[3]);e["DATA-ID"]&&(a=!0,s[e["DATA-ID"]]=e)}return{levels:n,sessionData:a?s:null}}static parseMasterFramePlaylist(e,t,r){let i,n=[],s={};function a(e,t){["video","audio"].forEach((r=>{const i=e.filter((e=>(0,c.isCodecType)(e,r)));if(i.length){const n=i.filter((e=>0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)));t[`${r}Codec`]=n.length>0?n[0]:i[0],e=e.filter((e=>-1===i.indexOf(e)))}})),t.unknownCodecs=e}for(p.lastIndex=0;null!=(i=p.exec(e));)if(i[1]){const e={},s=e.attrs=new f.default(i[1]);e.url=S.resolve(s.URI,t),e.baseUrl=r;const o=s.decimalResolution("RESOLUTION");o&&(e.width=o.width,e.height=o.height,s.NAME&&""!==s.NAME?e.name=s.NAME:e.name=o.height.toString()),e.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),a([].concat((s.CODECS||"").split(/[ ,]+/)),e),e.videoCodec&&-1!==e.videoCodec.indexOf("avc1")&&(e.videoCodec=S.convertAVC1ToAVCOTI(e.videoCodec)),n.push(e)}else if(i[3]){let e=new f.default(i[3]);e["DATA-ID"]&&(s[e["DATA-ID"]]=e)}return{frameLevels:n}}static parseMasterPlaylistMedia(e,t,r,i=[]){let n,s=[],a=0;for(g.lastIndex=0;null!==(n=g.exec(e));){const e=new f.default(n[1]);if(e.TYPE===r){const n={attrs:e,id:a++,groupId:e["GROUP-ID"],instreamId:e["INSTREAM-ID"],name:e.NAME||e.LANGUAGE,type:r,default:"YES"===e.DEFAULT,autoselect:"YES"===e.AUTOSELECT,forced:"YES"===e.FORCED,lang:e.LANGUAGE};if(e.URI&&(n.url=S.resolve(e.URI,t)),i.length){const e=S.findGroup(i,n.groupId);n.audioCodec=e?e.codec:i[0].codec}s.push(n)}}return s}static parseLevelPlaylist(e,t,r,i,n,s,a,o,c){let m,p,g=0,S=0,b=new h.default(t),A=0,R=null,w=new u.default,I=null;for(y.lastIndex=0;null!==(m=y.exec(e));){const e=m[1];if(e){w.duration=parseFloat(e);const t=(" "+m[2]).slice(1);w.title=t||null,w.tagList.push(t?["INF",e,t]:["INF",e])}else if(m[3]){if(Number.isFinite(w.duration)){const e=g++;if(w.type=i,w.start=S,w.end=w.start+w.duration,w.liveStartTime=e*w.duration,w.liveEndTime=w.liveStartTime+w.duration,w.sn=e,w.level=r,w.cc=A,w.urlId=n,w.channel=a,w.channelName=o,m[3].indexOf("http://")>-1||m[3].indexOf("https://")>-1){const e=(" "+m[3]).slice(1),r=T(e),i=e.substring(e.lastIndexOf("/")+1);w.baseurl=t,w.fixedurl=s,w.fileName=i,w.originurl=e,w.originBaseurl=r}else w.baseurl=t,w.fixedurl=s,w.fileName=(" "+m[3]).slice(1);E(w,R),b.fragments.push(w),R=w,S+=w.duration,w=new u.default}}else if(m[4]){const e=(" "+m[4]).slice(1);R?w.setByteRange(e,R):w.setByteRange(e)}else if(m[5])w.rawProgramDateTime=(" "+m[5]).slice(1),w.tagList.push(["PROGRAM-DATE-TIME",w.rawProgramDateTime]),null===I&&(I=b.fragments.length);else{if(m=m[0].match(_),!m)continue;for(p=1;p<m.length&&void 0===m[p];p++);const e=(" "+m[p+1]).slice(1),n=(" "+m[p+2]).slice(1);switch(m[p]){case"#":w.tagList.push(n?[e,n]:[e]);break;case"PLAYLIST-TYPE":b.type=e.toUpperCase();break;case"MEDIA-SEQUENCE":g=b.startSN=parseInt(e);break;case"TARGETDURATION":b.targetduration=parseFloat(e);break;case"VERSION":b.version=parseInt(e);break;case"EXTM3U":default:break;case"ENDLIST":b.live=!1;break;case"DIS":A++,w.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":A=parseInt(e);break;case"START":{const t=new f.default(e).decimalFloatingPoint("TIME-OFFSET");Number.isFinite(t)&&(b.startTimeOffset=t);break}case"MAP":{const n=new f.default(e);if(n.URI.indexOf("http://")>-1||n.URI.indexOf("https://")>-1){w.fileName=n.URI,n.BYTERANGE&&w.setByteRange(n.BYTERANGE),w.baseurl=t,w.level=r,w.type=i,w.sn="initSegment",b.initSegment=w;let e=l.cloneDeep(w),s=e.fileName.toString();e.type=d.PlaylistLevelType.FRAME,e.fileName=s.substring(0,s.lastIndexOf("/")+1)+c+s.substring(s.lastIndexOf("/")+1),b.initFrameSegment=e}else{w.fileName=n.URI,n.BYTERANGE&&w.setByteRange(n.BYTERANGE),w.baseurl=t,w.level=r,w.type=i,w.sn="initSegment",b.initSegment=w;let e=l.cloneDeep(w);e.type=d.PlaylistLevelType.FRAME,e.fileName=c+e.fileName,b.initFrameSegment=e}w=new u.default,w.rawProgramDateTime=b.initSegment.rawProgramDateTime;break}}}}return w=R,w&&!w.fileName&&(b.fragments.pop(),S-=w.duration),b.totalduration=S,b.averagetargetduration=S/b.fragments.length,b.endSN=g-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=A,!b.initSegment&&b.fragments.length&&b.fragments.every((e=>v.test(e.fileName)))&&(w=new u.default,w.fileName=b.fragments[0].fileName,w.baseurl=t,w.level=r,w.type=i,w.sn="initSegment",b.initSegment=w),I&&function(e,t){let r=e[t];for(let i=t-1;i>=0;i--){const t=e[i];t.programDateTime=r.programDateTime-1e3*t.duration,r=t}}(b.fragments,I),b}}t.default=S},7703:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(6479)),s=i(r(9510)),a=r(3895),o=r(8158),l=i(r(8750)),u=r(2862),{performance:h}=window;class f extends s.default{constructor(e){super(e,n.default.MANIFEST_LOADING,n.default.LEVEL_LOADING),this.loaders={}}static canHaveQualityLevels(e){return e!==o.PlaylistContextType.AUDIO_TRACK}static mapContextToLevelType(e){const{type:t}=e;return o.PlaylistLevelType.MAIN}static getResponseUrl(e,t){let r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,i=t.loader,n=new(r||i)(t);return e.loader=n,this.loaders[e.type]=n,n}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(let e in this.loaders){let t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.destroyInternalLoaders(),super.destroy()}onManifestLoading(e){this.load({url:e.url,fixedurl:e.fixedurl,type:o.PlaylistContextType.MANIFEST,level:0,id:null,responseType:"text"})}onLevelLoading(e){this.load({url:e.url,fixedurl:e.fixedurl,type:o.PlaylistContextType.LEVEL,level:e.level,id:e.id,responseType:"text"})}load(e){const t=this.hls.config;let r,i,n,s,a=this.getInternalLoader(e);if(a){const t=a.context;if(t&&t.url===e.url)return!1;a.abort()}switch(e.type){case o.PlaylistContextType.MANIFEST:r=t.manifestLoadingMaxRetry,i=t.manifestLoadingTimeOut,n=t.manifestLoadingRetryDelay,s=t.manifestLoadingMaxRetryTimeout;break;case o.PlaylistContextType.LEVEL:r=0,s=0,n=0,i=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,i=t.levelLoadingTimeOut,n=t.levelLoadingRetryDelay,s=t.levelLoadingMaxRetryTimeout}a=this.createInternalLoader(e);const l={timeout:i,maxRetry:r,retryDelay:n,maxRetryDelay:s},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return a.load(e,l,u),!0}loadsuccess(e,t,r,i=null){if(this.resetInternalLoader(r.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');const n=e.data;t.tload=h.now(),0===n.indexOf("#EXTM3U")?n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,i):this._handleMasterPlaylist(e,t,r,i):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",i)}loaderror(e,t,r=null){this._handleNetworkError(t,r,!1,e)}loadtimeout(e,t,r=null){this._handleNetworkError(t,r,!0)}_handleMasterPlaylist(e,t,r,i){const s=this.hls,a=e.data;let o="";r.fixedurl&&(o=r.fixedurl);const u=f.getResponseUrl(e,r),{levels:h,sessionData:c}=l.default.parseMasterPlaylist(a,u,o),{frameLevels:d}=l.default.parseMasterFramePlaylist(a,u,o);h.length?s.trigger(n.default.MANIFEST_LOADED,{levels:h,frameLevels:d,url:u,stats:t,networkDetails:i,sessionData:c}):this._handleManifestParsingError(e,r,"no level found in manifest",i)}_handleTrackOrLevelPlaylist(e,t,r,i){const s=this.hls,{id:c,level:d,type:m}=r,p=f.getResponseUrl(e,r),g=this.hls.playbackChannel,_=this.hls.originChannel(this.hls.playbackChannel),v=r.fixedurl?r.fixedurl:"",y=Number.isFinite(c)?c:0,E=Number.isFinite(d)?d:y,T=f.mapContextToLevelType(r);let S;if(S=s.videoType==u.VideoType.Interactive?l.default.parseLevelPlaylist(e.data,p,E,T,y,v,g,_,"iframe/"):l.default.parseLevelPlaylist(e.data,p,E,T,y,v,g,_,""),S.tload=t.tload,S.fragments.length){if(m===o.PlaylistContextType.MANIFEST){const e={url:p,details:S};s.trigger(n.default.MANIFEST_LOADED,{levels:[e],url:p,stats:t,networkDetails:i,sessionData:null})}t.tparsed=h.now(),r.levelDetails=S,this._handlePlaylistLoaded(e,t,r,i)}else s.trigger(n.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:p,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})}_handleManifestParsingError(e,t,r,i){this.hls.trigger(n.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:i})}_handleNetworkError(e,t,r=!1,i=null){let s,l;const u=this.getInternalLoader(e);switch(e.type){case o.PlaylistContextType.MANIFEST:s=r?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,l=!0;break;case o.PlaylistContextType.LEVEL:s=r?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,l=!1;break;default:l=!1}u&&(u.abort(),this.resetInternalLoader(e.type));let h={type:a.ErrorTypes.NETWORK_ERROR,details:s,fatal:l,url:e.url,loader:u,context:e,networkDetails:t};i&&(h.response=i),this.hls.trigger(n.default.ERROR,h)}_handlePlaylistLoaded(e,t,r,i){const{type:s,level:a,id:o,levelDetails:l}=r;l&&l.targetduration?f.canHaveQualityLevels(r.type)&&this.hls.trigger(n.default.LEVEL_LOADED,{details:l,level:a||0,id:o||0,stats:t,networkDetails:i}):this._handleManifestParsingError(e,r,"invalid target duration",i)}}t.default=f},9875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(5953);t.default=class{static parseSegment(e){const t=new Uint8Array(e),r=((0,i.findBox)(t,["mdat"]),(0,i.findBox)(t,["moov","trak"]));for(let e=0;e<r.length;e++){const t=r[e];(0,i.findBox)(t,["tkhd"])[0]&&(0,i.findBox)(t,["mdia","mdhd"])[0]}}}},1659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observer=void 0;const i=r(6729);class n extends i.EventEmitter{trigger(e,...t){this.emit(e,e,...t)}}t.Observer=n},319:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}},1740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=Math.pow(2,32)-1;class i{static init(){let e;for(e in i.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},i.types)i.types.hasOwnProperty(e)&&(i.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);let t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);i.HDLR_TYPES={video:t,audio:r};let n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);i.STTS=i.STSC=i.STCO=s,i.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),i.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),i.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),i.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);let a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);i.FTYP=i.box(i.types.ftyp,a,l,a,o),i.DINF=i.box(i.types.dinf,i.box(i.types.dref,n))}static box(e){let t,r=Array.prototype.slice.call(arguments,1),i=8,n=r.length,s=n;for(;n--;)i+=r[n].byteLength;for(t=new Uint8Array(i),t[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),n=0,i=8;n<s;n++)t.set(r[n],i),i+=r[n].byteLength;return t}static hdlr(e){return i.box(i.types.hdlr,i.HDLR_TYPES[e])}static mdat(e){return i.box(i.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(r+1)),s=Math.floor(t%(r+1));return i.box(i.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,s>>24,s>>16&255,s>>8&255,255&s,85,196,0,0]))}static mdia(e){return i.box(i.types.mdia,i.mdhd(e.timescale,e.duration),i.hdlr(e.type),i.minf(e))}static mfhd(e){return i.box(i.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?i.box(i.types.minf,i.box(i.types.smhd,i.SMHD),i.DINF,i.stbl(e)):i.box(i.types.minf,i.box(i.types.vmhd,i.VMHD),i.DINF,i.stbl(e))}static moof(e,t,r){return i.box(i.types.moof,i.mfhd(e),i.traf(r,t))}static moov(e){let t=e.length,r=[];for(;t--;)r[t]=i.trak(e[t]);return i.box.apply(null,[i.types.moov,i.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(i.mvex(e)))}static mvex(e){let t=e.length,r=[];for(;t--;)r[t]=i.trex(e[t]);return i.box.apply(null,[i.types.mvex].concat(r))}static mvhd(e,t){t*=e;const n=Math.floor(t/(r+1)),s=Math.floor(t%(r+1));let a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,s>>24,s>>16&255,s>>8&255,255&s,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i.box(i.types.mvhd,a)}static sdtp(e){let t,r,n=e.samples||[],s=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)t=n[r].flags,s[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return i.box(i.types.sdtp,s)}static stbl(e){return i.box(i.types.stbl,i.stsd(e),i.box(i.types.stts,i.STTS),i.box(i.types.stsc,i.STSC),i.box(i.types.stsz,i.STSZ),i.box(i.types.stco,i.STCO))}static avc1(e){let t,r,n,s=[],a=[];for(t=0;t<e.sps.length;t++)r=e.sps[t],n=r.byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(r));for(t=0;t<e.pps.length;t++)r=e.pps[t],n=r.byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(r));let o=i.box(i.types.avcC,new Uint8Array([1,s[3],s[4],s[5],255,224|e.sps.length].concat(s).concat([e.pps.length]).concat(a))),l=e.width,u=e.height,h=e.pixelRatio[0],f=e.pixelRatio[1];return i.box(i.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,i.box(i.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),i.box(i.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,255&h,f>>24,f>>16&255,f>>8&255,255&f])))}static esds(e){let t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static mp4a(e){let t=e.samplerate;return i.box(i.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),i.box(i.types.esds,i.esds(e)))}static mp3(e){let t=e.samplerate;return i.box(i.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))}static stsd(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?i.box(i.types.stsd,i.STSD,i.mp4a(e)):i.box(i.types.stsd,i.STSD,i.mp3(e)):i.box(i.types.stsd,i.STSD,i.avc1(e))}static tkhd(e){let t=e.id,n=e.duration*e.timescale,s=e.width,a=e.height,o=Math.floor(n/(r+1)),l=Math.floor(n%(r+1));return i.box(i.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,255&s,0,0,a>>8&255,255&a,0,0]))}static traf(e,t){let n=i.sdtp(e),s=e.id,a=Math.floor(t/(r+1)),o=Math.floor(t%(r+1));return i.box(i.types.traf,i.box(i.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),i.box(i.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),i.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,i.box(i.types.trak,i.tkhd(e),i.mdia(e))}static trex(e){let t=e.id;return i.box(i.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){let r,n,s,a,o,l,u=e.samples||[],h=u.length,f=12+16*h,c=new Uint8Array(f);for(t+=8+f,c.set([0,0,15,1,h>>>24&255,h>>>16&255,h>>>8&255,255&h,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),r=0;r<h;r++)n=u[r],s=n.duration,a=n.size,o=n.flags,l=n.cts,c.set([s>>>24&255,s>>>16&255,s>>>8&255,255&s,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return i.box(i.types.trun,c)}static initSegment(e){i.types||i.init();let t,r=i.moov(e);return t=new Uint8Array(i.FTYP.byteLength+r.byteLength),t.set(i.FTYP),t.set(r,i.FTYP.byteLength),t}}t.default=i},9929:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(319)),s=i(r(1740)),a=i(r(6479)),o=r(3895),l=r(4986),u=r(2676),h=(0,l.toMpegTsClockFromTimescale)(10),f=(0,l.toMpegTsClockFromTimescale)(.2);let c=null,d=null,m=!1;function p(e,t){let r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}t.default=class{constructor(e,t,r,i){if(this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===c){const e=navigator.userAgent.match(/Chrome\/(\d+)/i);c=e?parseInt(e[1]):0}if(null===d){const e=navigator.userAgent.match(/Safari\/(\d+)/i);d=e?parseInt(e[1]):0}m=c&&c<75||d&&d<600}destroy(){}resetTimeStamp(e){this._initPTS=this._initDTS=e}resetInitSegment(){this.ISGenerated=!1}getVideoStartPts(e){let t=!1;const r=e.reduce(((e,r)=>{const i=r.pts-e;return i<-4294967296?(t=!0,p(e,r.pts)):i>0?e:r.pts}),e[0].pts);return t&&u.logger.debug("PTS rollover detected"),r}remux(e,t,r,i,n,s,o){if(this.ISGenerated||this.generateIS(e,t,n),this.ISGenerated){const r=e.samples.length,i=t.samples.length;let a=n,l=n;if(r&&i){const r=this.getVideoStartPts(t.samples),i=(p(e.samples[0].pts,r)-r)/t.inputTimeScale;a+=Math.max(0,i),l+=Math.max(0,-i)}if(r){e.timescale||(u.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,n));let r=this.remuxAudio(e,a,s,o,l);if(i){let i;r&&(i=r.endPTS-r.startPTS),t.timescale||(u.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,n)),this.remuxVideo(t,l,s,i)}}else if(i){let r=this.remuxVideo(t,l,s,0);r&&e.codec&&this.remuxEmptyAudio(e,a,s,r)}}r.samples.length&&this.remuxID3(r,n),i.samples.length&&this.remuxText(i,n),this.observer.trigger(a.default.FRAG_PARSED)}generateIS(e,t,r){let i,n,l=this.observer,h=e.samples,f=t.samples,c=this.typeSupported,d="audio/mp4",m={},g={tracks:m},_=void 0===this._initPTS;if(_&&(i=n=1/0),e.config&&h.length&&(e.timescale=e.samplerate,u.logger.log(`audio sampling rate : ${e.samplerate}`),e.isAAC||(c.mpeg?(d="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),m.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&c.mpeg?new Uint8Array:s.default.initSegment([e]),metadata:{channelCount:e.channelCount}},_&&(i=n=h[0].pts-Math.round(e.inputTimeScale*r))),t.sps&&t.pps&&f.length){const e=t.inputTimeScale;if(t.timescale=e,m.video={container:"video/mp4",codec:t.codec,initSegment:s.default.initSegment([t]),metadata:{width:t.width,height:t.height}},_){const t=this.getVideoStartPts(f),s=Math.round(e*r);n=Math.min(n,p(f[0].dts,t)-s),i=Math.min(i,t-s),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:i,timescale:e})}}else _&&m.audio&&this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:i,timescale:e.inputTimeScale});Object.keys(m).length?(l.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,_&&(this._initPTS=i,this._initDTS=n)):l.trigger(a.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}remuxVideo(e,t,r,i){const n=e.timescale,h=e.samples,d=[],g=h.length,_=this._initPTS;let v,y,E,T,S,b=8,A=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,w=0,I=!1,F=this.nextAvcDts;if(0===g)return;r||(F=t*n-(h[0].pts-p(h[0].dts,h[0].pts)));for(let e=0;e<g;e++){const t=h[e];t.pts=p(t.pts-_,F),t.dts=p(t.dts-_,F),t.dts>t.pts&&(w=Math.max(Math.min(w,t.pts-t.dts),-1*f)),t.dts<h[e>0?e-1:e].dts&&(I=!0)}I&&h.sort((function(e,t){const r=e.dts-t.dts,i=e.pts-t.pts;return r||i||e.id-t.id})),T=h[0].dts,S=h[g-1].dts;const L=Math.round((S-T)/(g-1));if(w<0){if(w<-2*L){u.logger.warn(`PTS < DTS detected in video samples, offsetting DTS from PTS by ${(0,l.toMsFromMpegTsClock)(-L,!0)} ms`);let e=w;for(let t=0;t<g;t++)h[t].dts=e=Math.max(e,h[t].pts-L),h[t].pts=Math.max(e,h[t].pts)}else{u.logger.warn(`PTS < DTS detected in video samples, shifting DTS by ${(0,l.toMsFromMpegTsClock)(w,!0)} ms to overcome this issue`);for(let e=0;e<g;e++)h[e].dts=h[e].dts+w}T=h[0].dts,S=h[g-1].dts}if(r){const e=T-F,t=e>L,r=e<-1;if(t||r){t?u.logger.warn(`AVC: ${(0,l.toMsFromMpegTsClock)(e,!0)} ms (${e}dts) hole between fragments detected, filling it`):u.logger.warn(`AVC: ${(0,l.toMsFromMpegTsClock)(-e,!0)} ms (${e}dts) overlapping between fragments detected`),T=F;const r=h[0].pts-e;h[0].dts=T,h[0].pts=r,u.logger.log(`Video: First PTS/DTS adjusted: ${(0,l.toMsFromMpegTsClock)(r,!0)}/${(0,l.toMsFromMpegTsClock)(T,!0)}, delta: ${(0,l.toMsFromMpegTsClock)(e,!0)} ms`)}}m&&(T=Math.max(0,T));let C=0,P=0;for(let e=0;e<g;e++){const t=h[e],r=t.units,i=r.length;let n=0;for(let e=0;e<i;e++)n+=r[e].data.length;P+=n,C+=i,t.length=n,t.dts=Math.max(t.dts,T),t.pts=Math.max(t.pts,t.dts,0),A=Math.min(t.pts,A),R=Math.max(t.pts,R)}S=h[g-1].dts;let O=P+4*C+8;try{y=new Uint8Array(O)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:O,reason:`fail allocating video mdat ${O}`})}let D=new DataView(y.buffer);D.setUint32(0,O),y.set(s.default.types.mdat,4);for(let e=0;e<g;e++){const t=h[e],r=t.units;let s,a=0;for(let e=0,t=r.length;e<t;e++){const t=r[e],i=t.data,n=t.data.byteLength;D.setUint32(b,n),b+=4,y.set(i,b),b+=n,a+=4+n}if(e<g-1)v=h[e+1].dts-t.dts;else{const r=this.config,s=t.dts-h[e>0?e-1:e].dts;if(r.stretchShortVideoTrack){const e=r.maxBufferHole,a=Math.floor(e*n),o=(i?A+i*n:this.nextAudioPts)-t.pts;o>a?(v=o-s,v<0&&(v=s),u.logger.log(`It is approximately ${(0,l.toMsFromMpegTsClock)(o,!1)} ms to the next segment; using duration ${(0,l.toMsFromMpegTsClock)(v,!1)} ms for the last video frame.`)):v=s}else v=s}s=Math.round(t.pts-t.dts),d.push({size:a,duration:v,cts:s,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t.key?2:1,isNonSync:t.key?0:1}})}this.nextAvcDts=S+v;const M=e.dropped;if(e.nbNalu=0,e.dropped=0,d.length&&c&&c<70){const e=d[0].flags;e.dependsOn=2,e.isNonSync=0}e.samples=d,E=s.default.moof(e.sequenceNumber++,T,e),e.samples=[];const x={data1:E,data2:y,startPTS:A/n,endPTS:(R+v)/n,startDTS:T/n,endDTS:this.nextAvcDts/n,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:M};return this.observer.trigger(a.default.FRAG_PARSING_DATA,x),x}remuxAudio(e,t,r,i,f){const c=e.inputTimeScale,d=e.timescale,m=c/d,g=(e.isAAC?1024:1152)*m,_=this._initPTS,v=!e.isAAC&&this.typeSupported.mpeg;let y,E,T,S,b,A,R=v?0:8,w=e.samples,I=[],F=this.nextAudioPts;if(r|=w.length&&F&&(i&&Math.abs(t-F/c)<.1||Math.abs(w[0].pts-F-_)<20*g),w.forEach((function(e){e.pts=e.dts=p(e.pts-_,t*c)})),w=w.filter((e=>e.pts>=0)),0===w.length)return;if(r||(F=0===f?0:i?Math.max(0,t*c):w[0].pts),e.isAAC){const t=this.config.maxAudioFramesDrift;for(let i=0,s=F;i<w.length;){const a=w[i];let o=a.pts,f=o-s;if(f<=-t*g)r||i>0?(u.logger.warn(`Dropping 1 audio frame @ ${(0,l.toMsFromMpegTsClock)(s,!0)/1e3}s due to ${(0,l.toMsFromMpegTsClock)(f,!0)} ms overlap.`),w.splice(i,1)):(u.logger.warn(`Audio frame @ ${(0,l.toMsFromMpegTsClock)(o,!0)/1e3}s overlaps nextAudioPts by ${(0,l.toMsFromMpegTsClock)(f,!0)} ms.`),s=o+g,i++);else if(f>=t*g&&f<h){const t=Math.floor(f/g);s=o-t*g,u.logger.warn(`Injecting ${t} audio frames @ ${(0,l.toMsFromMpegTsClock)(s,!0)/1e3}s due to ${(0,l.toMsFromMpegTsClock)(f,!0)} ms gap.`);for(let r=0;r<t;r++){let t=Math.max(s,0);E=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),E||(u.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),E=a.unit.subarray()),w.splice(i,0,{unit:E,pts:t,dts:t}),s+=g,i++}a.pts=a.dts=s,s+=g,i++}else Math.abs(f),a.pts=a.dts=s,s+=g,i++}}let L=w.length,C=0;for(;L--;)C+=w[L].unit.byteLength;for(let t=0,i=w.length;t<i;t++){let i=w[t],f=i.unit,c=i.pts;if(void 0!==A&&y)y.duration=Math.round((c-A)/m);else{let t=c-F,i=0;if(r&&e.isAAC&&t){if(t>0&&t<h)i=Math.round((c-F)/g),u.logger.log(`${(0,l.toMsFromMpegTsClock)(t,!0)} ms hole between AAC samples detected,filling it`),i>0&&(E=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),E||(E=f.subarray()),C+=i*E.length);else if(t<-12){u.logger.log(`drop overlapping AAC sample, expected/parsed/delta: ${(0,l.toMsFromMpegTsClock)(F,!0)} ms / ${(0,l.toMsFromMpegTsClock)(c,!0)} ms / ${(0,l.toMsFromMpegTsClock)(-t,!0)} ms`),C-=f.byteLength;continue}c=F}if(b=c,!(C>0))return;C+=R;try{T=new Uint8Array(C)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:C,reason:`fail allocating audio mdat ${C}`})}v||(new DataView(T.buffer).setUint32(0,C),T.set(s.default.types.mdat,4));for(let t=0;t<i;t++)E=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),E||(u.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),E=f.subarray()),T.set(E,R),R+=E.byteLength,y={size:E.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},I.push(y)}T.set(f,R);let d=f.byteLength;R+=d,y={size:d,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},I.push(y),A=c}let P=0;if(L=I.length,L>=2&&(P=I[L-2].duration,y.duration=P),L){this.nextAudioPts=F=A+m*P,e.samples=I,S=v?new Uint8Array:s.default.moof(e.sequenceNumber++,b/m,e),e.samples=[];const t=b/c,r=F/c,i={data1:S,data2:T,startPTS:t,endPTS:r,startDTS:t,endDTS:r,type:"audio",hasAudio:!0,hasVideo:!1,nb:L};return this.observer.trigger(a.default.FRAG_PARSING_DATA,i),i}return null}remuxEmptyAudio(e,t,r,i){let s=e.inputTimeScale,a=s/(e.samplerate?e.samplerate:s),o=this.nextAudioPts,l=(void 0!==o?o:i.startDTS*s)+this._initDTS,h=i.endDTS*s+this._initDTS,f=1024*a,c=Math.ceil((h-l)/f),d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(u.logger.warn("remux empty Audio"),!d)return void u.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");let m=[];for(let e=0;e<c;e++){let t=l+e*f;m.push({unit:d,pts:t,dts:t})}e.samples=m,this.remuxAudio(e,t,r)}remuxID3(e,t){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale,n=this._initPTS,s=this._initDTS;for(let a=0;a<r;a++){const r=e.samples[a];r.pts=p(r.pts-n,t*i)/i,r.dts=p(r.dts-s,t*i)/i}this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}remuxText(e,t){const r=e.samples.length,i=e.inputTimeScale,n=this._initPTS;if(r){for(let s=0;s<r;s++){const r=e.samples[s];r.pts=p(r.pts-n,t*i)/i}e.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]}}},7086:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(6479));t.default=class{constructor(e){this.observer=e}destroy(){}resetTimeStamp(){}resetInitSegment(){}remux(e,t,r,i,s,a,o,l){let u=this.observer,h="";e&&(h+="audio"),t&&(h+="video"),u.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:s,startDTS:s,type:h,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(n.default.FRAG_PARSED)}}},4381:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(9510));class s extends n.default{constructor(e,...t){super(e,...t),this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickInterval=window.self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(window.self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(window.self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=window.self.setTimeout(this._boundTick,0)),this._tickCallCount=0)}doTick(){}}t.default=s},8158:(e,t)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.PlaylistLevelType=t.PlaylistContextType=void 0,(i=t.PlaylistContextType||(t.PlaylistContextType={})).MANIFEST="manifest",i.LEVEL="level",i.AUDIO_TRACK="audioTrack",(r=t.PlaylistLevelType||(t.PlaylistLevelType={})).MAIN="main",r.FRAME="frame",r.AUDIO="audio"},5735:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;class n{constructor(e){this.NAME="",this.CODECS="",this.URI="",this.TYPE="",this.LANGUAGE="",this.DEFAULT="",this.AUTOSELECT="",this.FORCED="",this.BYTERANGE="","string"==typeof e&&(e=n.parseAttrList(e));for(let t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const r=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)r[e]=parseInt(t.slice(2*e,2*e+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}enumeratedString(e){return this[e]}decimalResolution(e){const t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t,r={};for(i.lastIndex=0;null!==(t=i.exec(e));){let e=t[2],i='"';0===e.indexOf(i)&&e.lastIndexOf(i)===e.length-1&&(e=e.slice(1,-1)),r[t[1]]=e}return r}}t.default=n},4502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={search:function(e,t){let r=0,i=e.length-1,n=null,s=null;for(;r<=i;){n=(r+i)/2|0,s=e[n];let a=t(s);if(a>0)r=n+1;else{if(!(a<0))return s;i=n-1}}return null}}},7790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferHelper=void 0;const r={length:0,start:()=>0,end:()=>0};class i{static isBuffered(e,t){try{if(e){let r=i.getBuffered(e);for(let e=0;e<r.length;e++)if(t>=r.start(e)&&t<=r.end(e))return!0}}catch(e){}return!1}static bufferInfo(e,t,r){try{if(e){let n,s=i.getBuffered(e),a=[];for(n=0;n<s.length;n++)a.push({start:s.start(n),end:s.end(n)});return this.bufferedInfo(a,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,r){e.sort((function(e,t){return e.start-t.start||t.end-e.end}));let i=[];if(r)for(let t=0;t<e.length;t++){let n=i.length;if(n){let s=i[n-1].end;e[t].start-s<r?e[t].end>s&&(i[n-1].end=e[t].end):i.push(e[t])}else i.push(e[t])}else i=e;let n,s=0,a=t,o=t;for(let e=0;e<i.length;e++){let l=i[e].start,u=i[e].end;if(t+r>=l&&t<u)a=l,o=u,s=o-t;else if(t+r<l){n=l;break}}return{len:s,start:a,end:o,nextStart:n}}static getBuffered(e){try{return e.buffered}catch(e){return r}}}t.BufferHelper=i},8540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCodecSupportedInMp4=t.isCodecType=void 0;const r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){const i=r[t];return!!i&&!0===i[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return MediaSource.isTypeSupported(`${t||"video"}/mp4;codecs="${e}"`)}},5699:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.alignPDT=t.alignDiscontinuities=t.alignStream=t.adjustPts=t.findDiscontinuousReferenceFrag=t.shouldAlignOnDiscontinuities=t.findFragWithCC=t.findFirstFragWithCC=void 0;const n=i(r(4502));function s(e,t){let r=null;for(let i=0;i<e.length;i+=1){const n=e[i];if(n&&n.cc===t){r=n;break}}return r}function a(e,t,r){let i=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(i=!0),i}function o(e,t){const r=e.fragments,i=t.fragments;if(!i.length||!r.length)return;const n=s(r,i[0].cc);return!n||n&&!n.startPTS?void 0:n}function l(e,t){t.fragments.forEach((t=>{if(t){let r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function u(e,t,r){if(a(e,r,t)){const e=o(r.details,t);e&&l(e.start,t)}}function h(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;let r=t.fragments[0].programDateTime,i=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start;Number.isFinite(i)&&l(i,e)}}t.findFirstFragWithCC=s,t.findFragWithCC=function(e,t){return n.default.search(e,(e=>e.cc<t?1:e.cc>t?-1:0))},t.shouldAlignOnDiscontinuities=a,t.findDiscontinuousReferenceFrag=o,t.adjustPts=l,t.alignStream=function(e,t,r){u(e,r,t),!r.PTSKnown&&t&&h(r,t.details)},t.alignDiscontinuities=u,t.alignPDT=h},4397:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(2561));t.default=class{constructor(e,t,r,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(t),this.fast_=new n.default(r)}sample(e,t){let r=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/r;this.fast_.sample(r,i),this.slow_.sample(r,i)}canEstimate(){let e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}destroy(){}}},2561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}sample(e,t){let r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){let e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}},6696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=void 0,t.getSelfScope=function(){return"undefined"==typeof window?this:window}},2676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.enableLogs=void 0;const i=r(6696);function n(...e){}const s={trace:n,debug:n,log:n,warn:n,info:n,error:n};let a=s;const o=(0,i.getSelfScope)();t.enableLogs=function(e){if(o.console&&!0===e||"object"==typeof e){!function(e,...t){t.forEach((function(t){a[t]=e[t]?e[t].bind(e):function(e){const t=o.console[e];return t?function(...r){r[0]&&(r[0]=function(e,t){return"["+e+"] > "+t}(e,r[0])),t.apply(o.console,r)}:n}(t)}))}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=s}}else a=s},t.logger=a},103:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=void 0,t.getMediaSource=function(){return window.MediaSource||window.WebKitMediaSource}},5953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendUint8Array=t.segmentValidRange=t.offsetStartDTS=t.computeRawDurationFromSamples=t.getDuration=t.getStartDTS=t.parseInitSegment=t.findBox=t.writeUint32=t.readUint32=t.readUint16=t.bin2str=void 0;const i=r(668),n=r(8790),s=Math.pow(2,32)-1,a=[].push;function o(e){return String.fromCharCode.apply(null,e)}function l(e,t){"data"in e&&(t+=e.start,e=e.data);const r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r}function u(e,t,r){"data"in e&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function h(e,t){const r=[];if(!t.length)return r;let i,n,s;"data"in e?(i=e.data,n=e.start,s=e.end):(i=e,n=0,s=i.byteLength);for(let e=n;e<s-4;){const n=l(i,e),u=n>1?e+n:s;if(o(i.subarray(e+4,e+8))===t[0])if(1===t.length)r.push({data:i,start:e+8,end:u});else{const n=h({data:i,start:e+8,end:u},t.slice(1));n.length&&a.apply(r,n)}e=u}if(r&&r.length,!r||0===r.length){let i,n,s;"data"in e?(i=e.data,n=e.start,s=e.end):(i=e,n=0,s=i.byteLength);for(let e=n;e<s-4;){const n=l(i,e),u=n>1?e+n:s;if(o(i.subarray(e+4,e+8))===t[0])if(1===t.length)r.push({data:i,start:e+8,end:u});else{const n=h({data:i,start:e+8,end:u},t.slice(1));n.length&&a.apply(r,n)}e=u}}return r&&r.length,r}function f(e){const t=l(e,0);let r=8;1&t&&(r+=4),4&t&&(r+=4);let i=0;const n=l(e,4);for(let s=0;s<n;s++)256&t&&(i+=l(e,r),r+=4),512&t&&(r+=4),1024&t&&(r+=4),2048&t&&(r+=4);return i}t.bin2str=o,t.readUint16=function(e,t){"data"in e&&(t+=e.start,e=e.data);const r=e[t]<<8|e[t+1];return r<0?65536+r:r},t.readUint32=l,t.writeUint32=u,t.findBox=h,t.parseInitSegment=function(e){const t=[],r=h(e,["moov","trak"]);for(let e=0;e<r.length;e++){const i=r[e],s=h(i,["tkhd"])[0];if(s){let e=s.data[s.start],r=0===e?12:20;const a=l(s,r),u=h(i,["mdia","mdhd"])[0];if(u){e=u.data[u.start],r=0===e?12:20;const s=l(u,r),f=h(i,["mdia","hdlr"])[0];if(f){const e=o(f.data.subarray(f.start+8,f.start+12)),r={soun:n.ElementaryStreamTypes.AUDIO,vide:n.ElementaryStreamTypes.VIDEO}[e];if(r){const e=h(i,["mdia","minf","stbl","stsd"])[0];let n;e&&(n=o(e.data.subarray(e.start+12,e.start+16))),t[a]={timescale:s,type:r},t[r]={timescale:s,id:a,codec:n}}}}}}return h(e,["moov","mvex","trex"]).forEach((e=>{const r=l(e,4),i=t[r];i&&(i.default={duration:l(e,12),flags:l(e,20)})})),t},t.getStartDTS=function(e,t){return h(t,["moof","traf"]).reduce(((t,r)=>{const i=h(r,["tfdt"])[0],n=i.data[i.start],s=h(r,["tfhd"]).reduce(((t,r)=>{const s=l(r,4),a=e[s];if(a){let e=l(i,4);1===n&&(e*=Math.pow(2,32),e+=l(i,8));const r=e/(a.timescale||9e4);if(isFinite(r)&&(null===t||r<t))return r}return t}),null);return null!==s&&isFinite(s)&&(null===t||s<t)?s:t}),null)||0},t.getDuration=function(e,t){let r=0,i=0,s=0;const a=h(e,["moof","traf"]);for(let e=0;e<a.length;e++){const o=a[e],u=h(o,["tfhd"])[0],c=t[l(u,4)];if(!c)continue;const d=c.default,m=l(u,0)|(null==d?void 0:d.flags);let p=null==d?void 0:d.duration;8&m&&(p=l(u,2&m?12:8));const g=c.timescale||9e4,_=h(o,["trun"]);for(let e=0;e<_.length;e++)r=p?p*l(_[e],4):f(_[e]),c.type===n.ElementaryStreamTypes.VIDEO?i+=r/g:c.type===n.ElementaryStreamTypes.AUDIO&&(s+=r/g)}return i||s},t.computeRawDurationFromSamples=f,t.offsetStartDTS=function(e,t,r){h(t,["moof","traf"]).forEach((function(t){h(t,["tfhd"]).forEach((function(i){const n=l(i,4),a=e[n];if(!a)return;const o=a.timescale||9e4;h(t,["tfdt"]).forEach((function(e){const t=e.data[e.start];let i=l(e,4);if(0===t)u(e,4,i-r*o);else{i*=Math.pow(2,32),i+=l(e,8),i-=r*o,i=Math.max(i,0);const t=Math.floor(i/(s+1)),n=Math.floor(i%(s+1));u(e,4,t),u(e,8,n)}}))}))}))},t.segmentValidRange=function(e){const t={valid:null,remainder:null},r=h(e,["moof"]);if(!r)return t;if(r.length<2)return t.remainder=e,t;const n=r[r.length-1];return t.valid=(0,i.sliceUint8)(e,0,n.start-8),t.remainder=(0,i.sliceUint8)(e,n.start-8),t},t.appendUint8Array=function(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}},4986:(e,t)=>{"use strict";function r(e,t,r=1,i=!1){const n=e*t*r;return i?Math.round(n):n}Object.defineProperty(t,"__esModule",{value:!0}),t.toMpegTsClockFromTimescale=t.toMsFromMpegTsClock=t.toTimescaleFromBase=void 0,t.toTimescaleFromBase=r,t.toMsFromMpegTsClock=function(e,t=!1){return r(e,1e3,1/9e4,t)},t.toMpegTsClockFromTimescale=function(e,t=1){return r(e,9e4,1/t)}},668:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceUint8=void 0,t.sliceUint8=function(e,t,r){return Uint8Array.prototype.slice?e.slice(t,r):new Uint8Array(Array.prototype.slice.call(e,t,r))}},4105:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}load(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}loadInternal(){let e,t=this.context;e=this.loader=new window.XMLHttpRequest,this.stats.tfirst=0,this.stats.loaded=0;const r=this.xhrSetup;try{const i=t.url;if(r)try{r(e,i)}catch(t){e.open("GET",i,!0),r(e,i)}e.readyState||e.open("GET",i,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}readystatechange(e){let t=this.loader,r=t.readyState,i=this.stats,n=this.context,s=this.config;if(!i.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(window.performance.now(),i.trequest)),4===r){let e=t.status;if(e>=200&&e<300){if(204!==t.status){let e,r;i.tload=Math.max(i.tfirst,window.performance.now()),"arraybuffer"===n.responseType?(e=t.response,r=e.byteLength):"json"===n.responseType?(e=t.response,r=JSON.stringify(e).length):(e=t.responseText,r=e.length),i.loaded=i.total=r;let s={url:t.responseURL,data:e};this.callbacks.onSuccess(s,i,n,t)}}else i.retry>=s.maxRetry||e>=400&&e<499?this.callbacks.onError({code:e,text:t.statusText},n,t):(this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)}loadtimeout(){this.callbacks.onTimeout(this.stats,this.context,null)}destroy(){this.abort(),this.loader=null}abort(){let e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,s=l(e),a=s[0],o=s[1],u=new n(function(e,t,r){return 3*(t+r)/4-r}(0,a,o)),h=0,f=o>0?a-4:a;for(r=0;r<f;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===o&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[h++]=255&t),1===o&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,s=[],a=16383,o=0,l=i-n;o<l;o+=a)s.push(u(e,o,o+a>l?l:o+a));return 1===n?(t=e[i-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,i){for(var n,s,a=[],o=t;o<i;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(r[(s=n)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},8764:(e,t,r)=>{"use strict";const i=r(9742),n=r(645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=l,t.h2=50;const a=2147483647;function o(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|p(e,t);let i=o(r);const n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,r);const n=function(e){if(l.isBuffer(e)){const t=0|m(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||X(e.length)?o(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return h(e),o(e<0?0:0|m(e))}function c(e){const t=e.length<0?0:0|m(e.length),r=o(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(i,l.prototype),i}function m(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(n)return i?-1:$(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return F(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function _(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function v(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),X(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,i,n){let s,a=1,o=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){let i=-1;for(s=r;s<o;s++)if(u(e,s)===u(t,-1===i?0:s-i)){if(-1===i&&(i=s),s-i+1===l)return i*a}else-1!==i&&(s-=s-i),i=-1}else for(r+l>o&&(r=o-l),s=r;s>=0;s--){let r=!0;for(let i=0;i<l;i++)if(u(e,s+i)!==u(t,i)){r=!1;break}if(r)return s}return-1}function E(e,t,r,i){r=Number(r)||0;const n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;const s=t.length;let a;for(i>s/2&&(i=s/2),a=0;a<i;++a){const i=parseInt(t.substr(2*a,2),16);if(X(i))return a;e[r+a]=i}return a}function T(e,t,r,i){return Y($(t,e.length-r),e,r,i)}function S(e,t,r,i){return Y(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function b(e,t,r,i){return Y(q(t),e,r,i)}function A(e,t,r,i){return Y(function(e,t){let r,i,n;const s=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),i=r>>8,n=r%256,s.push(n),s.push(i);return s}(t,e.length-r),e,r,i)}function R(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function w(e,t,r){r=Math.min(e.length,r);const i=[];let n=t;for(;n<r;){const t=e[n];let s=null,a=t>239?4:t>223?3:t>191?2:1;if(n+a<=r){let r,i,o,l;switch(a){case 1:t<128&&(s=t);break;case 2:r=e[n+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(s=l));break;case 3:r=e[n+1],i=e[n+2],128==(192&r)&&128==(192&i)&&(l=(15&t)<<12|(63&r)<<6|63&i,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:r=e[n+1],i=e[n+2],o=e[n+3],128==(192&r)&&128==(192&i)&&128==(192&o)&&(l=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&o,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),n+=a}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=I));return r}(i)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return h(e),e<=0?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)}(e,t,r)},l.allocUnsafe=function(e){return f(e)},l.allocUnsafeSlow=function(e){return f(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const i=l.allocUnsafe(t);let n=0;for(r=0;r<e.length;++r){let t=e[r];if(K(t,Uint8Array))n+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,n)}n+=t.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)_(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(e,t,r,i,n){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(n>>>=0)-(i>>>=0),a=(r>>>=0)-(t>>>=0);const o=Math.min(s,a),u=this.slice(i,n),h=e.slice(t,r);for(let e=0;e<o;++e)if(u[e]!==h[e]){s=u[e],a=h[e];break}return s<a?-1:a<s?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}const n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":case"latin1":case"binary":return S(this,e,t,r);case"base64":return b(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function F(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function L(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function C(e,t,r){const i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=Z[e[i]];return n}function P(e,t,r){const i=e.slice(t,r);let n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,i,n,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function M(e,t,r,i,n){V(t,i,n,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function x(e,t,r,i,n){V(t,i,n,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function N(e,t,r,i,n,s){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,i,s){return t=+t,r>>>=0,s||N(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function k(e,t,r,i,s){return t=+t,r>>>=0,s||N(e,0,r,8),n.write(e,t,r,i,52,8),r+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e],n=1,s=0;for(;++s<t&&(n*=256);)i+=this[e+s]*n;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Q((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(i)+(BigInt(n)<<BigInt(32))})),l.prototype.readBigUInt64BE=Q((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)})),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e],n=1,s=0;for(;++s<t&&(n*=256);)i+=this[e+s]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=t,n=1,s=this[e+--i];for(;i>0&&(n*=256);)s+=this[e+--i]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Q((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Q((function(e){j(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||D(this,e,t,r,Math.pow(2,8*r)-1,0);let n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||D(this,e,t,r,Math.pow(2,8*r)-1,0);let n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Q((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Q((function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}let n=0,s=1,a=0;for(this[t]=255&e;++n<r&&(s*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/s>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}let n=r-1,s=1,a=0;for(this[t+n]=255&e;--n>=0&&(s*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/s>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Q((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Q((function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);const n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},l.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{const s=l.isBuffer(e)?e:l.from(e,i),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=s[n%a]}return this};const U={};function G(e,t,r){U[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function H(e){let t="",r=e.length;const i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function V(e,t,r,i,n,s){if(e>r||e<t){const i="bigint"==typeof t?"n":"";let n;throw n=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(s+1)}${i}`:`>= -(2${i} ** ${8*(s+1)-1}${i}) and < 2 ** ${8*(s+1)-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new U.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,r){j(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(i,n,s)}function j(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw j(e,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),G("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),G("ERR_OUT_OF_RANGE",(function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=H(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=H(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function $(e,t){let r;t=t||1/0;const i=e.length;let n=null;const s=[];for(let a=0;a<i;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function q(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function Q(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new n(i,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,n,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,u,h=this._events[o],f=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),f){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,i),!0;case 4:return h.fn.call(h.context,t,i,n),!0;case 5:return h.fn.call(h.context,t,i,n,s),!0;case 6:return h.fn.call(h.context,t,i,n,s,a),!0}for(u=1,l=new Array(f-1);u<f;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var c,d=h.length;for(u=0;u<d;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),f){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,i);break;case 4:h[u].fn.call(h[u].context,t,i,n);break;default:if(!l)for(c=1,l=new Array(f-1);c<f;c++)l[c-1]=arguments[c];h[u].fn.apply(h[u].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,i,n){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||a(this,s);else{for(var l=0,u=[],h=o.length;l<h;l++)(o[l].fn!==t||n&&!o[l].once||i&&o[l].context!==i)&&u.push(o[l]);u.length?this._events[s]=1===u.length?u[0]:u:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},6358:(e,t,r)=>{"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}r.r(t),r.d(t,{Back:()=>jr,Bounce:()=>zr,CSSPlugin:()=>on,Circ:()=>Yr,Cubic:()=>kr,Elastic:()=>Vr,Expo:()=>qr,Linear:()=>Nr,Power0:()=>Pr,Power1:()=>Or,Power2:()=>Dr,Power3:()=>Mr,Power4:()=>xr,Quad:()=>Br,Quart:()=>Ur,Quint:()=>Gr,Sine:()=>$r,SteppedEase:()=>Wr,Strong:()=>Hr,TimelineLite:()=>Ut,TimelineMax:()=>Ut,TweenLite:()=>Xt,TweenMax:()=>un,default:()=>ln,gsap:()=>ln});var s,a,o,l,u,h,f,c,d,m,p,g,_,v,y,E={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},T={duration:.5,overwrite:!1,delay:0},S=1e8,b=1e-8,A=2*Math.PI,R=A/4,w=0,I=Math.sqrt,F=Math.cos,L=Math.sin,C=function(e){return"string"==typeof e},P=function(e){return"function"==typeof e},O=function(e){return"number"==typeof e},D=function(e){return void 0===e},M=function(e){return"object"==typeof e},x=function(e){return!1!==e},N=function(){return"undefined"!=typeof window},B=function(e){return P(e)||C(e)},k="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},U=Array.isArray,G=/(?:-?\.?\d|\.)+/gi,H=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,V=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,j=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,W=/[+-]=-?[.\d]+/,z=/[^,'"\[\]\s]+/gi,$=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,q={},Y={},K=function(e){return(Y=be(e,q))&&Sr},X=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Z=function(e,t){return!t&&console.warn(e)},Q=function(e,t){return e&&(q[e]=t)&&Y&&(Y[e]=t)||q},J=function(){return 0},ee={suppressEvents:!0,isStart:!0},te={suppressEvents:!0},re={},ie=[],ne={},se={},ae={},oe=30,le=[],ue="",he=function(e){var t,r,i=e[0];if(M(i)||P(i)||(e=[e]),!(t=(i._gsap||{}).harness)){for(r=le.length;r--&&!le[r].targetTest(i););t=le[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new Bt(e[r],t)))||e.splice(r,1);return e},fe=function(e){return e._gsap||he(tt(e))[0]._gsap},ce=function(e,t,r){return(r=e[t])&&P(r)?e[t]():D(r)&&e.getAttribute&&e.getAttribute(t)||r},de=function(e,t){return(e=e.split(",")).forEach(t)||e},me=function(e){return Math.round(1e5*e)/1e5||0},pe=function(e){return Math.round(1e7*e)/1e7||0},ge=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),"+"===r?e+i:"-"===r?e-i:"*"===r?e*i:e/i},_e=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},ve=function(){var e,t,r=ie.length,i=ie.slice(0);for(ne={},ie.length=0,e=0;e<r;e++)(t=i[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},ye=function(e,t,r,i){ie.length&&ve(),e.render(t,r,i||a),ie.length&&ve()},Ee=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(z).length<2?t:C(e)?e.trim():e},Te=function(e){return e},Se=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},be=function(e,t){for(var r in t)e[r]=t[r];return e},Ae=function e(t,r){for(var i in r)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=M(r[i])?e(t[i]||(t[i]={}),r[i]):r[i]);return t},Re=function(e,t){var r,i={};for(r in e)r in t||(i[r]=e[r]);return i},we=function(e){var t,r=e.parent||l,i=e.keyframes?(t=U(e.keyframes),function(e,r){for(var i in r)i in e||"duration"===i&&t||"ease"===i||(e[i]=r[i])}):Se;if(x(e.inherit))for(;r;)i(e,r.vars.defaults),r=r.parent||r._dp;return e},Ie=function(e,t,r,i,n){void 0===r&&(r="_first"),void 0===i&&(i="_last");var s,a=e[i];if(n)for(s=t[n];a&&a[n]>s;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},Fe=function(e,t,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var n=t._prev,s=t._next;n?n._next=s:e[r]===t&&(e[r]=s),s?s._prev=n:e[i]===t&&(e[i]=n),t._next=t._prev=t.parent=null},Le=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Ce=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},Pe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Oe=function(e,t,r,i){return e._startAt&&(a?e._startAt.revert(te):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},De=function e(t){return!t||t._ts&&e(t.parent)},Me=function(e){return e._repeat?xe(e._tTime,e=e.duration()+e._rDelay)*e:0},xe=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},Ne=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Be=function(e){return e._end=pe(e._start+(e._tDur/Math.abs(e._ts||e._rts||b)||0))},ke=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=pe(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Be(e),r._dirty||Ce(r,e)),e},Ue=function(e,t){var r;if((t._time||t._initted&&!t._dur)&&(r=Ne(e.rawTime(),t),(!t._dur||Ze(0,t.totalDuration(),r)-t._tTime>b)&&t.render(r,!0)),Ce(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},Ge=function(e,t,r,i){return t.parent&&Le(t),t._start=pe((O(r)?r:r||e!==l?Ye(e,r,t):e._time)+t._delay),t._end=pe(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Ie(e,t,"_first","_last",e._sort?"_start":0),We(t)||(e._recent=t),i||Ue(e,t),e._ts<0&&ke(e,e._tTime),e},He=function(e,t){return(q.ScrollTrigger||X("scrollTrigger",t))&&q.ScrollTrigger.create(t,e)},Ve=function(e,t,r,i){return zt(e,t),e._initted?!r&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&d!==At.frame?(ie.push(e),e._lazy=[t,i],1):void 0:1},je=function e(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||e(r))},We=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},ze=function(e,t,r,i){var n=e._repeat,s=pe(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=s/e._dur),e._dur=s,e._tDur=n?n<0?1e10:pe(s*(n+1)+e._rDelay*n):s,a>0&&!i?ke(e,e._tTime=e._tDur*a):e.parent&&Be(e),r||Ce(e.parent,e),e},$e=function(e){return e instanceof Ut?Ce(e):ze(e,e._dur)},qe={_start:0,endTime:J,totalDuration:J},Ye=function e(t,r,i){var n,s,a,o=t.labels,l=t._recent||qe,u=t.duration()>=S?l.endTime(!1):t._dur;return C(r)&&(isNaN(r)||r in o)?(s=r.charAt(0),a="%"===r.substr(-1),n=r.indexOf("="),"<"===s||">"===s?(n>=0&&(r=r.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(r.substr(1))||0)*(a?(n<0?l:i).totalDuration()/100:1)):n<0?(r in o||(o[r]=u),o[r]):(s=parseFloat(r.charAt(n-1)+r.substr(n+1)),a&&i&&(s=s/100*(U(i)?i[0]:i).totalDuration()),n>1?e(t,r.substr(0,n-1),i)+s:u+s)):null==r?u:+r},Ke=function(e,t,r){var i,n,s=O(t[1]),a=(s?2:1)+(e<2?0:1),o=t[a];if(s&&(o.duration=t[1]),o.parent=r,e){for(i=o,n=r;n&&!("immediateRender"in i);)i=n.vars.defaults||{},n=x(n.vars.inherit)&&n.parent;o.immediateRender=x(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new Xt(t[0],o,t[a+1])},Xe=function(e,t){return e||0===e?t(e):t},Ze=function(e,t,r){return r<e?e:r>t?t:r},Qe=function(e,t){return C(e)&&(t=$.exec(e))?t[1]:""},Je=[].slice,et=function(e,t){return e&&M(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&M(e[0]))&&!e.nodeType&&e!==u},tt=function(e,t,r){return o&&!t&&o.selector?o.selector(e):!C(e)||r||!h&&Rt()?U(e)?function(e,t,r){return void 0===r&&(r=[]),e.forEach((function(e){var i;return C(e)&&!t||et(e,1)?(i=r).push.apply(i,tt(e)):r.push(e)}))||r}(e,r):et(e)?Je.call(e,0):e?[e]:[]:Je.call((t||f).querySelectorAll(e),0)},rt=function(e){return e=tt(e)[0]||Z("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return tt(t,r.querySelectorAll?r:r===e?Z("Invalid scope")||f.createElement("div"):e)}},it=function(e){return e.sort((function(){return.5-Math.random()}))},nt=function(e){if(P(e))return e;var t=M(e)?e:{each:e},r=Ot(t.ease),i=t.from||0,n=parseFloat(t.base)||0,s={},a=i>0&&i<1,o=isNaN(i)||a,l=t.axis,u=i,h=i;return C(i)?u=h={center:.5,edges:.5,end:1}[i]||0:!a&&o&&(u=i[0],h=i[1]),function(e,a,f){var c,d,m,p,g,_,v,y,E,T=(f||t).length,b=s[T];if(!b){if(!(E="auto"===t.grid?0:(t.grid||[1,S])[1])){for(v=-S;v<(v=f[E++].getBoundingClientRect().left)&&E<T;);E--}for(b=s[T]=[],c=o?Math.min(E,T)*u-.5:i%E,d=E===S?0:o?T*h/E-.5:i/E|0,v=0,y=S,_=0;_<T;_++)m=_%E-c,p=d-(_/E|0),b[_]=g=l?Math.abs("y"===l?p:m):I(m*m+p*p),g>v&&(v=g),g<y&&(y=g);"random"===i&&it(b),b.max=v-y,b.min=y,b.v=T=(parseFloat(t.amount)||parseFloat(t.each)*(E>T?T-1:l?"y"===l?T/E:E:Math.max(E,T/E))||0)*("edges"===i?-1:1),b.b=T<0?n-T:n,b.u=Qe(t.amount||t.each)||0,r=r&&T<0?Ct(r):r}return T=(b[e]-b.min)/b.max||0,pe(b.b+(r?r(T):T)*b.v)+b.u}},st=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=pe(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(O(r)?0:Qe(r))}},at=function(e,t){var r,i,n=U(e);return!n&&M(e)&&(r=n=e.radius||S,e.values?(e=tt(e.values),(i=!O(e[0]))&&(r*=r)):e=st(e.increment)),Xe(t,n?P(e)?function(t){return i=e(t),Math.abs(i-t)<=r?i:t}:function(t){for(var n,s,a=parseFloat(i?t.x:t),o=parseFloat(i?t.y:0),l=S,u=0,h=e.length;h--;)(n=i?(n=e[h].x-a)*n+(s=e[h].y-o)*s:Math.abs(e[h]-a))<l&&(l=n,u=h);return u=!r||l<=r?e[u]:t,i||u===t||O(t)?u:u+Qe(t)}:st(e))},ot=function(e,t,r,i){return Xe(U(e)?!t:!0===r?!!(r=0):!i,(function(){return U(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+.99*r))/r)*r*i)/i}))},lt=function(e,t,r){return Xe(r,(function(r){return e[~~t(r)]}))},ut=function(e){for(var t,r,i,n,s=0,a="";~(t=e.indexOf("random(",s));)i=e.indexOf(")",t),n="["===e.charAt(t+7),r=e.substr(t+7,i-t-7).match(n?z:G),a+=e.substr(s,t-s)+ot(n?r:+r[0],n?0:+r[1],+r[2]||1e-5),s=i+1;return a+e.substr(s,e.length-s)},ht=function(e,t,r,i,n){var s=t-e,a=i-r;return Xe(n,(function(t){return r+((t-e)/s*a||0)}))},ft=function(e,t,r){var i,n,s,a=e.labels,o=S;for(i in a)(n=a[i]-t)<0==!!r&&n&&o>(n=Math.abs(n))&&(s=i,o=n);return s},ct=function(e,t,r){var i,n,s,a=e.vars,l=a[t],u=o,h=e._ctx;if(l)return i=a[t+"Params"],n=a.callbackScope||e,r&&ie.length&&ve(),h&&(o=h),s=i?l.apply(n,i):l.call(n),o=u,s},dt=function(e){return Le(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&ct(e,"onInterrupt"),e},mt=function(e){var t=(e=!e.name&&e.default||e).name,r=P(e),i=t&&!r&&e.init?function(){this._props=[]}:e,n={init:J,render:sr,add:jt,kill:or,modifier:ar,rawVars:0},s={targetTest:0,get:0,getSetter:tr,aliases:{},register:0};if(Rt(),e!==i){if(se[t])return;Se(i,Se(Re(e,n),s)),be(i.prototype,be(n,Re(e,s))),se[i.prop=t]=i,e.targetTest&&(le.push(i),re[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Q(t,i),e.register&&e.register(Sr,i,hr)},pt=255,gt={aqua:[0,pt,pt],lime:[0,pt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,pt],navy:[0,0,128],white:[pt,pt,pt],olive:[128,128,0],yellow:[pt,pt,0],orange:[pt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[pt,0,0],pink:[pt,192,203],cyan:[0,pt,pt],transparent:[pt,pt,pt,0]},_t=function(e,t,r){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(r-t)*e*6:e<.5?r:3*e<2?t+(r-t)*(2/3-e)*6:t)*pt+.5|0},vt=function(e,t,r){var i,n,s,a,o,l,u,h,f,c,d=e?O(e)?[e>>16,e>>8&pt,e&pt]:0:gt.black;if(!d){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),gt[e])d=gt[e];else if("#"===e.charAt(0)){if(e.length<6&&(i=e.charAt(1),n=e.charAt(2),s=e.charAt(3),e="#"+i+i+n+n+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(d=parseInt(e.substr(1,6),16))>>16,d>>8&pt,d&pt,parseInt(e.substr(7),16)/255];d=[(e=parseInt(e.substr(1),16))>>16,e>>8&pt,e&pt]}else if("hsl"===e.substr(0,3))if(d=c=e.match(G),t){if(~e.indexOf("="))return d=e.match(H),r&&d.length<4&&(d[3]=1),d}else a=+d[0]%360/360,o=+d[1]/100,i=2*(l=+d[2]/100)-(n=l<=.5?l*(o+1):l+o-l*o),d.length>3&&(d[3]*=1),d[0]=_t(a+1/3,i,n),d[1]=_t(a,i,n),d[2]=_t(a-1/3,i,n);else d=e.match(G)||gt.transparent;d=d.map(Number)}return t&&!c&&(i=d[0]/pt,n=d[1]/pt,s=d[2]/pt,l=((u=Math.max(i,n,s))+(h=Math.min(i,n,s)))/2,u===h?a=o=0:(f=u-h,o=l>.5?f/(2-u-h):f/(u+h),a=u===i?(n-s)/f+(n<s?6:0):u===n?(s-i)/f+2:(i-n)/f+4,a*=60),d[0]=~~(a+.5),d[1]=~~(100*o+.5),d[2]=~~(100*l+.5)),r&&d.length<4&&(d[3]=1),d},yt=function(e){var t=[],r=[],i=-1;return e.split(Tt).forEach((function(e){var n=e.match(V)||[];t.push.apply(t,n),r.push(i+=n.length+1)})),t.c=r,t},Et=function(e,t,r){var i,n,s,a,o="",l=(e+o).match(Tt),u=t?"hsla(":"rgba(",h=0;if(!l)return e;if(l=l.map((function(e){return(e=vt(e,t,1))&&u+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),r&&(s=yt(e),(i=r.c).join(o)!==s.c.join(o)))for(a=(n=e.replace(Tt,"1").split(V)).length-1;h<a;h++)o+=n[h]+(~i.indexOf(h)?l.shift()||u+"0,0,0,0)":(s.length?s:l.length?l:r).shift());if(!n)for(a=(n=e.split(Tt)).length-1;h<a;h++)o+=n[h]+l[h];return o+n[a]},Tt=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in gt)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),St=/hsl[a]?\(/,bt=function(e){var t,r=e.join(" ");if(Tt.lastIndex=0,Tt.test(r))return t=St.test(r),e[1]=Et(e[1],t),e[0]=Et(e[0],t,yt(e[1])),!0},At=function(){var e,t,r,i,n,s,a=Date.now,o=500,l=33,d=a(),m=d,g=1e3/240,_=g,v=[],y=function r(u){var h,f,c,p,y=a()-m,E=!0===u;if(y>o&&(d+=y-l),((h=(c=(m+=y)-d)-_)>0||E)&&(p=++i.frame,n=c-1e3*i.time,i.time=c/=1e3,_+=h+(h>=g?4:g-h),f=1),E||(e=t(r)),f)for(s=0;s<v.length;s++)v[s](c,n,p,u)};return i={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(e){return n/(1e3/(e||60))},wake:function(){c&&(!h&&N()&&(u=h=window,f=u.document||{},q.gsap=Sr,(u.gsapVersions||(u.gsapVersions=[])).push(Sr.version),K(Y||u.GreenSockGlobals||!u.gsap&&u||{}),r=u.requestAnimationFrame),e&&i.sleep(),t=r||function(e){return setTimeout(e,_-1e3*i.time+1|0)},p=1,y(2))},sleep:function(){(r?u.cancelAnimationFrame:clearTimeout)(e),p=0,t=J},lagSmoothing:function(e,t){o=e||1e8,l=Math.min(t,o,0)},fps:function(e){g=1e3/(e||240),_=1e3*i.time+g},add:function(e,t,r){var n=t?function(t,r,s,a){e(t,r,s,a),i.remove(n)}:e;return i.remove(e),v[r?"unshift":"push"](n),Rt(),n},remove:function(e,t){~(t=v.indexOf(e))&&v.splice(t,1)&&s>=t&&s--},_listeners:v}}(),Rt=function(){return!p&&At.wake()},wt={},It=/^[\d.\-M][\d.\-,\s]/,Ft=/["']/g,Lt=function(e){for(var t,r,i,n={},s=e.substr(1,e.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)r=s[o],t=o!==l-1?r.lastIndexOf(","):r.length,i=r.substr(0,t),n[a]=isNaN(i)?i.replace(Ft,"").trim():+i,a=r.substr(t+1).trim();return n},Ct=function(e){return function(t){return 1-e(1-t)}},Pt=function e(t,r){for(var i,n=t._first;n;)n instanceof Ut?e(n,r):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===r||(n.timeline?e(n.timeline,r):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=r)),n=n._next},Ot=function(e,t){return e&&(P(e)?e:wt[e]||function(e){var t,r,i,n,s=(e+"").split("("),a=wt[s[0]];return a&&s.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[Lt(s[1])]:(t=e,r=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",r),t.substring(r,~n&&n<i?t.indexOf(")",i+1):i)).split(",").map(Ee)):wt._CE&&It.test(e)?wt._CE("",e):a}(e))||t},Dt=function(e,t,r,i){void 0===r&&(r=function(e){return 1-t(1-e)}),void 0===i&&(i=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var n,s={easeIn:t,easeOut:r,easeInOut:i};return de(e,(function(e){for(var t in wt[e]=q[e]=s,wt[n=e.toLowerCase()]=r,s)wt[n+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=wt[e+"."+t]=s[t]})),s},Mt=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},xt=function e(t,r,i){var n=r>=1?r:1,s=(i||(t?.3:.45))/(r<1?r:1),a=s/A*(Math.asin(1/n)||0),o=function(e){return 1===e?1:n*Math.pow(2,-10*e)*L((e-a)*s)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:Mt(o);return s=A/s,l.config=function(r,i){return e(t,r,i)},l},Nt=function e(t,r){void 0===r&&(r=1.70158);var i=function(e){return e?--e*e*((r+1)*e+r)+1:0},n="out"===t?i:"in"===t?function(e){return 1-i(1-e)}:Mt(i);return n.config=function(r){return e(t,r)},n};de("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var r=t<5?t+1:t;Dt(e+",Power"+(r-1),t?function(e){return Math.pow(e,r)}:function(e){return e},(function(e){return 1-Math.pow(1-e,r)}),(function(e){return e<.5?Math.pow(2*e,r)/2:1-Math.pow(2*(1-e),r)/2}))})),wt.Linear.easeNone=wt.none=wt.Linear.easeIn,Dt("Elastic",xt("in"),xt("out"),xt()),g=7.5625,v=1/(_=2.75),Dt("Bounce",(function(e){return 1-y(1-e)}),y=function(e){return e<v?g*e*e:e<.7272727272727273?g*Math.pow(e-1.5/_,2)+.75:e<.9090909090909092?g*(e-=2.25/_)*e+.9375:g*Math.pow(e-2.625/_,2)+.984375}),Dt("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Dt("Circ",(function(e){return-(I(1-e*e)-1)})),Dt("Sine",(function(e){return 1===e?1:1-F(e*R)})),Dt("Back",Nt("in"),Nt("out"),Nt()),wt.SteppedEase=wt.steps=q.SteppedEase={config:function(e,t){void 0===e&&(e=1);var r=1/e,i=e+(t?0:1),n=t?1:0;return function(e){return((i*Ze(0,.99999999,e)|0)+n)*r}}},T.ease=wt["quad.out"],de("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return ue+=e+","+e+"Params,"}));var Bt=function(e,t){this.id=w++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ce,this.set=t?t.getSetter:tr},kt=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ze(this,+e.duration,1,1),this.data=e.data,o&&(this._ctx=o,o.data.push(this)),p||At.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,ze(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(Rt(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(ke(this,e),!r._dp||r.parent||Ue(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Ge(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===b||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),ye(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Me(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Me(this),t):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(e,t){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*r,t):this._repeat?xe(this._tTime,r)+1:1},t.timeScale=function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?Ne(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(Ze(-this._delay,this._tDur,t),!0),Be(this),Pe(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Rt(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==b&&(this._tTime-=b)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Ge(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(x(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ne(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=te);var t=a;return a=e,this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents),"nested"!==this.data&&Le(this),a=t,this},t.globalTime=function(e){for(var t=this,r=arguments.length?e:t.rawTime();t;)r=t._start+r/(t._ts||1),t=t._dp;return!this.parent&&this.vars.immediateRender?-1:r},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,$e(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,$e(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(Ye(this,e),x(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,x(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,r=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=r&&e<this.endTime(!0)-b))},t.eventCallback=function(e,t,r){var i=this.vars;return arguments.length>1?(t?(i[e]=t,r&&(i[e+"Params"]=r),"onUpdate"===e&&(this._onUpdate=t)):delete i[e],this):i[e]},t.then=function(e){var t=this;return new Promise((function(r){var i=P(e)?e:Te,n=function(){var e=t.then;t.then=null,P(i)&&(i=i(t))&&(i.then||i===t)&&(t.then=e),r(i),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?n():t._prom=n}))},t.kill=function(){dt(this)},e}();Se(kt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ut=function(e){function t(t,r){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).labels={},n.smoothChildTiming=!!t.smoothChildTiming,n.autoRemoveChildren=!!t.autoRemoveChildren,n._sort=x(t.sortChildren),l&&Ge(t.parent||l,i(n),r),t.reversed&&n.reverse(),t.paused&&n.paused(!0),t.scrollTrigger&&He(i(n),t.scrollTrigger),n}n(t,e);var r=t.prototype;return r.to=function(e,t,r){return Ke(0,arguments,this),this},r.from=function(e,t,r){return Ke(1,arguments,this),this},r.fromTo=function(e,t,r,i){return Ke(2,arguments,this),this},r.set=function(e,t,r){return t.duration=0,t.parent=this,we(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Xt(e,t,Ye(this,r),1),this},r.call=function(e,t,r){return Ge(this,Xt.delayedCall(0,e,t),r)},r.staggerTo=function(e,t,r,i,n,s,a){return r.duration=t,r.stagger=r.stagger||i,r.onComplete=s,r.onCompleteParams=a,r.parent=this,new Xt(e,r,Ye(this,n)),this},r.staggerFrom=function(e,t,r,i,n,s,a){return r.runBackwards=1,we(r).immediateRender=x(r.immediateRender),this.staggerTo(e,t,r,i,n,s,a)},r.staggerFromTo=function(e,t,r,i,n,s,a,o){return i.startAt=r,we(i).immediateRender=x(i.immediateRender),this.staggerTo(e,t,i,n,s,a,o)},r.render=function(e,t,r){var i,n,s,o,u,h,f,c,d,m,p,g,_=this._time,v=this._dirty?this.totalDuration():this._tDur,y=this._dur,E=e<=0?0:pe(e),T=this._zTime<0!=e<0&&(this._initted||!y);if(this!==l&&E>v&&e>=0&&(E=v),E!==this._tTime||r||T){if(_!==this._time&&y&&(E+=this._time-_,e+=this._time-_),i=E,d=this._start,h=!(c=this._ts),T&&(y||(_=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,u=y+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*u+e,t,r);if(i=pe(E%u),E===v?(o=this._repeat,i=y):((o=~~(E/u))&&o===E/u&&(i=y,o--),i>y&&(i=y)),m=xe(this._tTime,u),!_&&this._tTime&&m!==o&&(m=o),p&&1&o&&(i=y-i,g=1),o!==m&&!this._lock){var S=p&&1&m,A=S===(p&&1&o);if(o<m&&(S=!S),_=S?0:y,this._lock=1,this.render(_||(g?0:pe(o*u)),t,!y)._lock=0,this._tTime=E,!t&&this.parent&&ct(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),_&&_!==this._time||h!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(y=this._dur,v=this._tDur,A&&(this._lock=2,_=S?y:-1e-4,this.render(_,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!h)return this;Pt(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(f=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if("isPause"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if("isPause"===i.data&&i._start<t)return i;i=i._prev}}(this,pe(_),pe(i)),f&&(E-=i-(i=f._start))),this._tTime=E,this._time=i,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,_=0),!_&&i&&!t&&(ct(this,"onStart"),this._tTime!==E))return this;if(i>=_&&e>=0)for(n=this._first;n;){if(s=n._next,(n._act||i>=n._start)&&n._ts&&f!==n){if(n.parent!==this)return this.render(e,t,r);if(n.render(n._ts>0?(i-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(i-n._start)*n._ts,t,r),i!==this._time||!this._ts&&!h){f=0,s&&(E+=this._zTime=-1e-8);break}}n=s}else{r=r||a,n=this._last;for(var R=e<0?e:i;n;){if(s=n._prev,(n._act||R<=n._end)&&n._ts&&f!==n){if(n.parent!==this)return this.render(e,t,r);if(n.render(n._ts>0?(R-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(R-n._start)*n._ts,t,r),i!==this._time||!this._ts&&!h){f=0,s&&(E+=this._zTime=R?-1e-8:b);break}}n=s}}if(f&&!t&&(this.pause(),f.render(i>=_?0:-1e-8)._zTime=i>=_?1:-1,this._ts))return this._start=d,Be(this),this.render(e,t,r);this._onUpdate&&!t&&ct(this,"onUpdate",!0),(E===v&&this._tTime>=this.totalDuration()||!E&&_)&&(d!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((e||!y)&&(E===v&&this._ts>0||!E&&this._ts<0)&&Le(this,1),t||e<0&&!_||!E&&!_&&v||(ct(this,E===v&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(E<v&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(e,t){var r=this;if(O(t)||(t=Ye(this,t,e)),!(e instanceof kt)){if(U(e))return e.forEach((function(e){return r.add(e,t)})),this;if(C(e))return this.addLabel(e,t);if(!P(e))return this;e=Xt.delayedCall(0,e)}return this!==e?Ge(this,e,t):this},r.getChildren=function(e,t,r,i){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===i&&(i=-S);for(var n=[],s=this._first;s;)s._start>=i&&(s instanceof Xt?t&&n.push(s):(r&&n.push(s),e&&n.push.apply(n,s.getChildren(!0,t,r)))),s=s._next;return n},r.getById=function(e){for(var t=this.getChildren(1,1,1),r=t.length;r--;)if(t[r].vars.id===e)return t[r]},r.remove=function(e){return C(e)?this.removeLabel(e):P(e)?this.killTweensOf(e):(Fe(this,e),e===this._recent&&(this._recent=this._last),Ce(this))},r.totalTime=function(t,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=pe(At.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,r),this._forcing=0,this):this._tTime},r.addLabel=function(e,t){return this.labels[e]=Ye(this,t),this},r.removeLabel=function(e){return delete this.labels[e],this},r.addPause=function(e,t,r){var i=Xt.delayedCall(0,t||J,r);return i.data="isPause",this._hasPause=1,Ge(this,i,Ye(this,e))},r.removePause=function(e){var t=this._first;for(e=Ye(this,e);t;)t._start===e&&"isPause"===t.data&&Le(t),t=t._next},r.killTweensOf=function(e,t,r){for(var i=this.getTweensOf(e,r),n=i.length;n--;)Gt!==i[n]&&i[n].kill(e,t);return this},r.getTweensOf=function(e,t){for(var r,i=[],n=tt(e),s=this._first,a=O(t);s;)s instanceof Xt?_e(s._targets,n)&&(a?(!Gt||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&i.push(s):(r=s.getTweensOf(n,t)).length&&i.push.apply(i,r),s=s._next;return i},r.tweenTo=function(e,t){t=t||{};var r,i=this,n=Ye(i,e),s=t,a=s.startAt,o=s.onStart,l=s.onStartParams,u=s.immediateRender,h=Xt.to(i,Se({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:t.duration||Math.abs((n-(a&&"time"in a?a.time:i._time))/i.timeScale())||b,onStart:function(){if(i.pause(),!r){var e=t.duration||Math.abs((n-(a&&"time"in a?a.time:i._time))/i.timeScale());h._dur!==e&&ze(h,e,0,1).render(h._time,!0,!0),r=1}o&&o.apply(h,l||[])}},t));return u?h.render(0):h},r.tweenFromTo=function(e,t,r){return this.tweenTo(t,Se({startAt:{time:Ye(this,e)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(e){return void 0===e&&(e=this._time),ft(this,Ye(this,e))},r.previousLabel=function(e){return void 0===e&&(e=this._time),ft(this,Ye(this,e),1)},r.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+b)},r.shiftChildren=function(e,t,r){void 0===r&&(r=0);for(var i,n=this._first,s=this.labels;n;)n._start>=r&&(n._start+=e,n._end+=e),n=n._next;if(t)for(i in s)s[i]>=r&&(s[i]+=e);return Ce(this)},r.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},r.clear=function(e){void 0===e&&(e=!0);for(var t,r=this._first;r;)t=r._next,this.remove(r),r=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Ce(this)},r.totalDuration=function(e){var t,r,i,n=0,s=this,a=s._last,o=S;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(i=s.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(r=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,Ge(s,a,r-a._delay,1)._lock=0):o=r,r<0&&a._ts&&(n-=r,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=r/s._ts,s._time-=r,s._tTime-=r),s.shiftChildren(-r,!1,-Infinity),o=0),a._end>n&&a._ts&&(n=a._end),a=t;ze(s,s===l&&s._time>n?s._time:n,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(l._ts&&(ye(l,Ne(e,l)),d=At.frame),At.frame>=oe){oe+=E.autoSleep||120;var t=l._first;if((!t||!t._ts)&&E.autoSleep&&At._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||At.sleep()}}},t}(kt);Se(Ut.prototype,{_lock:0,_hasPause:0,_forcing:0});var Gt,Ht,Vt=function(e,t,r,i,n,s,a){var o,l,u,h,f,c,d,m,p=new hr(this._pt,e,t,0,1,nr,null,n),g=0,_=0;for(p.b=r,p.e=i,r+="",(d=~(i+="").indexOf("random("))&&(i=ut(i)),s&&(s(m=[r,i],e,t),r=m[0],i=m[1]),l=r.match(j)||[];o=j.exec(i);)h=o[0],f=i.substring(g,o.index),u?u=(u+1)%5:"rgba("===f.substr(-5)&&(u=1),h!==l[_++]&&(c=parseFloat(l[_-1])||0,p._pt={_next:p._pt,p:f||1===_?f:",",s:c,c:"="===h.charAt(1)?ge(c,h)-c:parseFloat(h)-c,m:u&&u<4?Math.round:0},g=j.lastIndex);return p.c=g<i.length?i.substring(g,i.length):"",p.fp=a,(W.test(i)||d)&&(p.e=0),this._pt=p,p},jt=function(e,t,r,i,n,s,a,o,l,u){P(i)&&(i=i(n||0,e,s));var h,f=e[t],c="get"!==r?r:P(f)?l?e[t.indexOf("set")||!P(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():f,d=P(f)?l?Jt:Qt:Zt;if(C(i)&&(~i.indexOf("random(")&&(i=ut(i)),"="===i.charAt(1)&&((h=ge(c,i)+(Qe(c)||0))||0===h)&&(i=h)),!u||c!==i||Ht)return isNaN(c*i)||""===i?(!f&&!(t in e)&&X(t,i),Vt.call(this,e,t,c,i,d,o||E.stringFilter,l)):(h=new hr(this._pt,e,t,+c||0,i-(c||0),"boolean"==typeof f?ir:rr,0,d),l&&(h.fp=l),a&&h.modifier(a,this,e),this._pt=h)},Wt=function(e,t,r,i,n,s){var a,o,l,u;if(se[e]&&!1!==(a=new se[e]).init(n,a.rawVars?t[e]:function(e,t,r,i,n){if(P(e)&&(e=qt(e,n,t,r,i)),!M(e)||e.style&&e.nodeType||U(e)||k(e))return C(e)?qt(e,n,t,r,i):e;var s,a={};for(s in e)a[s]=qt(e[s],n,t,r,i);return a}(t[e],i,n,s,r),r,i,s)&&(r._pt=o=new hr(r._pt,n,e,0,1,a.render,a,0,a.priority),r!==m))for(l=r._ptLookup[r._targets.indexOf(n)],u=a._props.length;u--;)l[a._props[u]]=o;return a},zt=function e(t,r){var i,n,o,u,h,f,c,d,m,p,g,_,v,y=t.vars,E=y.ease,A=y.startAt,R=y.immediateRender,w=y.lazy,I=y.onUpdate,F=y.onUpdateParams,L=y.callbackScope,C=y.runBackwards,P=y.yoyoEase,O=y.keyframes,D=y.autoRevert,M=t._dur,N=t._startAt,B=t._targets,k=t.parent,U=k&&"nested"===k.data?k.parent._targets:B,G="auto"===t._overwrite&&!s,H=t.timeline;if(H&&(!O||!E)&&(E="none"),t._ease=Ot(E,T.ease),t._yEase=P?Ct(Ot(!0===P?E:P,T.ease)):0,P&&t._yoyo&&!t._repeat&&(P=t._yEase,t._yEase=t._ease,t._ease=P),t._from=!H&&!!y.runBackwards,!H||O&&!y.stagger){if(_=(d=B[0]?fe(B[0]).harness:0)&&y[d.prop],i=Re(y,re),N&&(N.revert(C&&M?te:ee),N._lazy=0),A){if(Le(t._startAt=Xt.set(B,Se({data:"isStart",overwrite:!1,parent:k,immediateRender:!0,lazy:x(w),startAt:null,delay:0,onUpdate:I,onUpdateParams:F,callbackScope:L,stagger:0},A))),r<0&&(a||!R&&!D)&&t._startAt.revert(te),R&&M&&r<=0)return void(r&&(t._zTime=r))}else if(C&&M&&!N)if(r&&(R=!1),o=Se({overwrite:!1,data:"isFromStart",lazy:R&&x(w),immediateRender:R,stagger:0,parent:k},i),_&&(o[d.prop]=_),Le(t._startAt=Xt.set(B,o)),r<0&&(a?t._startAt.revert(te):t._startAt.render(-1,!0)),t._zTime=r,R){if(!r)return}else e(t._startAt,b);for(t._pt=t._ptCache=0,w=M&&x(w)||w&&!M,n=0;n<B.length;n++){if(c=(h=B[n])._gsap||he(B)[n]._gsap,t._ptLookup[n]=p={},ne[c.id]&&ie.length&&ve(),g=U===B?n:U.indexOf(h),d&&!1!==(m=new d).init(h,_||i,t,g,U)&&(t._pt=u=new hr(t._pt,h,m.name,0,1,m.render,m,0,m.priority),m._props.forEach((function(e){p[e]=u})),m.priority&&(f=1)),!d||_)for(o in i)se[o]&&(m=Wt(o,i,t,g,h,U))?m.priority&&(f=1):p[o]=u=jt.call(t,h,o,"get",i[o],g,U,0,y.stringFilter);t._op&&t._op[n]&&t.kill(h,t._op[n]),G&&t._pt&&(Gt=t,l.killTweensOf(h,p,t.globalTime(r)),v=!t.parent,Gt=0),t._pt&&w&&(ne[c.id]=1)}f&&ur(t),t._onInit&&t._onInit(t)}t._onUpdate=I,t._initted=(!t._op||t._pt)&&!v,O&&r<=0&&H.render(S,!0,!0)},$t=function(e,t,r,i){var n,s,a=t.ease||i||"power1.inOut";if(U(t))s=r[e]||(r[e]=[]),t.forEach((function(e,r){return s.push({t:r/(t.length-1)*100,v:e,e:a})}));else for(n in t)s=r[n]||(r[n]=[]),"ease"===n||s.push({t:parseFloat(e),v:t[n],e:a})},qt=function(e,t,r,i,n){return P(e)?e.call(t,r,i,n):C(e)&&~e.indexOf("random(")?ut(e):e},Yt=ue+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Kt={};de(Yt+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return Kt[e]=1}));var Xt=function(e){function t(t,r,n,a){var o;"number"==typeof r&&(n.duration=r,r=n,n=null);var u,h,f,c,d,m,p,g,_=(o=e.call(this,a?r:we(r))||this).vars,v=_.duration,y=_.delay,T=_.immediateRender,S=_.stagger,b=_.overwrite,A=_.keyframes,R=_.defaults,w=_.scrollTrigger,I=_.yoyoEase,F=r.parent||l,L=(U(t)||k(t)?O(t[0]):"length"in r)?[t]:tt(t);if(o._targets=L.length?he(L):Z("GSAP target "+t+" not found. https://greensock.com",!E.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=b,A||S||B(v)||B(y)){if(r=o.vars,(u=o.timeline=new Ut({data:"nested",defaults:R||{}})).kill(),u.parent=u._dp=i(o),u._start=0,S||B(v)||B(y)){if(c=L.length,p=S&&nt(S),M(S))for(d in S)~Yt.indexOf(d)&&(g||(g={}),g[d]=S[d]);for(h=0;h<c;h++)(f=Re(r,Kt)).stagger=0,I&&(f.yoyoEase=I),g&&be(f,g),m=L[h],f.duration=+qt(v,i(o),h,m,L),f.delay=(+qt(y,i(o),h,m,L)||0)-o._delay,!S&&1===c&&f.delay&&(o._delay=y=f.delay,o._start+=y,f.delay=0),u.to(m,f,p?p(h,m,L):0),u._ease=wt.none;u.duration()?v=y=0:o.timeline=0}else if(A){we(Se(u.vars.defaults,{ease:"none"})),u._ease=Ot(A.ease||r.ease||"none");var C,P,D,N=0;if(U(A))A.forEach((function(e){return u.to(L,e,">")})),u.duration();else{for(d in f={},A)"ease"===d||"easeEach"===d||$t(d,A[d],f,A.easeEach);for(d in f)for(C=f[d].sort((function(e,t){return e.t-t.t})),N=0,h=0;h<C.length;h++)(D={ease:(P=C[h]).e,duration:(P.t-(h?C[h-1].t:0))/100*v})[d]=P.v,u.to(L,D,N),N+=D.duration;u.duration()<v&&u.to({},{duration:v-u.duration()})}}v||o.duration(v=u.duration())}else o.timeline=0;return!0!==b||s||(Gt=i(o),l.killTweensOf(L),Gt=0),Ge(F,i(o),n),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(T||!v&&!A&&o._start===pe(F._time)&&x(T)&&De(i(o))&&"nested"!==F.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-y))),w&&He(i(o),w),o}n(t,e);var r=t.prototype;return r.render=function(e,t,r){var i,n,s,o,l,u,h,f,c,d=this._time,m=this._tDur,p=this._dur,g=e<0,_=e>m-b&&!g?m:e<b?0:e;if(p){if(_!==this._tTime||!e||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g){if(i=_,f=this.timeline,this._repeat){if(o=p+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*o+e,t,r);if(i=pe(_%o),_===m?(s=this._repeat,i=p):((s=~~(_/o))&&s===_/o&&(i=p,s--),i>p&&(i=p)),(u=this._yoyo&&1&s)&&(c=this._yEase,i=p-i),l=xe(this._tTime,o),i===d&&!r&&this._initted)return this._tTime=_,this;s!==l&&(f&&this._yEase&&Pt(f,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=r=1,this.render(pe(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(Ve(this,g?e:i,r,t))return this._tTime=0,this;if(d!==this._time)return this;if(p!==this._dur)return this.render(e,t,r)}if(this._tTime=_,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(c||this._ease)(i/p),this._from&&(this.ratio=h=1-h),i&&!d&&!t&&(ct(this,"onStart"),this._tTime!==_))return this;for(n=this._pt;n;)n.r(h,n.d),n=n._next;f&&f.render(e<0?e:!i&&u?-1e-8:f._dur*f._ease(i/this._dur),t,r)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(g&&Oe(this,e,0,r),ct(this,"onUpdate")),this._repeat&&s!==l&&this.vars.onRepeat&&!t&&this.parent&&ct(this,"onRepeat"),_!==this._tDur&&_||this._tTime!==_||(g&&!this._onUpdate&&Oe(this,e,0,!0),(e||!p)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&Le(this,1),t||g&&!d||!_&&!d||(ct(this,_===m?"onComplete":"onReverseComplete",!0),this._prom&&!(_<m&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,r,i){var n,s,o,l=e.ratio,u=t<0||!t&&(!e._start&&je(e)&&(e._initted||!We(e))||(e._ts<0||e._dp._ts<0)&&!We(e))?0:1,h=e._rDelay,f=0;if(h&&e._repeat&&(f=Ze(0,e._tDur,t),s=xe(f,h),e._yoyo&&1&s&&(u=1-u),s!==xe(e._tTime,h)&&(l=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==l||a||i||e._zTime===b||!t&&e._zTime){if(!e._initted&&Ve(e,t,i,r))return;for(o=e._zTime,e._zTime=t||(r?b:0),r||(r=t&&!o),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=f,n=e._pt;n;)n.r(u,n.d),n=n._next;t<0&&Oe(e,t,0,!0),e._onUpdate&&!r&&ct(e,"onUpdate"),f&&e._repeat&&!r&&e.parent&&ct(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===u&&(u&&Le(e,1),r||(ct(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,r);return this},r.targets=function(){return this._targets},r.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},r.resetTo=function(e,t,r,i){p||At.wake(),this._ts||this.play();var n=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||zt(this,n),function(e,t,r,i,n,s,a){var o,l,u,h,f=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!f)for(f=e._ptCache[t]=[],u=e._ptLookup,h=e._targets.length;h--;){if((o=u[h][t])&&o.d&&o.d._pt)for(o=o.d._pt;o&&o.p!==t&&o.fp!==t;)o=o._next;if(!o)return Ht=1,e.vars[t]="+=0",zt(e,a),Ht=0,1;f.push(o)}for(h=f.length;h--;)(o=(l=f[h])._pt||l).s=!i&&0!==i||n?o.s+(i||0)+s*o.c:i,o.c=r-o.s,l.e&&(l.e=me(r)+Qe(l.e)),l.b&&(l.b=o.s+Qe(l.b))}(this,e,t,r,i,this._ease(n/this._dur),n)?this.resetTo(e,t,r,i):(ke(this,0),this.parent||Ie(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?dt(this):this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Gt&&!0!==Gt.vars.overwrite)._first||dt(this),this.parent&&r!==this.timeline.totalDuration()&&ze(this,this._dur*this.timeline._tDur/r,0,1),this}var i,n,s,a,o,l,u,h=this._targets,f=e?tt(e):h,c=this._ptLookup,d=this._pt;if((!t||"all"===t)&&function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0}(h,f))return"all"===t&&(this._pt=0),dt(this);for(i=this._op=this._op||[],"all"!==t&&(C(t)&&(o={},de(t,(function(e){return o[e]=1})),t=o),t=function(e,t){var r,i,n,s,a=e[0]?fe(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(i in r=be({},t),o)if(i in r)for(n=(s=o[i].split(",")).length;n--;)r[s[n]]=r[i];return r}(h,t)),u=h.length;u--;)if(~f.indexOf(h[u]))for(o in n=c[u],"all"===t?(i[u]=t,a=n,s={}):(s=i[u]=i[u]||{},a=t),a)(l=n&&n[o])&&("kill"in l.d&&!0!==l.d.kill(o)||Fe(this,l,"_pt"),delete n[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&d&&dt(this),this},t.to=function(e,r){return new t(e,r,arguments[2])},t.from=function(e,t){return Ke(1,arguments)},t.delayedCall=function(e,r,i,n){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:r,onReverseComplete:r,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},t.fromTo=function(e,t,r){return Ke(2,arguments)},t.set=function(e,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(e,r)},t.killTweensOf=function(e,t,r){return l.killTweensOf(e,t,r)},t}(kt);Se(Xt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),de("staggerTo,staggerFrom,staggerFromTo",(function(e){Xt[e]=function(){var t=new Ut,r=Je.call(arguments,0);return r.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,r)}}));var Zt=function(e,t,r){return e[t]=r},Qt=function(e,t,r){return e[t](r)},Jt=function(e,t,r,i){return e[t](i.fp,r)},er=function(e,t,r){return e.setAttribute(t,r)},tr=function(e,t){return P(e[t])?Qt:D(e[t])&&e.setAttribute?er:Zt},rr=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},ir=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},nr=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round(1e4*(r.s+r.c*e))/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},sr=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},ar=function(e,t,r,i){for(var n,s=this._pt;s;)n=s._next,s.p===i&&s.modifier(e,t,r),s=n},or=function(e){for(var t,r,i=this._pt;i;)r=i._next,i.p===e&&!i.op||i.op===e?Fe(this,i,"_pt"):i.dep||(t=1),i=r;return!t},lr=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},ur=function(e){for(var t,r,i,n,s=e._pt;s;){for(t=s._next,r=i;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:n)?s._prev._next=s:i=s,(s._next=r)?r._prev=s:n=s,s=t}e._pt=i},hr=function(){function e(e,t,r,i,n,s,a,o,l){this.t=t,this.s=i,this.c=n,this.p=r,this.r=s||rr,this.d=a||this,this.set=o||Zt,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,r){this.mSet=this.mSet||this.set,this.set=lr,this.m=e,this.mt=r,this.tween=t},e}();de(ue+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return re[e]=1})),q.TweenMax=q.TweenLite=Xt,q.TimelineLite=q.TimelineMax=Ut,l=new Ut({sortChildren:!1,defaults:T,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),E.stringFilter=bt;var fr=[],cr={},dr=[],mr=0,pr=function(e){return(cr[e]||dr).map((function(e){return e()}))},gr=function(){var e=Date.now(),t=[];e-mr>2&&(pr("matchMediaInit"),fr.forEach((function(e){var r,i,n,s,a=e.queries,o=e.conditions;for(i in a)(r=u.matchMedia(a[i]).matches)&&(n=1),r!==o[i]&&(o[i]=r,s=1);s&&(e.revert(),n&&t.push(e))})),pr("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e)})),mr=e,pr("matchMedia"))},_r=function(){function e(e,t){this.selector=t&&rt(t),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,r){P(e)&&(r=t,t=e,e=P);var i=this,n=function(){var e,n=o,s=i.selector;return n&&n.data.push(i),r&&(i.selector=rt(r)),o=i,e=t.apply(i,arguments),P(e)&&i._r.push(e),o=n,i.selector=s,i.isReverted=!1,e};return i.last=n,e===P?n(i):e?i[e]=n:n},t.ignore=function(e){var t=o;o=null,e(this),o=t},t.getTweens=function(){var t=[];return this.data.forEach((function(r){return r instanceof e?t.push.apply(t,r.getTweens()):r instanceof Xt&&r._targets[0]!==r.vars.onComplete&&t.push(r)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var r=this;if(e?(this.getTweens().map((function(e){return{g:e.globalTime(0),t:e}})).sort((function(e,t){return t.g-e.g||-1})).forEach((function(t){return t.t.revert(e)})),this.data.forEach((function(t){return!(t instanceof kt)&&t.revert&&t.revert(e)})),this._r.forEach((function(t){return t(e,r)})),this.isReverted=!0):this.data.forEach((function(e){return e.kill&&e.kill()})),this.clear(),t){var i=fr.indexOf(this);~i&&fr.splice(i,1)}},t.revert=function(e){this.kill(e||{})},e}(),vr=function(){function e(e){this.contexts=[],this.scope=e}var t=e.prototype;return t.add=function(e,t,r){M(e)||(e={matches:e});var i,n,s,a=new _r(0,r||this.scope),o=a.conditions={};for(n in this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===n?s=1:(i=u.matchMedia(e[n]))&&(fr.indexOf(a)<0&&fr.push(a),(o[n]=i.matches)&&(s=1),i.addListener?i.addListener(gr):i.addEventListener("change",gr));return s&&t(a),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),yr={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((function(e){return mt(e)}))},timeline:function(e){return new Ut(e)},getTweensOf:function(e,t){return l.getTweensOf(e,t)},getProperty:function(e,t,r,i){C(e)&&(e=tt(e)[0]);var n=fe(e||{}).get,s=r?Te:Ee;return"native"===r&&(r=""),e?t?s((se[t]&&se[t].get||n)(e,t,r,i)):function(t,r,i){return s((se[t]&&se[t].get||n)(e,t,r,i))}:e},quickSetter:function(e,t,r){if((e=tt(e)).length>1){var i=e.map((function(e){return Sr.quickSetter(e,t,r)})),n=i.length;return function(e){for(var t=n;t--;)i[t](e)}}e=e[0]||{};var s=se[t],a=fe(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=s?function(t){var i=new s;m._pt=0,i.init(e,r?t+r:t,m,0,[e]),i.render(1,i),m._pt&&sr(1,m)}:a.set(e,o);return s?l:function(t){return l(e,o,r?t+r:t,a,1)}},quickTo:function(e,t,r){var i,n=Sr.to(e,be(((i={})[t]="+=0.1",i.paused=!0,i),r||{})),s=function(e,r,i){return n.resetTo(t,e,r,i)};return s.tween=n,s},isTweening:function(e){return l.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ot(e.ease,T.ease)),Ae(T,e||{})},config:function(e){return Ae(E,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,n=e.defaults,s=e.extendTimeline;(i||"").split(",").forEach((function(e){return e&&!se[e]&&!q[e]&&Z(t+" effect requires "+e+" plugin.")})),ae[t]=function(e,t,i){return r(tt(e),Se(t||{},n),i)},s&&(Ut.prototype[t]=function(e,r,i){return this.add(ae[t](e,M(r)?r:(i=r)&&{},this),i)})},registerEase:function(e,t){wt[e]=Ot(t)},parseEase:function(e,t){return arguments.length?Ot(e,t):wt},getById:function(e){return l.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,i,n=new Ut(e);for(n.smoothChildTiming=x(e.smoothChildTiming),l.remove(n),n._dp=0,n._time=n._tTime=l._time,r=l._first;r;)i=r._next,!t&&!r._dur&&r instanceof Xt&&r.vars.onComplete===r._targets[0]||Ge(n,r,r._start-r._delay),r=i;return Ge(l,n,0),n},context:function(e,t){return e?new _r(e,t):o},matchMedia:function(e){return new vr(e)},matchMediaRefresh:function(){return fr.forEach((function(e){var t,r,i=e.conditions;for(r in i)i[r]&&(i[r]=!1,t=1);t&&e.revert()}))||gr()},addEventListener:function(e,t){var r=cr[e]||(cr[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=cr[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:function e(t,r,i){var n=r-t;return U(t)?lt(t,e(0,t.length),r):Xe(i,(function(e){return(n+(e-t)%n)%n+t}))},wrapYoyo:function e(t,r,i){var n=r-t,s=2*n;return U(t)?lt(t,e(0,t.length-1),r):Xe(i,(function(e){return t+((e=(s+(e-t)%s)%s||0)>n?s-e:e)}))},distribute:nt,random:ot,snap:at,normalize:function(e,t,r){return ht(e,t,0,1,r)},getUnit:Qe,clamp:function(e,t,r){return Xe(r,(function(r){return Ze(e,t,r)}))},splitColor:vt,toArray:tt,selector:rt,mapRange:ht,pipe:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(r){return e(parseFloat(r))+(t||Qe(r))}},interpolate:function e(t,r,i,n){var s=isNaN(t+r)?0:function(e){return(1-e)*t+e*r};if(!s){var a,o,l,u,h,f=C(t),c={};if(!0===i&&(n=1)&&(i=null),f)t={p:t},r={p:r};else if(U(t)&&!U(r)){for(l=[],u=t.length,h=u-2,o=1;o<u;o++)l.push(e(t[o-1],t[o]));u--,s=function(e){e*=u;var t=Math.min(h,~~e);return l[t](e-t)},i=r}else n||(t=be(U(t)?[]:{},t));if(!l){for(a in r)jt.call(c,t,a,"get",r[a]);s=function(e){return sr(e,c)||(f?t.p:t)}}}return Xe(i,s)},shuffle:it},install:K,effects:ae,ticker:At,updateRoot:Ut.updateRoot,plugins:se,globalTimeline:l,core:{PropTween:hr,globals:Q,Tween:Xt,Timeline:Ut,Animation:kt,getCache:fe,_removeLinkedListItem:Fe,reverting:function(){return a},context:function(e){return e&&o&&(o.data.push(e),e._ctx=o),o},suppressOverwrites:function(e){return s=e}}};de("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return yr[e]=Xt[e]})),At.add(Ut.updateRoot),m=yr.to({},{duration:0});var Er=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Tr=function(e,t){return{name:e,rawVars:1,init:function(e,r,i){i._onInit=function(e){var i,n;if(C(r)&&(i={},de(r,(function(e){return i[e]=1})),r=i),t){for(n in i={},r)i[n]=t(r[n]);r=i}!function(e,t){var r,i,n,s=e._targets;for(r in t)for(i=s.length;i--;)(n=e._ptLookup[i][r])&&(n=n.d)&&(n._pt&&(n=Er(n,r)),n&&n.modifier&&n.modifier(t[r],e,s[i],r))}(e,r)}}}},Sr=yr.registerPlugin({name:"attr",init:function(e,t,r,i,n){var s,a,o;for(s in this.tween=r,t)o=e.getAttribute(s)||"",(a=this.add(e,"setAttribute",(o||0)+"",t[s],i,n,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(e,t){for(var r=t._pt;r;)a?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},Tr("roundProps",st),Tr("modifiers"),Tr("snap",at))||yr;Xt.version=Ut.version=Sr.version="3.11.0",c=1,N()&&Rt();var br,Ar,Rr,wr,Ir,Fr,Lr,Cr,Pr=wt.Power0,Or=wt.Power1,Dr=wt.Power2,Mr=wt.Power3,xr=wt.Power4,Nr=wt.Linear,Br=wt.Quad,kr=wt.Cubic,Ur=wt.Quart,Gr=wt.Quint,Hr=wt.Strong,Vr=wt.Elastic,jr=wt.Back,Wr=wt.SteppedEase,zr=wt.Bounce,$r=wt.Sine,qr=wt.Expo,Yr=wt.Circ,Kr={},Xr=180/Math.PI,Zr=Math.PI/180,Qr=Math.atan2,Jr=/([A-Z])/g,ei=/(left|right|width|margin|padding|x)/i,ti=/[\s,\(]\S/,ri={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ii=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},ni=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},si=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},ai=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},oi=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},li=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},ui=function(e,t,r){return e.style[t]=r},hi=function(e,t,r){return e.style.setProperty(t,r)},fi=function(e,t,r){return e._gsap[t]=r},ci=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},di=function(e,t,r,i,n){var s=e._gsap;s.scaleX=s.scaleY=r,s.renderTransform(n,s)},mi=function(e,t,r,i,n){var s=e._gsap;s[t]=r,s.renderTransform(n,s)},pi="transform",gi=pi+"Origin",_i=function(e){var t=this,r=this.target,i=r.style;if(e in Kr){if(this.tfm=this.tfm||{},"transform"!==e&&(~(e=ri[e]||e).indexOf(",")?e.split(",").forEach((function(e){return t.tfm[e]=xi(r,e)})):this.tfm[e]=r._gsap.x?r._gsap[e]:xi(r,e)),r._gsap.svg&&(this.svg=r.getAttribute(e)||""),this.props.indexOf(pi)>=0)return;e=pi}i&&this.props.push(e,i[e])},vi=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},yi=function(){var e,t,r=this.props,i=this.target,n=i.style,s=i._gsap;for(e=0;e<r.length;e+=2)r[e+1]?n[r[e]]=r[e+1]:n.removeProperty(r[e].replace(Jr,"-$1").toLowerCase());if(this.tfm){for(t in s.svg&&i.setAttribute("transform",this.svg||""),this.tfm)s[t]=this.tfm[t];!(e=Lr())||e.isStart||n[pi]||(vi(n),s.uncache=1)}},Ei=function(e,t){var r={target:e,props:[],revert:yi,save:_i};return t&&t.split(",").forEach((function(e){return r.save(e)})),r},Ti=function(e,t){var r=Ar.createElementNS?Ar.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ar.createElement(e);return r.style?r:Ar.createElement(e)},Si=function e(t,r,i){var n=getComputedStyle(t);return n[r]||n.getPropertyValue(r.replace(Jr,"-$1").toLowerCase())||n.getPropertyValue(r)||!i&&e(t,Ai(r)||r,1)||""},bi="O,Moz,ms,Ms,Webkit".split(","),Ai=function(e,t,r){var i=(t||Ir).style,n=5;if(e in i&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);n--&&!(bi[n]+e in i););return n<0?null:(3===n?"ms":n>=0?bi[n]:"")+e},Ri=function(){"undefined"!=typeof window&&window.document&&(br=window,Ar=br.document,Rr=Ar.documentElement,Ir=Ti("div")||{style:{}},Ti("div"),pi=Ai(pi),gi=pi+"Origin",Ir.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Cr=!!Ai("perspective"),Lr=Sr.core.reverting,wr=1)},wi=function e(t){var r,i=Ti("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(Rr.appendChild(i),i.appendChild(this),this.style.display="block",t)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(r=this._gsapBBox());return n&&(s?n.insertBefore(this,s):n.appendChild(this)),Rr.removeChild(i),this.style.cssText=a,r},Ii=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},Fi=function(e){var t;try{t=e.getBBox()}catch(r){t=wi.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===wi||(t=wi.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+Ii(e,["x","cx","x1"])||0,y:+Ii(e,["y","cy","y1"])||0,width:0,height:0}},Li=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Fi(e))},Ci=function(e,t){if(t){var r=e.style;t in Kr&&t!==gi&&(t=pi),r.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),r.removeProperty(t.replace(Jr,"-$1").toLowerCase())):r.removeAttribute(t)}},Pi=function(e,t,r,i,n,s){var a=new hr(e._pt,t,r,0,1,s?li:oi);return e._pt=a,a.b=i,a.e=n,e._props.push(r),a},Oi={deg:1,rad:1,turn:1},Di={grid:1,flex:1},Mi=function e(t,r,i,n){var s,a,o,l,u=parseFloat(i)||0,h=(i+"").trim().substr((u+"").length)||"px",f=Ir.style,c=ei.test(r),d="svg"===t.tagName.toLowerCase(),m=(d?"client":"offset")+(c?"Width":"Height"),p=100,g="px"===n,_="%"===n;return n===h||!u||Oi[n]||Oi[h]?u:("px"!==h&&!g&&(u=e(t,r,i,"px")),l=t.getCTM&&Li(t),!_&&"%"!==h||!Kr[r]&&!~r.indexOf("adius")?(f[c?"width":"height"]=p+(g?h:n),a=~r.indexOf("adius")||"em"===n&&t.appendChild&&!d?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==Ar&&a.appendChild||(a=Ar.body),(o=a._gsap)&&_&&o.width&&c&&o.time===At.time&&!o.uncache?me(u/o.width*p):((_||"%"===h)&&!Di[Si(a,"display")]&&(f.position=Si(t,"position")),a===t&&(f.position="static"),a.appendChild(Ir),s=Ir[m],a.removeChild(Ir),f.position="absolute",c&&_&&((o=fe(a)).time=At.time,o.width=a[m]),me(g?s*u/p:s&&u?p/s*u:0))):(s=l?t.getBBox()[c?"width":"height"]:t[m],me(_?u/s*p:u/100*s)))},xi=function(e,t,r,i){var n;return wr||Ri(),t in ri&&"transform"!==t&&~(t=ri[t]).indexOf(",")&&(t=t.split(",")[0]),Kr[t]&&"transform"!==t?(n=$i(e,i),n="transformOrigin"!==t?n[t]:n.svg?n.origin:qi(Si(e,gi))+" "+n.zOrigin+"px"):(!(n=e.style[t])||"auto"===n||i||~(n+"").indexOf("calc("))&&(n=Ui[t]&&Ui[t](e,t,r)||Si(e,t)||ce(e,t)||("opacity"===t?1:0)),r&&!~(n+"").trim().indexOf(" ")?Mi(e,t,n,r)+r:n},Ni=function(e,t,r,i){if(!r||"none"===r){var n=Ai(t,e,1),s=n&&Si(e,n,1);s&&s!==r?(t=n,r=s):"borderColor"===t&&(r=Si(e,"borderTopColor"))}var a,o,l,u,h,f,c,d,m,p,g,_=new hr(this._pt,e.style,t,0,1,nr),v=0,y=0;if(_.b=r,_.e=i,r+="","auto"==(i+="")&&(e.style[t]=i,i=Si(e,t)||i,e.style[t]=r),bt(a=[r,i]),i=a[1],l=(r=a[0]).match(V)||[],(i.match(V)||[]).length){for(;o=V.exec(i);)c=o[0],m=i.substring(v,o.index),h?h=(h+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(h=1),c!==(f=l[y++]||"")&&(u=parseFloat(f)||0,g=f.substr((u+"").length),"="===c.charAt(1)&&(c=ge(u,c)+g),d=parseFloat(c),p=c.substr((d+"").length),v=V.lastIndex-p.length,p||(p=p||E.units[t]||g,v===i.length&&(i+=p,_.e+=p)),g!==p&&(u=Mi(e,t,f,p)||0),_._pt={_next:_._pt,p:m||1===y?m:",",s:u,c:d-u,m:h&&h<4||"zIndex"===t?Math.round:0});_.c=v<i.length?i.substring(v,i.length):""}else _.r="display"===t&&"none"===i?li:oi;return W.test(i)&&(_.e=0),this._pt=_,_},Bi={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ki=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r,i,n,s=t.t,a=s.style,o=t.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",i=1;else for(n=(o=o.split(",")).length;--n>-1;)r=o[n],Kr[r]&&(i=1,r="transformOrigin"===r?gi:pi),Ci(s,r);i&&(Ci(s,pi),l&&(l.svg&&s.removeAttribute("transform"),$i(s,1),l.uncache=1,vi(a)))}},Ui={clearProps:function(e,t,r,i,n){if("isFromStart"!==n.data){var s=e._pt=new hr(e._pt,t,r,0,0,ki);return s.u=i,s.pr=-10,s.tween=n,e._props.push(r),1}}},Gi=[1,0,0,1,0,0],Hi={},Vi=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},ji=function(e){var t=Si(e,pi);return Vi(t)?Gi:t.substr(7).match(H).map(me)},Wi=function(e,t){var r,i,n,s,a=e._gsap||fe(e),o=e.style,l=ji(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(n=e.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?Gi:l:(l!==Gi||e.offsetParent||e===Rr||a.svg||(n=o.display,o.display="block",(r=e.parentNode)&&e.offsetParent||(s=1,i=e.nextElementSibling,Rr.appendChild(e)),l=ji(e),n?o.display=n:Ci(e,"display"),s&&(i?r.insertBefore(e,i):r?r.appendChild(e):Rr.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},zi=function(e,t,r,i,n,s){var a,o,l,u=e._gsap,h=n||Wi(e,!0),f=u.xOrigin||0,c=u.yOrigin||0,d=u.xOffset||0,m=u.yOffset||0,p=h[0],g=h[1],_=h[2],v=h[3],y=h[4],E=h[5],T=t.split(" "),S=parseFloat(T[0])||0,b=parseFloat(T[1])||0;r?h!==Gi&&(o=p*v-g*_)&&(l=S*(-g/o)+b*(p/o)-(p*E-g*y)/o,S=S*(v/o)+b*(-_/o)+(_*E-v*y)/o,b=l):(S=(a=Fi(e)).x+(~T[0].indexOf("%")?S/100*a.width:S),b=a.y+(~(T[1]||T[0]).indexOf("%")?b/100*a.height:b)),i||!1!==i&&u.smooth?(y=S-f,E=b-c,u.xOffset=d+(y*p+E*_)-y,u.yOffset=m+(y*g+E*v)-E):u.xOffset=u.yOffset=0,u.xOrigin=S,u.yOrigin=b,u.smooth=!!i,u.origin=t,u.originIsAbsolute=!!r,e.style[gi]="0px 0px",s&&(Pi(s,u,"xOrigin",f,S),Pi(s,u,"yOrigin",c,b),Pi(s,u,"xOffset",d,u.xOffset),Pi(s,u,"yOffset",m,u.yOffset)),e.setAttribute("data-svg-origin",S+" "+b)},$i=function(e,t){var r=e._gsap||new Bt(e);if("x"in r&&!t&&!r.uncache)return r;var i,n,s,a,o,l,u,h,f,c,d,m,p,g,_,v,y,T,S,b,A,R,w,I,F,L,C,P,O,D,M,x,N=e.style,B=r.scaleX<0,k="px",U="deg",G=getComputedStyle(e),H=Si(e,gi)||"0";return i=n=s=l=u=h=f=c=d=0,a=o=1,r.svg=!(!e.getCTM||!Li(e)),G.translate&&("none"===G.translate&&"none"===G.scale&&"none"===G.rotate||(N[pi]=("none"!==G.translate?"translate3d("+(G.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==G.rotate?"rotate("+G.rotate+") ":"")+("none"!==G.scale?"scale("+G.scale.split(" ").join(",")+") ":"")+G[pi]),N.scale=N.rotate=N.translate="none"),g=Wi(e,r.svg),r.svg&&(I=(!r.uncache||"0px 0px"===H)&&!t&&e.getAttribute("data-svg-origin"),zi(e,I||H,!!I||r.originIsAbsolute,!1!==r.smooth,g)),m=r.xOrigin||0,p=r.yOrigin||0,g!==Gi&&(T=g[0],S=g[1],b=g[2],A=g[3],i=R=g[4],n=w=g[5],6===g.length?(a=Math.sqrt(T*T+S*S),o=Math.sqrt(A*A+b*b),l=T||S?Qr(S,T)*Xr:0,(f=b||A?Qr(b,A)*Xr+l:0)&&(o*=Math.abs(Math.cos(f*Zr))),r.svg&&(i-=m-(m*T+p*b),n-=p-(m*S+p*A))):(x=g[6],D=g[7],C=g[8],P=g[9],O=g[10],M=g[11],i=g[12],n=g[13],s=g[14],u=(_=Qr(x,O))*Xr,_&&(I=R*(v=Math.cos(-_))+C*(y=Math.sin(-_)),F=w*v+P*y,L=x*v+O*y,C=R*-y+C*v,P=w*-y+P*v,O=x*-y+O*v,M=D*-y+M*v,R=I,w=F,x=L),h=(_=Qr(-b,O))*Xr,_&&(v=Math.cos(-_),M=A*(y=Math.sin(-_))+M*v,T=I=T*v-C*y,S=F=S*v-P*y,b=L=b*v-O*y),l=(_=Qr(S,T))*Xr,_&&(I=T*(v=Math.cos(_))+S*(y=Math.sin(_)),F=R*v+w*y,S=S*v-T*y,w=w*v-R*y,T=I,R=F),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,h=180-h),a=me(Math.sqrt(T*T+S*S+b*b)),o=me(Math.sqrt(w*w+x*x)),_=Qr(R,w),f=Math.abs(_)>2e-4?_*Xr:0,d=M?1/(M<0?-M:M):0),r.svg&&(I=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!Vi(Si(e,pi)),I&&e.setAttribute("transform",I))),Math.abs(f)>90&&Math.abs(f)<270&&(B?(a*=-1,f+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,f+=f<=0?180:-180)),t=t||r.uncache,r.x=i-((r.xPercent=i&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-i)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+k,r.y=n-((r.yPercent=n&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-n)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+k,r.z=s+k,r.scaleX=me(a),r.scaleY=me(o),r.rotation=me(l)+U,r.rotationX=me(u)+U,r.rotationY=me(h)+U,r.skewX=f+U,r.skewY=c+U,r.transformPerspective=d+k,(r.zOrigin=parseFloat(H.split(" ")[2])||0)&&(N[gi]=qi(H)),r.xOffset=r.yOffset=0,r.force3D=E.force3D,r.renderTransform=r.svg?en:Cr?Ji:Ki,r.uncache=0,r},qi=function(e){return(e=e.split(" "))[0]+" "+e[1]},Yi=function(e,t,r){var i=Qe(t);return me(parseFloat(t)+parseFloat(Mi(e,"x",r+"px",i)))+i},Ki=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Ji(e,t)},Xi="0deg",Zi="0px",Qi=") ",Ji=function(e,t){var r=t||this,i=r.xPercent,n=r.yPercent,s=r.x,a=r.y,o=r.z,l=r.rotation,u=r.rotationY,h=r.rotationX,f=r.skewX,c=r.skewY,d=r.scaleX,m=r.scaleY,p=r.transformPerspective,g=r.force3D,_=r.target,v=r.zOrigin,y="",E="auto"===g&&e&&1!==e||!0===g;if(v&&(h!==Xi||u!==Xi)){var T,S=parseFloat(u)*Zr,b=Math.sin(S),A=Math.cos(S);S=parseFloat(h)*Zr,T=Math.cos(S),s=Yi(_,s,b*T*-v),a=Yi(_,a,-Math.sin(S)*-v),o=Yi(_,o,A*T*-v+v)}p!==Zi&&(y+="perspective("+p+Qi),(i||n)&&(y+="translate("+i+"%, "+n+"%) "),(E||s!==Zi||a!==Zi||o!==Zi)&&(y+=o!==Zi||E?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+Qi),l!==Xi&&(y+="rotate("+l+Qi),u!==Xi&&(y+="rotateY("+u+Qi),h!==Xi&&(y+="rotateX("+h+Qi),f===Xi&&c===Xi||(y+="skew("+f+", "+c+Qi),1===d&&1===m||(y+="scale("+d+", "+m+Qi),_.style[pi]=y||"translate(0, 0)"},en=function(e,t){var r,i,n,s,a,o=t||this,l=o.xPercent,u=o.yPercent,h=o.x,f=o.y,c=o.rotation,d=o.skewX,m=o.skewY,p=o.scaleX,g=o.scaleY,_=o.target,v=o.xOrigin,y=o.yOrigin,E=o.xOffset,T=o.yOffset,S=o.forceCSS,b=parseFloat(h),A=parseFloat(f);c=parseFloat(c),d=parseFloat(d),(m=parseFloat(m))&&(d+=m=parseFloat(m),c+=m),c||d?(c*=Zr,d*=Zr,r=Math.cos(c)*p,i=Math.sin(c)*p,n=Math.sin(c-d)*-g,s=Math.cos(c-d)*g,d&&(m*=Zr,a=Math.tan(d-m),n*=a=Math.sqrt(1+a*a),s*=a,m&&(a=Math.tan(m),r*=a=Math.sqrt(1+a*a),i*=a)),r=me(r),i=me(i),n=me(n),s=me(s)):(r=p,s=g,i=n=0),(b&&!~(h+"").indexOf("px")||A&&!~(f+"").indexOf("px"))&&(b=Mi(_,"x",h,"px"),A=Mi(_,"y",f,"px")),(v||y||E||T)&&(b=me(b+v-(v*r+y*n)+E),A=me(A+y-(v*i+y*s)+T)),(l||u)&&(a=_.getBBox(),b=me(b+l/100*a.width),A=me(A+u/100*a.height)),a="matrix("+r+","+i+","+n+","+s+","+b+","+A+")",_.setAttribute("transform",a),S&&(_.style[pi]=a)},tn=function(e,t,r,i,n){var s,a,o=360,l=C(n),u=parseFloat(n)*(l&&~n.indexOf("rad")?Xr:1)-i,h=i+u+"deg";return l&&("short"===(s=n.split("_")[1])&&(u%=o)!=u%180&&(u+=u<0?o:-360),"cw"===s&&u<0?u=(u+36e9)%o-~~(u/o)*o:"ccw"===s&&u>0&&(u=(u-36e9)%o-~~(u/o)*o)),e._pt=a=new hr(e._pt,t,r,i,u,ni),a.e=h,a.u="deg",e._props.push(r),a},rn=function(e,t){for(var r in t)e[r]=t[r];return e},nn=function(e,t,r){var i,n,s,a,o,l,u,h=rn({},r._gsap),f=r.style;for(n in h.svg?(s=r.getAttribute("transform"),r.setAttribute("transform",""),f[pi]=t,i=$i(r,1),Ci(r,pi),r.setAttribute("transform",s)):(s=getComputedStyle(r)[pi],f[pi]=t,i=$i(r,1),f[pi]=s),Kr)(s=h[n])!==(a=i[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(o=Qe(s)!==(u=Qe(a))?Mi(r,n,s,u):parseFloat(s),l=parseFloat(a),e._pt=new hr(e._pt,i,n,o,l-o,ii),e._pt.u=u||0,e._props.push(n));rn(i,h)};de("padding,margin,Width,Radius",(function(e,t){var r="Top",i="Right",n="Bottom",s="Left",a=(t<3?[r,i,n,s]:[r+s,r+i,n+i,n+s]).map((function(r){return t<2?e+r:"border"+r+e}));Ui[t>1?"border"+e:e]=function(e,t,r,i,n){var s,o;if(arguments.length<4)return s=a.map((function(t){return xi(e,t,r)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(i+"").split(" "),o={},a.forEach((function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]})),e.init(t,o,n)}}));var sn,an,on={name:"css",register:Ri,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,n){var s,a,o,l,u,h,f,c,d,m,p,g,_,v,y,T,S,b,A,R,w=this._props,I=e.style,F=r.vars.startAt;for(f in wr||Ri(),this.styles=this.styles||Ei(e),T=this.styles.props,this.tween=r,t)if("autoRound"!==f&&(a=t[f],!se[f]||!Wt(f,t,r,i,e,n)))if(u=typeof a,h=Ui[f],"function"===u&&(u=typeof(a=a.call(r,i,e,n))),"string"===u&&~a.indexOf("random(")&&(a=ut(a)),h)h(this,e,f,a,r)&&(y=1);else if("--"===f.substr(0,2))s=(getComputedStyle(e).getPropertyValue(f)+"").trim(),a+="",Tt.lastIndex=0,Tt.test(s)||(c=Qe(s),d=Qe(a)),d?c!==d&&(s=Mi(e,f,s,d)+d):c&&(a+=c),this.add(I,"setProperty",s,a,i,n,0,0,f),w.push(f),T.push(f,I[f]);else if("undefined"!==u){if(F&&f in F?(s="function"==typeof F[f]?F[f].call(r,i,e,n):F[f],C(s)&&~s.indexOf("random(")&&(s=ut(s)),Qe(s+"")||(s+=E.units[f]||Qe(xi(e,f))||""),"="===(s+"").charAt(1)&&(s=xi(e,f))):s=xi(e,f),l=parseFloat(s),(m="string"===u&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),f in ri&&("autoAlpha"===f&&(1===l&&"hidden"===xi(e,"visibility")&&o&&(l=0),T.push("visibility",I.visibility),Pi(this,I,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==f&&"transform"!==f&&~(f=ri[f]).indexOf(",")&&(f=f.split(",")[0])),p=f in Kr)if(this.styles.save(f),g||((_=e._gsap).renderTransform&&!t.parseTransform||$i(e,t.parseTransform),v=!1!==t.smoothOrigin&&_.smooth,(g=this._pt=new hr(this._pt,I,pi,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===f)this._pt=new hr(this._pt,_,"scaleY",_.scaleY,(m?ge(_.scaleY,m+o):o)-_.scaleY||0,ii),this._pt.u=0,w.push("scaleY",f),f+="X";else{if("transformOrigin"===f){T.push(gi,I[gi]),b=void 0,A=void 0,R=void 0,A=(b=(S=a).split(" "))[0],R=b[1]||"50%","top"!==A&&"bottom"!==A&&"left"!==R&&"right"!==R||(S=A,A=R,R=S),b[0]=Bi[A]||A,b[1]=Bi[R]||R,a=b.join(" "),_.svg?zi(e,a,0,v,0,this):((d=parseFloat(a.split(" ")[2])||0)!==_.zOrigin&&Pi(this,_,"zOrigin",_.zOrigin,d),Pi(this,I,f,qi(s),qi(a)));continue}if("svgOrigin"===f){zi(e,a,1,v,0,this);continue}if(f in Hi){tn(this,_,f,l,m?ge(l,m+a):a);continue}if("smoothOrigin"===f){Pi(this,_,"smooth",_.smooth,a);continue}if("force3D"===f){_[f]=a;continue}if("transform"===f){nn(this,a,e);continue}}else f in I||(f=Ai(f)||f);if(p||(o||0===o)&&(l||0===l)&&!ti.test(a)&&f in I)o||(o=0),(c=(s+"").substr((l+"").length))!==(d=Qe(a)||(f in E.units?E.units[f]:c))&&(l=Mi(e,f,s,d)),this._pt=new hr(this._pt,p?_:I,f,l,(m?ge(l,m+o):o)-l,p||"px"!==d&&"zIndex"!==f||!1===t.autoRound?ii:ai),this._pt.u=d||0,c!==d&&"%"!==d&&(this._pt.b=s,this._pt.r=si);else if(f in I)Ni.call(this,e,f,s,m?m+a:a);else{if(!(f in e)){X(f,a);continue}this.add(e,f,s||e[f],m?m+a:a,i,n)}p||T.push(f,I[f]),w.push(f)}y&&ur(this)},render:function(e,t){if(t.tween._time||!Lr())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:xi,aliases:ri,getSetter:function(e,t,r){var i=ri[t];return i&&i.indexOf(",")<0&&(t=i),t in Kr&&t!==gi&&(e._gsap.x||xi(e,"x"))?r&&Fr===r?"scale"===t?ci:fi:(Fr=r||{})&&("scale"===t?di:mi):e.style&&!D(e.style[t])?ui:~t.indexOf("-")?hi:tr(e,t)},core:{_removeProperty:Ci,_getMatrix:Wi}};Sr.utils.checkPrefix=Ai,Sr.core.getStyleSaver=Ei,an=de("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(sn="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Kr[e]=1})),de(sn,(function(e){E.units[e]="deg",Hi[e]=1})),ri[an[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+sn,de("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");ri[t[1]]=an[t[0]]})),de("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){E.units[e]="px"})),Sr.registerPlugin(on);var ln=Sr.registerPlugin(on)||Sr,un=ln.core.Tween},645:(e,t)=>{t.read=function(e,t,r,i,n){var s,a,o=8*n-i-1,l=(1<<o)-1,u=l>>1,h=-7,f=r?n-1:0,c=r?-1:1,d=e[t+f];for(f+=c,s=d&(1<<-h)-1,d>>=-h,h+=o;h>0;s=256*s+e[t+f],f+=c,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=i;h>0;a=256*a+e[t+f],f+=c,h-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,i),s-=u}return(d?-1:1)*a*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var a,o,l,u=8*s-n-1,h=(1<<u)-1,f=h>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,m=i?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?c/l:c*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=h?(o=0,a=h):a+f>=1?(o=(t*l-1)*Math.pow(2,n),a+=f):(o=t*Math.pow(2,f-1)*Math.pow(2,n),a=0));n>=8;e[r+d]=255&o,d+=m,o/=256,n-=8);for(a=a<<n|o,u+=n;u>0;e[r+d]=255&a,d+=m,a/=256,u-=8);e[r+d-m]|=128*p}},6486:function(e,t,r){var i;e=r.nmd(e),function(){var n,s="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",l=32,u=128,h=1/0,f=9007199254740991,c=NaN,d=4294967295,m=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],p="[object Arguments]",g="[object Array]",_="[object Boolean]",v="[object Date]",y="[object Error]",E="[object Function]",T="[object GeneratorFunction]",S="[object Map]",b="[object Number]",A="[object Object]",R="[object Promise]",w="[object RegExp]",I="[object Set]",F="[object String]",L="[object Symbol]",C="[object WeakMap]",P="[object ArrayBuffer]",O="[object DataView]",D="[object Float32Array]",M="[object Float64Array]",x="[object Int8Array]",N="[object Int16Array]",B="[object Int32Array]",k="[object Uint8Array]",U="[object Uint8ClampedArray]",G="[object Uint16Array]",H="[object Uint32Array]",V=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,q=RegExp(z.source),Y=RegExp($.source),K=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,re=RegExp(te.source),ie=/^\s+/,ne=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,he=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,de=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,pe=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ye=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,Te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Se="a-z\\xdf-\\xf6\\xf8-\\xff",be="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Re="["+Ae+"]",we="["+Te+"]",Ie="\\d+",Fe="["+Se+"]",Le="[^\\ud800-\\udfff"+Ae+Ie+"\\u2700-\\u27bf"+Se+be+"]",Ce="\\ud83c[\\udffb-\\udfff]",Pe="[^\\ud800-\\udfff]",Oe="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+be+"]",xe="(?:"+Fe+"|"+Le+")",Ne="(?:"+Me+"|"+Le+")",Be="(?:['’](?:d|ll|m|re|s|t|ve))?",ke="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ue="(?:"+we+"|"+Ce+")?",Ge="[\\ufe0e\\ufe0f]?",He=Ge+Ue+"(?:\\u200d(?:"+[Pe,Oe,De].join("|")+")"+Ge+Ue+")*",Ve="(?:"+["[\\u2700-\\u27bf]",Oe,De].join("|")+")"+He,je="(?:"+[Pe+we+"?",we,Oe,De,"[\\ud800-\\udfff]"].join("|")+")",We=RegExp("['’]","g"),ze=RegExp(we,"g"),$e=RegExp(Ce+"(?="+Ce+")|"+je+He,"g"),qe=RegExp([Me+"?"+Fe+"+"+Be+"(?="+[Re,Me,"$"].join("|")+")",Ne+"+"+ke+"(?="+[Re,Me+xe,"$"].join("|")+")",Me+"?"+xe+"+"+Be,Me+"+"+ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,Ve].join("|"),"g"),Ye=RegExp("[\\u200d\\ud800-\\udfff"+Te+"\\ufe0e\\ufe0f]"),Ke=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ze=-1,Qe={};Qe[D]=Qe[M]=Qe[x]=Qe[N]=Qe[B]=Qe[k]=Qe[U]=Qe[G]=Qe[H]=!0,Qe[p]=Qe[g]=Qe[P]=Qe[_]=Qe[O]=Qe[v]=Qe[y]=Qe[E]=Qe[S]=Qe[b]=Qe[A]=Qe[w]=Qe[I]=Qe[F]=Qe[C]=!1;var Je={};Je[p]=Je[g]=Je[P]=Je[O]=Je[_]=Je[v]=Je[D]=Je[M]=Je[x]=Je[N]=Je[B]=Je[S]=Je[b]=Je[A]=Je[w]=Je[I]=Je[F]=Je[L]=Je[k]=Je[U]=Je[G]=Je[H]=!0,Je[y]=Je[E]=Je[C]=!1;var et={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tt=parseFloat,rt=parseInt,it="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,nt="object"==typeof self&&self&&self.Object===Object&&self,st=it||nt||Function("return this")(),at=t&&!t.nodeType&&t,ot=at&&e&&!e.nodeType&&e,lt=ot&&ot.exports===at,ut=lt&&it.process,ht=function(){try{return ot&&ot.require&&ot.require("util").types||ut&&ut.binding&&ut.binding("util")}catch(e){}}(),ft=ht&&ht.isArrayBuffer,ct=ht&&ht.isDate,dt=ht&&ht.isMap,mt=ht&&ht.isRegExp,pt=ht&&ht.isSet,gt=ht&&ht.isTypedArray;function _t(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function vt(e,t,r,i){for(var n=-1,s=null==e?0:e.length;++n<s;){var a=e[n];t(i,a,r(a),e)}return i}function yt(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r,e););return e}function Et(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Tt(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}function St(e,t){for(var r=-1,i=null==e?0:e.length,n=0,s=[];++r<i;){var a=e[r];t(a,r,e)&&(s[n++]=a)}return s}function bt(e,t){return!(null==e||!e.length)&&Dt(e,t,0)>-1}function At(e,t,r){for(var i=-1,n=null==e?0:e.length;++i<n;)if(r(t,e[i]))return!0;return!1}function Rt(e,t){for(var r=-1,i=null==e?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}function wt(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}function It(e,t,r,i){var n=-1,s=null==e?0:e.length;for(i&&s&&(r=e[++n]);++n<s;)r=t(r,e[n],n,e);return r}function Ft(e,t,r,i){var n=null==e?0:e.length;for(i&&n&&(r=e[--n]);n--;)r=t(r,e[n],n,e);return r}function Lt(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var Ct=Bt("length");function Pt(e,t,r){var i;return r(e,(function(e,r,n){if(t(e,r,n))return i=r,!1})),i}function Ot(e,t,r,i){for(var n=e.length,s=r+(i?1:-1);i?s--:++s<n;)if(t(e[s],s,e))return s;return-1}function Dt(e,t,r){return t==t?function(e,t,r){for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}(e,t,r):Ot(e,xt,r)}function Mt(e,t,r,i){for(var n=r-1,s=e.length;++n<s;)if(i(e[n],t))return n;return-1}function xt(e){return e!=e}function Nt(e,t){var r=null==e?0:e.length;return r?Gt(e,t)/r:c}function Bt(e){return function(t){return null==t?n:t[e]}}function kt(e){return function(t){return null==e?n:e[t]}}function Ut(e,t,r,i,n){return n(e,(function(e,n,s){r=i?(i=!1,e):t(r,e,n,s)})),r}function Gt(e,t){for(var r,i=-1,s=e.length;++i<s;){var a=t(e[i]);a!==n&&(r=r===n?a:r+a)}return r}function Ht(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}function Vt(e){return e?e.slice(0,ar(e)+1).replace(ie,""):e}function jt(e){return function(t){return e(t)}}function Wt(e,t){return Rt(t,(function(t){return e[t]}))}function zt(e,t){return e.has(t)}function $t(e,t){for(var r=-1,i=e.length;++r<i&&Dt(t,e[r],0)>-1;);return r}function qt(e,t){for(var r=e.length;r--&&Dt(t,e[r],0)>-1;);return r}function Yt(e,t){for(var r=e.length,i=0;r--;)e[r]===t&&++i;return i}var Kt=kt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Xt=kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zt(e){return"\\"+et[e]}function Qt(e){return Ye.test(e)}function Jt(e){var t=-1,r=Array(e.size);return e.forEach((function(e,i){r[++t]=[i,e]})),r}function er(e,t){return function(r){return e(t(r))}}function tr(e,t){for(var r=-1,i=e.length,n=0,s=[];++r<i;){var a=e[r];a!==t&&a!==o||(e[r]=o,s[n++]=r)}return s}function rr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function ir(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function nr(e){return Qt(e)?function(e){for(var t=$e.lastIndex=0;$e.test(e);)++t;return t}(e):Ct(e)}function sr(e){return Qt(e)?function(e){return e.match($e)||[]}(e):function(e){return e.split("")}(e)}function ar(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var or=kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),lr=function e(t){var r,i=(t=null==t?st:lr.defaults(st.Object(),t,lr.pick(st,Xe))).Array,ne=t.Date,Te=t.Error,Se=t.Function,be=t.Math,Ae=t.Object,Re=t.RegExp,we=t.String,Ie=t.TypeError,Fe=i.prototype,Le=Se.prototype,Ce=Ae.prototype,Pe=t["__core-js_shared__"],Oe=Le.toString,De=Ce.hasOwnProperty,Me=0,xe=(r=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Ne=Ce.toString,Be=Oe.call(Ae),ke=st._,Ue=Re("^"+Oe.call(De).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=lt?t.Buffer:n,He=t.Symbol,Ve=t.Uint8Array,je=Ge?Ge.allocUnsafe:n,$e=er(Ae.getPrototypeOf,Ae),Ye=Ae.create,et=Ce.propertyIsEnumerable,it=Fe.splice,nt=He?He.isConcatSpreadable:n,at=He?He.iterator:n,ot=He?He.toStringTag:n,ut=function(){try{var e=us(Ae,"defineProperty");return e({},"",{}),e}catch(e){}}(),ht=t.clearTimeout!==st.clearTimeout&&t.clearTimeout,Ct=ne&&ne.now!==st.Date.now&&ne.now,kt=t.setTimeout!==st.setTimeout&&t.setTimeout,ur=be.ceil,hr=be.floor,fr=Ae.getOwnPropertySymbols,cr=Ge?Ge.isBuffer:n,dr=t.isFinite,mr=Fe.join,pr=er(Ae.keys,Ae),gr=be.max,_r=be.min,vr=ne.now,yr=t.parseInt,Er=be.random,Tr=Fe.reverse,Sr=us(t,"DataView"),br=us(t,"Map"),Ar=us(t,"Promise"),Rr=us(t,"Set"),wr=us(t,"WeakMap"),Ir=us(Ae,"create"),Fr=wr&&new wr,Lr={},Cr=ks(Sr),Pr=ks(br),Or=ks(Ar),Dr=ks(Rr),Mr=ks(wr),xr=He?He.prototype:n,Nr=xr?xr.valueOf:n,Br=xr?xr.toString:n;function kr(e){if(to(e)&&!Wa(e)&&!(e instanceof Vr)){if(e instanceof Hr)return e;if(De.call(e,"__wrapped__"))return Us(e)}return new Hr(e)}var Ur=function(){function e(){}return function(t){if(!eo(t))return{};if(Ye)return Ye(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Gr(){}function Hr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Vr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function jr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function zr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function $r(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new zr;++t<r;)this.add(e[t])}function qr(e){var t=this.__data__=new Wr(e);this.size=t.size}function Yr(e,t){var r=Wa(e),i=!r&&ja(e),n=!r&&!i&&Ya(e),s=!r&&!i&&!n&&uo(e),a=r||i||n||s,o=a?Ht(e.length,we):[],l=o.length;for(var u in e)!t&&!De.call(e,u)||a&&("length"==u||n&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||gs(u,l))||o.push(u);return o}function Kr(e){var t=e.length;return t?e[zi(0,t-1)]:n}function Xr(e,t){return Ds(In(e),si(t,0,e.length))}function Zr(e){return Ds(In(e))}function Qr(e,t,r){(r!==n&&!Ga(e[t],r)||r===n&&!(t in e))&&ii(e,t,r)}function Jr(e,t,r){var i=e[t];De.call(e,t)&&Ga(i,r)&&(r!==n||t in e)||ii(e,t,r)}function ei(e,t){for(var r=e.length;r--;)if(Ga(e[r][0],t))return r;return-1}function ti(e,t,r,i){return hi(e,(function(e,n,s){t(i,e,r(e),s)})),i}function ri(e,t){return e&&Fn(t,Oo(t),e)}function ii(e,t,r){"__proto__"==t&&ut?ut(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ni(e,t){for(var r=-1,s=t.length,a=i(s),o=null==e;++r<s;)a[r]=o?n:Io(e,t[r]);return a}function si(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function ai(e,t,r,i,s,a){var o,l=1&t,u=2&t,h=4&t;if(r&&(o=s?r(e,i,s,a):r(e)),o!==n)return o;if(!eo(e))return e;var f=Wa(e);if(f){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&De.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!l)return In(e,o)}else{var c=cs(e),d=c==E||c==T;if(Ya(e))return Tn(e,l);if(c==A||c==p||d&&!s){if(o=u||d?{}:ms(e),!l)return u?function(e,t){return Fn(e,fs(e),t)}(e,function(e,t){return e&&Fn(t,Do(t),e)}(o,e)):function(e,t){return Fn(e,hs(e),t)}(e,ri(o,e))}else{if(!Je[c])return s?e:{};o=function(e,t,r){var i,n=e.constructor;switch(t){case P:return Sn(e);case _:case v:return new n(+e);case O:return function(e,t){var r=t?Sn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case D:case M:case x:case N:case B:case k:case U:case G:case H:return bn(e,r);case S:return new n;case b:case F:return new n(e);case w:return function(e){var t=new e.constructor(e.source,ce.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new n;case L:return i=e,Nr?Ae(Nr.call(i)):{}}}(e,c,l)}}a||(a=new qr);var m=a.get(e);if(m)return m;a.set(e,o),ao(e)?e.forEach((function(i){o.add(ai(i,t,r,i,e,a))})):ro(e)&&e.forEach((function(i,n){o.set(n,ai(i,t,r,n,e,a))}));var g=f?n:(h?u?rs:ts:u?Do:Oo)(e);return yt(g||e,(function(i,n){g&&(i=e[n=i]),Jr(o,n,ai(i,t,r,n,e,a))})),o}function oi(e,t,r){var i=r.length;if(null==e)return!i;for(e=Ae(e);i--;){var s=r[i],a=t[s],o=e[s];if(o===n&&!(s in e)||!a(o))return!1}return!0}function li(e,t,r){if("function"!=typeof e)throw new Ie(s);return Ls((function(){e.apply(n,r)}),t)}function ui(e,t,r,i){var n=-1,s=bt,a=!0,o=e.length,l=[],u=t.length;if(!o)return l;r&&(t=Rt(t,jt(r))),i?(s=At,a=!1):t.length>=200&&(s=zt,a=!1,t=new $r(t));e:for(;++n<o;){var h=e[n],f=null==r?h:r(h);if(h=i||0!==h?h:0,a&&f==f){for(var c=u;c--;)if(t[c]===f)continue e;l.push(h)}else s(t,f,i)||l.push(h)}return l}kr.templateSettings={escape:K,evaluate:X,interpolate:Z,variable:"",imports:{_:kr}},kr.prototype=Gr.prototype,kr.prototype.constructor=kr,Hr.prototype=Ur(Gr.prototype),Hr.prototype.constructor=Hr,Vr.prototype=Ur(Gr.prototype),Vr.prototype.constructor=Vr,jr.prototype.clear=function(){this.__data__=Ir?Ir(null):{},this.size=0},jr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},jr.prototype.get=function(e){var t=this.__data__;if(Ir){var r=t[e];return r===a?n:r}return De.call(t,e)?t[e]:n},jr.prototype.has=function(e){var t=this.__data__;return Ir?t[e]!==n:De.call(t,e)},jr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ir&&t===n?a:t,this},Wr.prototype.clear=function(){this.__data__=[],this.size=0},Wr.prototype.delete=function(e){var t=this.__data__,r=ei(t,e);return!(r<0||(r==t.length-1?t.pop():it.call(t,r,1),--this.size,0))},Wr.prototype.get=function(e){var t=this.__data__,r=ei(t,e);return r<0?n:t[r][1]},Wr.prototype.has=function(e){return ei(this.__data__,e)>-1},Wr.prototype.set=function(e,t){var r=this.__data__,i=ei(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},zr.prototype.clear=function(){this.size=0,this.__data__={hash:new jr,map:new(br||Wr),string:new jr}},zr.prototype.delete=function(e){var t=os(this,e).delete(e);return this.size-=t?1:0,t},zr.prototype.get=function(e){return os(this,e).get(e)},zr.prototype.has=function(e){return os(this,e).has(e)},zr.prototype.set=function(e,t){var r=os(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this},$r.prototype.add=$r.prototype.push=function(e){return this.__data__.set(e,a),this},$r.prototype.has=function(e){return this.__data__.has(e)},qr.prototype.clear=function(){this.__data__=new Wr,this.size=0},qr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},qr.prototype.get=function(e){return this.__data__.get(e)},qr.prototype.has=function(e){return this.__data__.has(e)},qr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Wr){var i=r.__data__;if(!br||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new zr(i)}return r.set(e,t),this.size=r.size,this};var hi=Pn(vi),fi=Pn(yi,!0);function ci(e,t){var r=!0;return hi(e,(function(e,i,n){return r=!!t(e,i,n)})),r}function di(e,t,r){for(var i=-1,s=e.length;++i<s;){var a=e[i],o=t(a);if(null!=o&&(l===n?o==o&&!lo(o):r(o,l)))var l=o,u=a}return u}function mi(e,t){var r=[];return hi(e,(function(e,i,n){t(e,i,n)&&r.push(e)})),r}function pi(e,t,r,i,n){var s=-1,a=e.length;for(r||(r=ps),n||(n=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?pi(o,t-1,r,i,n):wt(n,o):i||(n[n.length]=o)}return n}var gi=On(),_i=On(!0);function vi(e,t){return e&&gi(e,t,Oo)}function yi(e,t){return e&&_i(e,t,Oo)}function Ei(e,t){return St(t,(function(t){return Za(e[t])}))}function Ti(e,t){for(var r=0,i=(t=_n(t,e)).length;null!=e&&r<i;)e=e[Bs(t[r++])];return r&&r==i?e:n}function Si(e,t,r){var i=t(e);return Wa(e)?i:wt(i,r(e))}function bi(e){return null==e?e===n?"[object Undefined]":"[object Null]":ot&&ot in Ae(e)?function(e){var t=De.call(e,ot),r=e[ot];try{e[ot]=n;var i=!0}catch(e){}var s=Ne.call(e);return i&&(t?e[ot]=r:delete e[ot]),s}(e):function(e){return Ne.call(e)}(e)}function Ai(e,t){return e>t}function Ri(e,t){return null!=e&&De.call(e,t)}function wi(e,t){return null!=e&&t in Ae(e)}function Ii(e,t,r){for(var s=r?At:bt,a=e[0].length,o=e.length,l=o,u=i(o),h=1/0,f=[];l--;){var c=e[l];l&&t&&(c=Rt(c,jt(t))),h=_r(c.length,h),u[l]=!r&&(t||a>=120&&c.length>=120)?new $r(l&&c):n}c=e[0];var d=-1,m=u[0];e:for(;++d<a&&f.length<h;){var p=c[d],g=t?t(p):p;if(p=r||0!==p?p:0,!(m?zt(m,g):s(f,g,r))){for(l=o;--l;){var _=u[l];if(!(_?zt(_,g):s(e[l],g,r)))continue e}m&&m.push(g),f.push(p)}}return f}function Fi(e,t,r){var i=null==(e=Rs(e,t=_n(t,e)))?e:e[Bs(Xs(t))];return null==i?n:_t(i,e,r)}function Li(e){return to(e)&&bi(e)==p}function Ci(e,t,r,i,s){return e===t||(null==e||null==t||!to(e)&&!to(t)?e!=e&&t!=t:function(e,t,r,i,s,a){var o=Wa(e),l=Wa(t),u=o?g:cs(e),h=l?g:cs(t),f=(u=u==p?A:u)==A,c=(h=h==p?A:h)==A,d=u==h;if(d&&Ya(e)){if(!Ya(t))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new qr),o||uo(e)?Jn(e,t,r,i,s,a):function(e,t,r,i,n,s,a){switch(r){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new Ve(e),new Ve(t)));case _:case v:case b:return Ga(+e,+t);case y:return e.name==t.name&&e.message==t.message;case w:case F:return e==t+"";case S:var o=Jt;case I:var l=1&i;if(o||(o=rr),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;i|=2,a.set(e,t);var h=Jn(o(e),o(t),i,n,s,a);return a.delete(e),h;case L:if(Nr)return Nr.call(e)==Nr.call(t)}return!1}(e,t,u,r,i,s,a);if(!(1&r)){var m=f&&De.call(e,"__wrapped__"),E=c&&De.call(t,"__wrapped__");if(m||E){var T=m?e.value():e,R=E?t.value():t;return a||(a=new qr),s(T,R,r,i,a)}}return!!d&&(a||(a=new qr),function(e,t,r,i,s,a){var o=1&r,l=ts(e),u=l.length;if(u!=ts(t).length&&!o)return!1;for(var h=u;h--;){var f=l[h];if(!(o?f in t:De.call(t,f)))return!1}var c=a.get(e),d=a.get(t);if(c&&d)return c==t&&d==e;var m=!0;a.set(e,t),a.set(t,e);for(var p=o;++h<u;){var g=e[f=l[h]],_=t[f];if(i)var v=o?i(_,g,f,t,e,a):i(g,_,f,e,t,a);if(!(v===n?g===_||s(g,_,r,i,a):v)){m=!1;break}p||(p="constructor"==f)}if(m&&!p){var y=e.constructor,E=t.constructor;y==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof E&&E instanceof E||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,r,i,s,a))}(e,t,r,i,Ci,s))}function Pi(e,t,r,i){var s=r.length,a=s,o=!i;if(null==e)return!a;for(e=Ae(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<a;){var u=(l=r[s])[0],h=e[u],f=l[1];if(o&&l[2]){if(h===n&&!(u in e))return!1}else{var c=new qr;if(i)var d=i(h,f,u,e,t,c);if(!(d===n?Ci(f,h,3,i,c):d))return!1}}return!0}function Oi(e){return!(!eo(e)||(t=e,xe&&xe in t))&&(Za(e)?Ue:pe).test(ks(e));var t}function Di(e){return"function"==typeof e?e:null==e?nl:"object"==typeof e?Wa(e)?ki(e[0],e[1]):Bi(e):dl(e)}function Mi(e){if(!Ts(e))return pr(e);var t=[];for(var r in Ae(e))De.call(e,r)&&"constructor"!=r&&t.push(r);return t}function xi(e,t){return e<t}function Ni(e,t){var r=-1,n=$a(e)?i(e.length):[];return hi(e,(function(e,i,s){n[++r]=t(e,i,s)})),n}function Bi(e){var t=ls(e);return 1==t.length&&t[0][2]?bs(t[0][0],t[0][1]):function(r){return r===e||Pi(r,e,t)}}function ki(e,t){return vs(e)&&Ss(t)?bs(Bs(e),t):function(r){var i=Io(r,e);return i===n&&i===t?Fo(r,e):Ci(t,i,3)}}function Ui(e,t,r,i,s){e!==t&&gi(t,(function(a,o){if(s||(s=new qr),eo(a))!function(e,t,r,i,s,a,o){var l=Is(e,r),u=Is(t,r),h=o.get(u);if(h)Qr(e,r,h);else{var f=a?a(l,u,r+"",e,t,o):n,c=f===n;if(c){var d=Wa(u),m=!d&&Ya(u),p=!d&&!m&&uo(u);f=u,d||m||p?Wa(l)?f=l:qa(l)?f=In(l):m?(c=!1,f=Tn(u,!0)):p?(c=!1,f=bn(u,!0)):f=[]:no(u)||ja(u)?(f=l,ja(l)?f=vo(l):eo(l)&&!Za(l)||(f=ms(u))):c=!1}c&&(o.set(u,f),s(f,u,i,a,o),o.delete(u)),Qr(e,r,f)}}(e,t,o,r,Ui,i,s);else{var l=i?i(Is(e,o),a,o+"",e,t,s):n;l===n&&(l=a),Qr(e,o,l)}}),Do)}function Gi(e,t){var r=e.length;if(r)return gs(t+=t<0?r:0,r)?e[t]:n}function Hi(e,t,r){t=t.length?Rt(t,(function(e){return Wa(e)?function(t){return Ti(t,1===e.length?e[0]:e)}:e})):[nl];var i=-1;t=Rt(t,jt(as()));var n=Ni(e,(function(e,r,n){var s=Rt(t,(function(t){return t(e)}));return{criteria:s,index:++i,value:e}}));return function(e,t){var i=e.length;for(e.sort((function(e,t){return function(e,t,r){for(var i=-1,n=e.criteria,s=t.criteria,a=n.length,o=r.length;++i<a;){var l=An(n[i],s[i]);if(l)return i>=o?l:l*("desc"==r[i]?-1:1)}return e.index-t.index}(e,t,r)}));i--;)e[i]=e[i].value;return e}(n)}function Vi(e,t,r){for(var i=-1,n=t.length,s={};++i<n;){var a=t[i],o=Ti(e,a);r(o,a)&&Xi(s,_n(a,e),o)}return s}function ji(e,t,r,i){var n=i?Mt:Dt,s=-1,a=t.length,o=e;for(e===t&&(t=In(t)),r&&(o=Rt(e,jt(r)));++s<a;)for(var l=0,u=t[s],h=r?r(u):u;(l=n(o,h,l,i))>-1;)o!==e&&it.call(o,l,1),it.call(e,l,1);return e}function Wi(e,t){for(var r=e?t.length:0,i=r-1;r--;){var n=t[r];if(r==i||n!==s){var s=n;gs(n)?it.call(e,n,1):un(e,n)}}return e}function zi(e,t){return e+hr(Er()*(t-e+1))}function $i(e,t){var r="";if(!e||t<1||t>f)return r;do{t%2&&(r+=e),(t=hr(t/2))&&(e+=e)}while(t);return r}function qi(e,t){return Cs(As(e,t,nl),e+"")}function Yi(e){return Kr(Ho(e))}function Ki(e,t){var r=Ho(e);return Ds(r,si(t,0,r.length))}function Xi(e,t,r,i){if(!eo(e))return e;for(var s=-1,a=(t=_n(t,e)).length,o=a-1,l=e;null!=l&&++s<a;){var u=Bs(t[s]),h=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(s!=o){var f=l[u];(h=i?i(f,u,l):n)===n&&(h=eo(f)?f:gs(t[s+1])?[]:{})}Jr(l,u,h),l=l[u]}return e}var Zi=Fr?function(e,t){return Fr.set(e,t),e}:nl,Qi=ut?function(e,t){return ut(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:nl;function Ji(e){return Ds(Ho(e))}function en(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=i(s);++n<s;)a[n]=e[n+t];return a}function tn(e,t){var r;return hi(e,(function(e,i,n){return!(r=t(e,i,n))})),!!r}function rn(e,t,r){var i=0,n=null==e?i:e.length;if("number"==typeof t&&t==t&&n<=2147483647){for(;i<n;){var s=i+n>>>1,a=e[s];null!==a&&!lo(a)&&(r?a<=t:a<t)?i=s+1:n=s}return n}return nn(e,t,nl,r)}function nn(e,t,r,i){var s=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=r(t))!=t,l=null===t,u=lo(t),h=t===n;s<a;){var f=hr((s+a)/2),c=r(e[f]),d=c!==n,m=null===c,p=c==c,g=lo(c);if(o)var _=i||p;else _=h?p&&(i||d):l?p&&d&&(i||!m):u?p&&d&&!m&&(i||!g):!m&&!g&&(i?c<=t:c<t);_?s=f+1:a=f}return _r(a,4294967294)}function sn(e,t){for(var r=-1,i=e.length,n=0,s=[];++r<i;){var a=e[r],o=t?t(a):a;if(!r||!Ga(o,l)){var l=o;s[n++]=0===a?0:a}}return s}function an(e){return"number"==typeof e?e:lo(e)?c:+e}function on(e){if("string"==typeof e)return e;if(Wa(e))return Rt(e,on)+"";if(lo(e))return Br?Br.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ln(e,t,r){var i=-1,n=bt,s=e.length,a=!0,o=[],l=o;if(r)a=!1,n=At;else if(s>=200){var u=t?null:qn(e);if(u)return rr(u);a=!1,n=zt,l=new $r}else l=t?[]:o;e:for(;++i<s;){var h=e[i],f=t?t(h):h;if(h=r||0!==h?h:0,a&&f==f){for(var c=l.length;c--;)if(l[c]===f)continue e;t&&l.push(f),o.push(h)}else n(l,f,r)||(l!==o&&l.push(f),o.push(h))}return o}function un(e,t){return null==(e=Rs(e,t=_n(t,e)))||delete e[Bs(Xs(t))]}function hn(e,t,r,i){return Xi(e,t,r(Ti(e,t)),i)}function fn(e,t,r,i){for(var n=e.length,s=i?n:-1;(i?s--:++s<n)&&t(e[s],s,e););return r?en(e,i?0:s,i?s+1:n):en(e,i?s+1:0,i?n:s)}function cn(e,t){var r=e;return r instanceof Vr&&(r=r.value()),It(t,(function(e,t){return t.func.apply(t.thisArg,wt([e],t.args))}),r)}function dn(e,t,r){var n=e.length;if(n<2)return n?ln(e[0]):[];for(var s=-1,a=i(n);++s<n;)for(var o=e[s],l=-1;++l<n;)l!=s&&(a[s]=ui(a[s]||o,e[l],t,r));return ln(pi(a,1),t,r)}function mn(e,t,r){for(var i=-1,s=e.length,a=t.length,o={};++i<s;){var l=i<a?t[i]:n;r(o,e[i],l)}return o}function pn(e){return qa(e)?e:[]}function gn(e){return"function"==typeof e?e:nl}function _n(e,t){return Wa(e)?e:vs(e,t)?[e]:Ns(yo(e))}var vn=qi;function yn(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:en(e,t,r)}var En=ht||function(e){return st.clearTimeout(e)};function Tn(e,t){if(t)return e.slice();var r=e.length,i=je?je(r):new e.constructor(r);return e.copy(i),i}function Sn(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function bn(e,t){var r=t?Sn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function An(e,t){if(e!==t){var r=e!==n,i=null===e,s=e==e,a=lo(e),o=t!==n,l=null===t,u=t==t,h=lo(t);if(!l&&!h&&!a&&e>t||a&&o&&u&&!l&&!h||i&&o&&u||!r&&u||!s)return 1;if(!i&&!a&&!h&&e<t||h&&r&&s&&!i&&!a||l&&r&&s||!o&&s||!u)return-1}return 0}function Rn(e,t,r,n){for(var s=-1,a=e.length,o=r.length,l=-1,u=t.length,h=gr(a-o,0),f=i(u+h),c=!n;++l<u;)f[l]=t[l];for(;++s<o;)(c||s<a)&&(f[r[s]]=e[s]);for(;h--;)f[l++]=e[s++];return f}function wn(e,t,r,n){for(var s=-1,a=e.length,o=-1,l=r.length,u=-1,h=t.length,f=gr(a-l,0),c=i(f+h),d=!n;++s<f;)c[s]=e[s];for(var m=s;++u<h;)c[m+u]=t[u];for(;++o<l;)(d||s<a)&&(c[m+r[o]]=e[s++]);return c}function In(e,t){var r=-1,n=e.length;for(t||(t=i(n));++r<n;)t[r]=e[r];return t}function Fn(e,t,r,i){var s=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var l=t[a],u=i?i(r[l],e[l],l,r,e):n;u===n&&(u=e[l]),s?ii(r,l,u):Jr(r,l,u)}return r}function Ln(e,t){return function(r,i){var n=Wa(r)?vt:ti,s=t?t():{};return n(r,e,as(i,2),s)}}function Cn(e){return qi((function(t,r){var i=-1,s=r.length,a=s>1?r[s-1]:n,o=s>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(s--,a):n,o&&_s(r[0],r[1],o)&&(a=s<3?n:a,s=1),t=Ae(t);++i<s;){var l=r[i];l&&e(t,l,i,a)}return t}))}function Pn(e,t){return function(r,i){if(null==r)return r;if(!$a(r))return e(r,i);for(var n=r.length,s=t?n:-1,a=Ae(r);(t?s--:++s<n)&&!1!==i(a[s],s,a););return r}}function On(e){return function(t,r,i){for(var n=-1,s=Ae(t),a=i(t),o=a.length;o--;){var l=a[e?o:++n];if(!1===r(s[l],l,s))break}return t}}function Dn(e){return function(t){var r=Qt(t=yo(t))?sr(t):n,i=r?r[0]:t.charAt(0),s=r?yn(r,1).join(""):t.slice(1);return i[e]()+s}}function Mn(e){return function(t){return It(Qo(Wo(t).replace(We,"")),e,"")}}function xn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ur(e.prototype),i=e.apply(r,t);return eo(i)?i:r}}function Nn(e){return function(t,r,i){var s=Ae(t);if(!$a(t)){var a=as(r,3);t=Oo(t),r=function(e){return a(s[e],e,s)}}var o=e(t,r,i);return o>-1?s[a?t[o]:o]:n}}function Bn(e){return es((function(t){var r=t.length,i=r,a=Hr.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new Ie(s);if(a&&!l&&"wrapper"==ns(o))var l=new Hr([],!0)}for(i=l?i:r;++i<r;){var u=ns(o=t[i]),h="wrapper"==u?is(o):n;l=h&&ys(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?l[ns(h[0])].apply(l,h[3]):1==o.length&&ys(o)?l[u]():l.thru(o)}return function(){var e=arguments,i=e[0];if(l&&1==e.length&&Wa(i))return l.plant(i).value();for(var n=0,s=r?t[n].apply(this,e):i;++n<r;)s=t[n].call(this,s);return s}}))}function kn(e,t,r,s,a,o,l,h,f,c){var d=t&u,m=1&t,p=2&t,g=24&t,_=512&t,v=p?n:xn(e);return function n(){for(var u=arguments.length,y=i(u),E=u;E--;)y[E]=arguments[E];if(g)var T=ss(n),S=Yt(y,T);if(s&&(y=Rn(y,s,a,g)),o&&(y=wn(y,o,l,g)),u-=S,g&&u<c){var b=tr(y,T);return zn(e,t,kn,n.placeholder,r,y,b,h,f,c-u)}var A=m?r:this,R=p?A[e]:e;return u=y.length,h?y=ws(y,h):_&&u>1&&y.reverse(),d&&f<u&&(y.length=f),this&&this!==st&&this instanceof n&&(R=v||xn(R)),R.apply(A,y)}}function Un(e,t){return function(r,i){return function(e,t,r,i){return vi(e,(function(e,n,s){t(i,r(e),n,s)})),i}(r,e,t(i),{})}}function Gn(e,t){return function(r,i){var s;if(r===n&&i===n)return t;if(r!==n&&(s=r),i!==n){if(s===n)return i;"string"==typeof r||"string"==typeof i?(r=on(r),i=on(i)):(r=an(r),i=an(i)),s=e(r,i)}return s}}function Hn(e){return es((function(t){return t=Rt(t,jt(as())),qi((function(r){var i=this;return e(t,(function(e){return _t(e,i,r)}))}))}))}function Vn(e,t){var r=(t=t===n?" ":on(t)).length;if(r<2)return r?$i(t,e):t;var i=$i(t,ur(e/nr(t)));return Qt(t)?yn(sr(i),0,e).join(""):i.slice(0,e)}function jn(e){return function(t,r,s){return s&&"number"!=typeof s&&_s(t,r,s)&&(r=s=n),t=mo(t),r===n?(r=t,t=0):r=mo(r),function(e,t,r,n){for(var s=-1,a=gr(ur((t-e)/(r||1)),0),o=i(a);a--;)o[n?a:++s]=e,e+=r;return o}(t,r,s=s===n?t<r?1:-1:mo(s),e)}}function Wn(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=_o(t),r=_o(r)),e(t,r)}}function zn(e,t,r,i,s,a,o,u,h,f){var c=8&t;t|=c?l:64,4&(t&=~(c?64:l))||(t&=-4);var d=[e,t,s,c?a:n,c?o:n,c?n:a,c?n:o,u,h,f],m=r.apply(n,d);return ys(e)&&Fs(m,d),m.placeholder=i,Ps(m,e,t)}function $n(e){var t=be[e];return function(e,r){if(e=_o(e),(r=null==r?0:_r(po(r),292))&&dr(e)){var i=(yo(e)+"e").split("e");return+((i=(yo(t(i[0]+"e"+(+i[1]+r)))+"e").split("e"))[0]+"e"+(+i[1]-r))}return t(e)}}var qn=Rr&&1/rr(new Rr([,-0]))[1]==h?function(e){return new Rr(e)}:ul;function Yn(e){return function(t){var r=cs(t);return r==S?Jt(t):r==I?ir(t):function(e,t){return Rt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Kn(e,t,r,a,h,f,c,d){var m=2&t;if(!m&&"function"!=typeof e)throw new Ie(s);var p=a?a.length:0;if(p||(t&=-97,a=h=n),c=c===n?c:gr(po(c),0),d=d===n?d:po(d),p-=h?h.length:0,64&t){var g=a,_=h;a=h=n}var v=m?n:is(e),y=[e,t,r,a,h,g,_,f,c,d];if(v&&function(e,t){var r=e[1],i=t[1],n=r|i,s=n<131,a=i==u&&8==r||i==u&&256==r&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==r;if(!s&&!a)return e;1&i&&(e[2]=t[2],n|=1&r?0:4);var l=t[3];if(l){var h=e[3];e[3]=h?Rn(h,l,t[4]):l,e[4]=h?tr(e[3],o):t[4]}(l=t[5])&&(h=e[5],e[5]=h?wn(h,l,t[6]):l,e[6]=h?tr(e[5],o):t[6]),(l=t[7])&&(e[7]=l),i&u&&(e[8]=null==e[8]?t[8]:_r(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}(y,v),e=y[0],t=y[1],r=y[2],a=y[3],h=y[4],!(d=y[9]=y[9]===n?m?0:e.length:gr(y[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||16==t?function(e,t,r){var s=xn(e);return function a(){for(var o=arguments.length,l=i(o),u=o,h=ss(a);u--;)l[u]=arguments[u];var f=o<3&&l[0]!==h&&l[o-1]!==h?[]:tr(l,h);return(o-=f.length)<r?zn(e,t,kn,a.placeholder,n,l,f,n,n,r-o):_t(this&&this!==st&&this instanceof a?s:e,this,l)}}(e,t,d):t!=l&&33!=t||h.length?kn.apply(n,y):function(e,t,r,n){var s=1&t,a=xn(e);return function t(){for(var o=-1,l=arguments.length,u=-1,h=n.length,f=i(h+l),c=this&&this!==st&&this instanceof t?a:e;++u<h;)f[u]=n[u];for(;l--;)f[u++]=arguments[++o];return _t(c,s?r:this,f)}}(e,t,r,a);else var E=function(e,t,r){var i=1&t,n=xn(e);return function t(){return(this&&this!==st&&this instanceof t?n:e).apply(i?r:this,arguments)}}(e,t,r);return Ps((v?Zi:Fs)(E,y),e,t)}function Xn(e,t,r,i){return e===n||Ga(e,Ce[r])&&!De.call(i,r)?t:e}function Zn(e,t,r,i,s,a){return eo(e)&&eo(t)&&(a.set(t,e),Ui(e,t,n,Zn,a),a.delete(t)),e}function Qn(e){return no(e)?n:e}function Jn(e,t,r,i,s,a){var o=1&r,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var h=a.get(e),f=a.get(t);if(h&&f)return h==t&&f==e;var c=-1,d=!0,m=2&r?new $r:n;for(a.set(e,t),a.set(t,e);++c<l;){var p=e[c],g=t[c];if(i)var _=o?i(g,p,c,t,e,a):i(p,g,c,e,t,a);if(_!==n){if(_)continue;d=!1;break}if(m){if(!Lt(t,(function(e,t){if(!zt(m,t)&&(p===e||s(p,e,r,i,a)))return m.push(t)}))){d=!1;break}}else if(p!==g&&!s(p,g,r,i,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function es(e){return Cs(As(e,n,zs),e+"")}function ts(e){return Si(e,Oo,hs)}function rs(e){return Si(e,Do,fs)}var is=Fr?function(e){return Fr.get(e)}:ul;function ns(e){for(var t=e.name+"",r=Lr[t],i=De.call(Lr,t)?r.length:0;i--;){var n=r[i],s=n.func;if(null==s||s==e)return n.name}return t}function ss(e){return(De.call(kr,"placeholder")?kr:e).placeholder}function as(){var e=kr.iteratee||sl;return e=e===sl?Di:e,arguments.length?e(arguments[0],arguments[1]):e}function os(e,t){var r,i,n=e.__data__;return("string"==(i=typeof(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function ls(e){for(var t=Oo(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,Ss(n)]}return t}function us(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Oi(r)?r:n}var hs=fr?function(e){return null==e?[]:(e=Ae(e),St(fr(e),(function(t){return et.call(e,t)})))}:gl,fs=fr?function(e){for(var t=[];e;)wt(t,hs(e)),e=$e(e);return t}:gl,cs=bi;function ds(e,t,r){for(var i=-1,n=(t=_n(t,e)).length,s=!1;++i<n;){var a=Bs(t[i]);if(!(s=null!=e&&r(e,a)))break;e=e[a]}return s||++i!=n?s:!!(n=null==e?0:e.length)&&Ja(n)&&gs(a,n)&&(Wa(e)||ja(e))}function ms(e){return"function"!=typeof e.constructor||Ts(e)?{}:Ur($e(e))}function ps(e){return Wa(e)||ja(e)||!!(nt&&e&&e[nt])}function gs(e,t){var r=typeof e;return!!(t=null==t?f:t)&&("number"==r||"symbol"!=r&&_e.test(e))&&e>-1&&e%1==0&&e<t}function _s(e,t,r){if(!eo(r))return!1;var i=typeof t;return!!("number"==i?$a(r)&&gs(t,r.length):"string"==i&&t in r)&&Ga(r[t],e)}function vs(e,t){if(Wa(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!lo(e))||J.test(e)||!Q.test(e)||null!=t&&e in Ae(t)}function ys(e){var t=ns(e),r=kr[t];if("function"!=typeof r||!(t in Vr.prototype))return!1;if(e===r)return!0;var i=is(r);return!!i&&e===i[0]}(Sr&&cs(new Sr(new ArrayBuffer(1)))!=O||br&&cs(new br)!=S||Ar&&cs(Ar.resolve())!=R||Rr&&cs(new Rr)!=I||wr&&cs(new wr)!=C)&&(cs=function(e){var t=bi(e),r=t==A?e.constructor:n,i=r?ks(r):"";if(i)switch(i){case Cr:return O;case Pr:return S;case Or:return R;case Dr:return I;case Mr:return C}return t});var Es=Pe?Za:_l;function Ts(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ce)}function Ss(e){return e==e&&!eo(e)}function bs(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in Ae(r))}}function As(e,t,r){return t=gr(t===n?e.length-1:t,0),function(){for(var n=arguments,s=-1,a=gr(n.length-t,0),o=i(a);++s<a;)o[s]=n[t+s];s=-1;for(var l=i(t+1);++s<t;)l[s]=n[s];return l[t]=r(o),_t(e,this,l)}}function Rs(e,t){return t.length<2?e:Ti(e,en(t,0,-1))}function ws(e,t){for(var r=e.length,i=_r(t.length,r),s=In(e);i--;){var a=t[i];e[i]=gs(a,r)?s[a]:n}return e}function Is(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Fs=Os(Zi),Ls=kt||function(e,t){return st.setTimeout(e,t)},Cs=Os(Qi);function Ps(e,t,r){var i=t+"";return Cs(e,function(e,t){var r=t.length;if(!r)return e;var i=r-1;return t[i]=(r>1?"& ":"")+t[i],t=t.join(r>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return yt(m,(function(r){var i="_."+r[0];t&r[1]&&!bt(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(oe):[]}(i),r)))}function Os(e){var t=0,r=0;return function(){var i=vr(),s=16-(i-r);if(r=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ds(e,t){var r=-1,i=e.length,s=i-1;for(t=t===n?i:t;++r<t;){var a=zi(r,s),o=e[a];e[a]=e[r],e[r]=o}return e.length=t,e}var Ms,xs,Ns=(Ms=Ma((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,r,i,n){t.push(i?n.replace(he,"$1"):r||e)})),t}),(function(e){return 500===xs.size&&xs.clear(),e})),xs=Ms.cache,Ms);function Bs(e){if("string"==typeof e||lo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ks(e){if(null!=e){try{return Oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Us(e){if(e instanceof Vr)return e.clone();var t=new Hr(e.__wrapped__,e.__chain__);return t.__actions__=In(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Gs=qi((function(e,t){return qa(e)?ui(e,pi(t,1,qa,!0)):[]})),Hs=qi((function(e,t){var r=Xs(t);return qa(r)&&(r=n),qa(e)?ui(e,pi(t,1,qa,!0),as(r,2)):[]})),Vs=qi((function(e,t){var r=Xs(t);return qa(r)&&(r=n),qa(e)?ui(e,pi(t,1,qa,!0),n,r):[]}));function js(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var n=null==r?0:po(r);return n<0&&(n=gr(i+n,0)),Ot(e,as(t,3),n)}function Ws(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var s=i-1;return r!==n&&(s=po(r),s=r<0?gr(i+s,0):_r(s,i-1)),Ot(e,as(t,3),s,!0)}function zs(e){return null!=e&&e.length?pi(e,1):[]}function $s(e){return e&&e.length?e[0]:n}var qs=qi((function(e){var t=Rt(e,pn);return t.length&&t[0]===e[0]?Ii(t):[]})),Ys=qi((function(e){var t=Xs(e),r=Rt(e,pn);return t===Xs(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Ii(r,as(t,2)):[]})),Ks=qi((function(e){var t=Xs(e),r=Rt(e,pn);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Ii(r,n,t):[]}));function Xs(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Zs=qi(Qs);function Qs(e,t){return e&&e.length&&t&&t.length?ji(e,t):e}var Js=es((function(e,t){var r=null==e?0:e.length,i=ni(e,t);return Wi(e,Rt(t,(function(e){return gs(e,r)?+e:e})).sort(An)),i}));function ea(e){return null==e?e:Tr.call(e)}var ta=qi((function(e){return ln(pi(e,1,qa,!0))})),ra=qi((function(e){var t=Xs(e);return qa(t)&&(t=n),ln(pi(e,1,qa,!0),as(t,2))})),ia=qi((function(e){var t=Xs(e);return t="function"==typeof t?t:n,ln(pi(e,1,qa,!0),n,t)}));function na(e){if(!e||!e.length)return[];var t=0;return e=St(e,(function(e){if(qa(e))return t=gr(e.length,t),!0})),Ht(t,(function(t){return Rt(e,Bt(t))}))}function sa(e,t){if(!e||!e.length)return[];var r=na(e);return null==t?r:Rt(r,(function(e){return _t(t,n,e)}))}var aa=qi((function(e,t){return qa(e)?ui(e,t):[]})),oa=qi((function(e){return dn(St(e,qa))})),la=qi((function(e){var t=Xs(e);return qa(t)&&(t=n),dn(St(e,qa),as(t,2))})),ua=qi((function(e){var t=Xs(e);return t="function"==typeof t?t:n,dn(St(e,qa),n,t)})),ha=qi(na),fa=qi((function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,sa(e,r)}));function ca(e){var t=kr(e);return t.__chain__=!0,t}function da(e,t){return t(e)}var ma=es((function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,s=function(t){return ni(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Vr&&gs(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:da,args:[s],thisArg:n}),new Hr(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(s)})),pa=Ln((function(e,t,r){De.call(e,r)?++e[r]:ii(e,r,1)})),ga=Nn(js),_a=Nn(Ws);function va(e,t){return(Wa(e)?yt:hi)(e,as(t,3))}function ya(e,t){return(Wa(e)?Et:fi)(e,as(t,3))}var Ea=Ln((function(e,t,r){De.call(e,r)?e[r].push(t):ii(e,r,[t])})),Ta=qi((function(e,t,r){var n=-1,s="function"==typeof t,a=$a(e)?i(e.length):[];return hi(e,(function(e){a[++n]=s?_t(t,e,r):Fi(e,t,r)})),a})),Sa=Ln((function(e,t,r){ii(e,r,t)}));function ba(e,t){return(Wa(e)?Rt:Ni)(e,as(t,3))}var Aa=Ln((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),Ra=qi((function(e,t){if(null==e)return[];var r=t.length;return r>1&&_s(e,t[0],t[1])?t=[]:r>2&&_s(t[0],t[1],t[2])&&(t=[t[0]]),Hi(e,pi(t,1),[])})),wa=Ct||function(){return st.Date.now()};function Ia(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Kn(e,u,n,n,n,n,t)}function Fa(e,t){var r;if("function"!=typeof t)throw new Ie(s);return e=po(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var La=qi((function(e,t,r){var i=1;if(r.length){var n=tr(r,ss(La));i|=l}return Kn(e,i,t,r,n)})),Ca=qi((function(e,t,r){var i=3;if(r.length){var n=tr(r,ss(Ca));i|=l}return Kn(t,i,e,r,n)}));function Pa(e,t,r){var i,a,o,l,u,h,f=0,c=!1,d=!1,m=!0;if("function"!=typeof e)throw new Ie(s);function p(t){var r=i,s=a;return i=a=n,f=t,l=e.apply(s,r)}function g(e){return f=e,u=Ls(v,t),c?p(e):l}function _(e){var r=e-h;return h===n||r>=t||r<0||d&&e-f>=o}function v(){var e=wa();if(_(e))return y(e);u=Ls(v,function(e){var r=t-(e-h);return d?_r(r,o-(e-f)):r}(e))}function y(e){return u=n,m&&i?p(e):(i=a=n,l)}function E(){var e=wa(),r=_(e);if(i=arguments,a=this,h=e,r){if(u===n)return g(h);if(d)return En(u),u=Ls(v,t),p(h)}return u===n&&(u=Ls(v,t)),l}return t=_o(t)||0,eo(r)&&(c=!!r.leading,o=(d="maxWait"in r)?gr(_o(r.maxWait)||0,t):o,m="trailing"in r?!!r.trailing:m),E.cancel=function(){u!==n&&En(u),f=0,i=h=a=u=n},E.flush=function(){return u===n?l:y(wa())},E}var Oa=qi((function(e,t){return li(e,1,t)})),Da=qi((function(e,t,r){return li(e,_o(t)||0,r)}));function Ma(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(s);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(Ma.Cache||zr),r}function xa(e){if("function"!=typeof e)throw new Ie(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ma.Cache=zr;var Na=vn((function(e,t){var r=(t=1==t.length&&Wa(t[0])?Rt(t[0],jt(as())):Rt(pi(t,1),jt(as()))).length;return qi((function(i){for(var n=-1,s=_r(i.length,r);++n<s;)i[n]=t[n].call(this,i[n]);return _t(e,this,i)}))})),Ba=qi((function(e,t){var r=tr(t,ss(Ba));return Kn(e,l,n,t,r)})),ka=qi((function(e,t){var r=tr(t,ss(ka));return Kn(e,64,n,t,r)})),Ua=es((function(e,t){return Kn(e,256,n,n,n,t)}));function Ga(e,t){return e===t||e!=e&&t!=t}var Ha=Wn(Ai),Va=Wn((function(e,t){return e>=t})),ja=Li(function(){return arguments}())?Li:function(e){return to(e)&&De.call(e,"callee")&&!et.call(e,"callee")},Wa=i.isArray,za=ft?jt(ft):function(e){return to(e)&&bi(e)==P};function $a(e){return null!=e&&Ja(e.length)&&!Za(e)}function qa(e){return to(e)&&$a(e)}var Ya=cr||_l,Ka=ct?jt(ct):function(e){return to(e)&&bi(e)==v};function Xa(e){if(!to(e))return!1;var t=bi(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!no(e)}function Za(e){if(!eo(e))return!1;var t=bi(e);return t==E||t==T||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qa(e){return"number"==typeof e&&e==po(e)}function Ja(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function eo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function to(e){return null!=e&&"object"==typeof e}var ro=dt?jt(dt):function(e){return to(e)&&cs(e)==S};function io(e){return"number"==typeof e||to(e)&&bi(e)==b}function no(e){if(!to(e)||bi(e)!=A)return!1;var t=$e(e);if(null===t)return!0;var r=De.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Oe.call(r)==Be}var so=mt?jt(mt):function(e){return to(e)&&bi(e)==w},ao=pt?jt(pt):function(e){return to(e)&&cs(e)==I};function oo(e){return"string"==typeof e||!Wa(e)&&to(e)&&bi(e)==F}function lo(e){return"symbol"==typeof e||to(e)&&bi(e)==L}var uo=gt?jt(gt):function(e){return to(e)&&Ja(e.length)&&!!Qe[bi(e)]},ho=Wn(xi),fo=Wn((function(e,t){return e<=t}));function co(e){if(!e)return[];if($a(e))return oo(e)?sr(e):In(e);if(at&&e[at])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[at]());var t=cs(e);return(t==S?Jt:t==I?rr:Ho)(e)}function mo(e){return e?(e=_o(e))===h||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function po(e){var t=mo(e),r=t%1;return t==t?r?t-r:t:0}function go(e){return e?si(po(e),0,d):0}function _o(e){if("number"==typeof e)return e;if(lo(e))return c;if(eo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Vt(e);var r=me.test(e);return r||ge.test(e)?rt(e.slice(2),r?2:8):de.test(e)?c:+e}function vo(e){return Fn(e,Do(e))}function yo(e){return null==e?"":on(e)}var Eo=Cn((function(e,t){if(Ts(t)||$a(t))Fn(t,Oo(t),e);else for(var r in t)De.call(t,r)&&Jr(e,r,t[r])})),To=Cn((function(e,t){Fn(t,Do(t),e)})),So=Cn((function(e,t,r,i){Fn(t,Do(t),e,i)})),bo=Cn((function(e,t,r,i){Fn(t,Oo(t),e,i)})),Ao=es(ni),Ro=qi((function(e,t){e=Ae(e);var r=-1,i=t.length,s=i>2?t[2]:n;for(s&&_s(t[0],t[1],s)&&(i=1);++r<i;)for(var a=t[r],o=Do(a),l=-1,u=o.length;++l<u;){var h=o[l],f=e[h];(f===n||Ga(f,Ce[h])&&!De.call(e,h))&&(e[h]=a[h])}return e})),wo=qi((function(e){return e.push(n,Zn),_t(xo,n,e)}));function Io(e,t,r){var i=null==e?n:Ti(e,t);return i===n?r:i}function Fo(e,t){return null!=e&&ds(e,t,wi)}var Lo=Un((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),e[t]=r}),tl(nl)),Co=Un((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),De.call(e,t)?e[t].push(r):e[t]=[r]}),as),Po=qi(Fi);function Oo(e){return $a(e)?Yr(e):Mi(e)}function Do(e){return $a(e)?Yr(e,!0):function(e){if(!eo(e))return function(e){var t=[];if(null!=e)for(var r in Ae(e))t.push(r);return t}(e);var t=Ts(e),r=[];for(var i in e)("constructor"!=i||!t&&De.call(e,i))&&r.push(i);return r}(e)}var Mo=Cn((function(e,t,r){Ui(e,t,r)})),xo=Cn((function(e,t,r,i){Ui(e,t,r,i)})),No=es((function(e,t){var r={};if(null==e)return r;var i=!1;t=Rt(t,(function(t){return t=_n(t,e),i||(i=t.length>1),t})),Fn(e,rs(e),r),i&&(r=ai(r,7,Qn));for(var n=t.length;n--;)un(r,t[n]);return r})),Bo=es((function(e,t){return null==e?{}:function(e,t){return Vi(e,t,(function(t,r){return Fo(e,r)}))}(e,t)}));function ko(e,t){if(null==e)return{};var r=Rt(rs(e),(function(e){return[e]}));return t=as(t),Vi(e,r,(function(e,r){return t(e,r[0])}))}var Uo=Yn(Oo),Go=Yn(Do);function Ho(e){return null==e?[]:Wt(e,Oo(e))}var Vo=Mn((function(e,t,r){return t=t.toLowerCase(),e+(r?jo(t):t)}));function jo(e){return Zo(yo(e).toLowerCase())}function Wo(e){return(e=yo(e))&&e.replace(ve,Kt).replace(ze,"")}var zo=Mn((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),$o=Mn((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),qo=Dn("toLowerCase"),Yo=Mn((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),Ko=Mn((function(e,t,r){return e+(r?" ":"")+Zo(t)})),Xo=Mn((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Zo=Dn("toUpperCase");function Qo(e,t,r){return e=yo(e),(t=r?n:t)===n?function(e){return Ke.test(e)}(e)?function(e){return e.match(qe)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var Jo=qi((function(e,t){try{return _t(e,n,t)}catch(e){return Xa(e)?e:new Te(e)}})),el=es((function(e,t){return yt(t,(function(t){t=Bs(t),ii(e,t,La(e[t],e))})),e}));function tl(e){return function(){return e}}var rl=Bn(),il=Bn(!0);function nl(e){return e}function sl(e){return Di("function"==typeof e?e:ai(e,1))}var al=qi((function(e,t){return function(r){return Fi(r,e,t)}})),ol=qi((function(e,t){return function(r){return Fi(e,r,t)}}));function ll(e,t,r){var i=Oo(t),n=Ei(t,i);null!=r||eo(t)&&(n.length||!i.length)||(r=t,t=e,e=this,n=Ei(t,Oo(t)));var s=!(eo(r)&&"chain"in r&&!r.chain),a=Za(e);return yt(n,(function(r){var i=t[r];e[r]=i,a&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__),n=r.__actions__=In(this.__actions__);return n.push({func:i,args:arguments,thisArg:e}),r.__chain__=t,r}return i.apply(e,wt([this.value()],arguments))})})),e}function ul(){}var hl=Hn(Rt),fl=Hn(Tt),cl=Hn(Lt);function dl(e){return vs(e)?Bt(Bs(e)):function(e){return function(t){return Ti(t,e)}}(e)}var ml=jn(),pl=jn(!0);function gl(){return[]}function _l(){return!1}var vl,yl=Gn((function(e,t){return e+t}),0),El=$n("ceil"),Tl=Gn((function(e,t){return e/t}),1),Sl=$n("floor"),bl=Gn((function(e,t){return e*t}),1),Al=$n("round"),Rl=Gn((function(e,t){return e-t}),0);return kr.after=function(e,t){if("function"!=typeof t)throw new Ie(s);return e=po(e),function(){if(--e<1)return t.apply(this,arguments)}},kr.ary=Ia,kr.assign=Eo,kr.assignIn=To,kr.assignInWith=So,kr.assignWith=bo,kr.at=Ao,kr.before=Fa,kr.bind=La,kr.bindAll=el,kr.bindKey=Ca,kr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wa(e)?e:[e]},kr.chain=ca,kr.chunk=function(e,t,r){t=(r?_s(e,t,r):t===n)?1:gr(po(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var a=0,o=0,l=i(ur(s/t));a<s;)l[o++]=en(e,a,a+=t);return l},kr.compact=function(e){for(var t=-1,r=null==e?0:e.length,i=0,n=[];++t<r;){var s=e[t];s&&(n[i++]=s)}return n},kr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return wt(Wa(r)?In(r):[r],pi(t,1))},kr.cond=function(e){var t=null==e?0:e.length,r=as();return e=t?Rt(e,(function(e){if("function"!=typeof e[1])throw new Ie(s);return[r(e[0]),e[1]]})):[],qi((function(r){for(var i=-1;++i<t;){var n=e[i];if(_t(n[0],this,r))return _t(n[1],this,r)}}))},kr.conforms=function(e){return function(e){var t=Oo(e);return function(r){return oi(r,e,t)}}(ai(e,1))},kr.constant=tl,kr.countBy=pa,kr.create=function(e,t){var r=Ur(e);return null==t?r:ri(r,t)},kr.curry=function e(t,r,i){var s=Kn(t,8,n,n,n,n,n,r=i?n:r);return s.placeholder=e.placeholder,s},kr.curryRight=function e(t,r,i){var s=Kn(t,16,n,n,n,n,n,r=i?n:r);return s.placeholder=e.placeholder,s},kr.debounce=Pa,kr.defaults=Ro,kr.defaultsDeep=wo,kr.defer=Oa,kr.delay=Da,kr.difference=Gs,kr.differenceBy=Hs,kr.differenceWith=Vs,kr.drop=function(e,t,r){var i=null==e?0:e.length;return i?en(e,(t=r||t===n?1:po(t))<0?0:t,i):[]},kr.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?en(e,0,(t=i-(t=r||t===n?1:po(t)))<0?0:t):[]},kr.dropRightWhile=function(e,t){return e&&e.length?fn(e,as(t,3),!0,!0):[]},kr.dropWhile=function(e,t){return e&&e.length?fn(e,as(t,3),!0):[]},kr.fill=function(e,t,r,i){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&_s(e,t,r)&&(r=0,i=s),function(e,t,r,i){var s=e.length;for((r=po(r))<0&&(r=-r>s?0:s+r),(i=i===n||i>s?s:po(i))<0&&(i+=s),i=r>i?0:go(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},kr.filter=function(e,t){return(Wa(e)?St:mi)(e,as(t,3))},kr.flatMap=function(e,t){return pi(ba(e,t),1)},kr.flatMapDeep=function(e,t){return pi(ba(e,t),h)},kr.flatMapDepth=function(e,t,r){return r=r===n?1:po(r),pi(ba(e,t),r)},kr.flatten=zs,kr.flattenDeep=function(e){return null!=e&&e.length?pi(e,h):[]},kr.flattenDepth=function(e,t){return null!=e&&e.length?pi(e,t=t===n?1:po(t)):[]},kr.flip=function(e){return Kn(e,512)},kr.flow=rl,kr.flowRight=il,kr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,i={};++t<r;){var n=e[t];i[n[0]]=n[1]}return i},kr.functions=function(e){return null==e?[]:Ei(e,Oo(e))},kr.functionsIn=function(e){return null==e?[]:Ei(e,Do(e))},kr.groupBy=Ea,kr.initial=function(e){return null!=e&&e.length?en(e,0,-1):[]},kr.intersection=qs,kr.intersectionBy=Ys,kr.intersectionWith=Ks,kr.invert=Lo,kr.invertBy=Co,kr.invokeMap=Ta,kr.iteratee=sl,kr.keyBy=Sa,kr.keys=Oo,kr.keysIn=Do,kr.map=ba,kr.mapKeys=function(e,t){var r={};return t=as(t,3),vi(e,(function(e,i,n){ii(r,t(e,i,n),e)})),r},kr.mapValues=function(e,t){var r={};return t=as(t,3),vi(e,(function(e,i,n){ii(r,i,t(e,i,n))})),r},kr.matches=function(e){return Bi(ai(e,1))},kr.matchesProperty=function(e,t){return ki(e,ai(t,1))},kr.memoize=Ma,kr.merge=Mo,kr.mergeWith=xo,kr.method=al,kr.methodOf=ol,kr.mixin=ll,kr.negate=xa,kr.nthArg=function(e){return e=po(e),qi((function(t){return Gi(t,e)}))},kr.omit=No,kr.omitBy=function(e,t){return ko(e,xa(as(t)))},kr.once=function(e){return Fa(2,e)},kr.orderBy=function(e,t,r,i){return null==e?[]:(Wa(t)||(t=null==t?[]:[t]),Wa(r=i?n:r)||(r=null==r?[]:[r]),Hi(e,t,r))},kr.over=hl,kr.overArgs=Na,kr.overEvery=fl,kr.overSome=cl,kr.partial=Ba,kr.partialRight=ka,kr.partition=Aa,kr.pick=Bo,kr.pickBy=ko,kr.property=dl,kr.propertyOf=function(e){return function(t){return null==e?n:Ti(e,t)}},kr.pull=Zs,kr.pullAll=Qs,kr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?ji(e,t,as(r,2)):e},kr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?ji(e,t,n,r):e},kr.pullAt=Js,kr.range=ml,kr.rangeRight=pl,kr.rearg=Ua,kr.reject=function(e,t){return(Wa(e)?St:mi)(e,xa(as(t,3)))},kr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var i=-1,n=[],s=e.length;for(t=as(t,3);++i<s;){var a=e[i];t(a,i,e)&&(r.push(a),n.push(i))}return Wi(e,n),r},kr.rest=function(e,t){if("function"!=typeof e)throw new Ie(s);return qi(e,t=t===n?t:po(t))},kr.reverse=ea,kr.sampleSize=function(e,t,r){return t=(r?_s(e,t,r):t===n)?1:po(t),(Wa(e)?Xr:Ki)(e,t)},kr.set=function(e,t,r){return null==e?e:Xi(e,t,r)},kr.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Xi(e,t,r,i)},kr.shuffle=function(e){return(Wa(e)?Zr:Ji)(e)},kr.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&_s(e,t,r)?(t=0,r=i):(t=null==t?0:po(t),r=r===n?i:po(r)),en(e,t,r)):[]},kr.sortBy=Ra,kr.sortedUniq=function(e){return e&&e.length?sn(e):[]},kr.sortedUniqBy=function(e,t){return e&&e.length?sn(e,as(t,2)):[]},kr.split=function(e,t,r){return r&&"number"!=typeof r&&_s(e,t,r)&&(t=r=n),(r=r===n?d:r>>>0)?(e=yo(e))&&("string"==typeof t||null!=t&&!so(t))&&!(t=on(t))&&Qt(e)?yn(sr(e),0,r):e.split(t,r):[]},kr.spread=function(e,t){if("function"!=typeof e)throw new Ie(s);return t=null==t?0:gr(po(t),0),qi((function(r){var i=r[t],n=yn(r,0,t);return i&&wt(n,i),_t(e,this,n)}))},kr.tail=function(e){var t=null==e?0:e.length;return t?en(e,1,t):[]},kr.take=function(e,t,r){return e&&e.length?en(e,0,(t=r||t===n?1:po(t))<0?0:t):[]},kr.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?en(e,(t=i-(t=r||t===n?1:po(t)))<0?0:t,i):[]},kr.takeRightWhile=function(e,t){return e&&e.length?fn(e,as(t,3),!1,!0):[]},kr.takeWhile=function(e,t){return e&&e.length?fn(e,as(t,3)):[]},kr.tap=function(e,t){return t(e),e},kr.throttle=function(e,t,r){var i=!0,n=!0;if("function"!=typeof e)throw new Ie(s);return eo(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),Pa(e,t,{leading:i,maxWait:t,trailing:n})},kr.thru=da,kr.toArray=co,kr.toPairs=Uo,kr.toPairsIn=Go,kr.toPath=function(e){return Wa(e)?Rt(e,Bs):lo(e)?[e]:In(Ns(yo(e)))},kr.toPlainObject=vo,kr.transform=function(e,t,r){var i=Wa(e),n=i||Ya(e)||uo(e);if(t=as(t,4),null==r){var s=e&&e.constructor;r=n?i?new s:[]:eo(e)&&Za(s)?Ur($e(e)):{}}return(n?yt:vi)(e,(function(e,i,n){return t(r,e,i,n)})),r},kr.unary=function(e){return Ia(e,1)},kr.union=ta,kr.unionBy=ra,kr.unionWith=ia,kr.uniq=function(e){return e&&e.length?ln(e):[]},kr.uniqBy=function(e,t){return e&&e.length?ln(e,as(t,2)):[]},kr.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?ln(e,n,t):[]},kr.unset=function(e,t){return null==e||un(e,t)},kr.unzip=na,kr.unzipWith=sa,kr.update=function(e,t,r){return null==e?e:hn(e,t,gn(r))},kr.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:hn(e,t,gn(r),i)},kr.values=Ho,kr.valuesIn=function(e){return null==e?[]:Wt(e,Do(e))},kr.without=aa,kr.words=Qo,kr.wrap=function(e,t){return Ba(gn(t),e)},kr.xor=oa,kr.xorBy=la,kr.xorWith=ua,kr.zip=ha,kr.zipObject=function(e,t){return mn(e||[],t||[],Jr)},kr.zipObjectDeep=function(e,t){return mn(e||[],t||[],Xi)},kr.zipWith=fa,kr.entries=Uo,kr.entriesIn=Go,kr.extend=To,kr.extendWith=So,ll(kr,kr),kr.add=yl,kr.attempt=Jo,kr.camelCase=Vo,kr.capitalize=jo,kr.ceil=El,kr.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=_o(r))==r?r:0),t!==n&&(t=(t=_o(t))==t?t:0),si(_o(e),t,r)},kr.clone=function(e){return ai(e,4)},kr.cloneDeep=function(e){return ai(e,5)},kr.cloneDeepWith=function(e,t){return ai(e,5,t="function"==typeof t?t:n)},kr.cloneWith=function(e,t){return ai(e,4,t="function"==typeof t?t:n)},kr.conformsTo=function(e,t){return null==t||oi(e,t,Oo(t))},kr.deburr=Wo,kr.defaultTo=function(e,t){return null==e||e!=e?t:e},kr.divide=Tl,kr.endsWith=function(e,t,r){e=yo(e),t=on(t);var i=e.length,s=r=r===n?i:si(po(r),0,i);return(r-=t.length)>=0&&e.slice(r,s)==t},kr.eq=Ga,kr.escape=function(e){return(e=yo(e))&&Y.test(e)?e.replace($,Xt):e},kr.escapeRegExp=function(e){return(e=yo(e))&&re.test(e)?e.replace(te,"\\$&"):e},kr.every=function(e,t,r){var i=Wa(e)?Tt:ci;return r&&_s(e,t,r)&&(t=n),i(e,as(t,3))},kr.find=ga,kr.findIndex=js,kr.findKey=function(e,t){return Pt(e,as(t,3),vi)},kr.findLast=_a,kr.findLastIndex=Ws,kr.findLastKey=function(e,t){return Pt(e,as(t,3),yi)},kr.floor=Sl,kr.forEach=va,kr.forEachRight=ya,kr.forIn=function(e,t){return null==e?e:gi(e,as(t,3),Do)},kr.forInRight=function(e,t){return null==e?e:_i(e,as(t,3),Do)},kr.forOwn=function(e,t){return e&&vi(e,as(t,3))},kr.forOwnRight=function(e,t){return e&&yi(e,as(t,3))},kr.get=Io,kr.gt=Ha,kr.gte=Va,kr.has=function(e,t){return null!=e&&ds(e,t,Ri)},kr.hasIn=Fo,kr.head=$s,kr.identity=nl,kr.includes=function(e,t,r,i){e=$a(e)?e:Ho(e),r=r&&!i?po(r):0;var n=e.length;return r<0&&(r=gr(n+r,0)),oo(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&Dt(e,t,r)>-1},kr.indexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var n=null==r?0:po(r);return n<0&&(n=gr(i+n,0)),Dt(e,t,n)},kr.inRange=function(e,t,r){return t=mo(t),r===n?(r=t,t=0):r=mo(r),function(e,t,r){return e>=_r(t,r)&&e<gr(t,r)}(e=_o(e),t,r)},kr.invoke=Po,kr.isArguments=ja,kr.isArray=Wa,kr.isArrayBuffer=za,kr.isArrayLike=$a,kr.isArrayLikeObject=qa,kr.isBoolean=function(e){return!0===e||!1===e||to(e)&&bi(e)==_},kr.isBuffer=Ya,kr.isDate=Ka,kr.isElement=function(e){return to(e)&&1===e.nodeType&&!no(e)},kr.isEmpty=function(e){if(null==e)return!0;if($a(e)&&(Wa(e)||"string"==typeof e||"function"==typeof e.splice||Ya(e)||uo(e)||ja(e)))return!e.length;var t=cs(e);if(t==S||t==I)return!e.size;if(Ts(e))return!Mi(e).length;for(var r in e)if(De.call(e,r))return!1;return!0},kr.isEqual=function(e,t){return Ci(e,t)},kr.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Ci(e,t,n,r):!!i},kr.isError=Xa,kr.isFinite=function(e){return"number"==typeof e&&dr(e)},kr.isFunction=Za,kr.isInteger=Qa,kr.isLength=Ja,kr.isMap=ro,kr.isMatch=function(e,t){return e===t||Pi(e,t,ls(t))},kr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Pi(e,t,ls(t),r)},kr.isNaN=function(e){return io(e)&&e!=+e},kr.isNative=function(e){if(Es(e))throw new Te("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Oi(e)},kr.isNil=function(e){return null==e},kr.isNull=function(e){return null===e},kr.isNumber=io,kr.isObject=eo,kr.isObjectLike=to,kr.isPlainObject=no,kr.isRegExp=so,kr.isSafeInteger=function(e){return Qa(e)&&e>=-9007199254740991&&e<=f},kr.isSet=ao,kr.isString=oo,kr.isSymbol=lo,kr.isTypedArray=uo,kr.isUndefined=function(e){return e===n},kr.isWeakMap=function(e){return to(e)&&cs(e)==C},kr.isWeakSet=function(e){return to(e)&&"[object WeakSet]"==bi(e)},kr.join=function(e,t){return null==e?"":mr.call(e,t)},kr.kebabCase=zo,kr.last=Xs,kr.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var s=i;return r!==n&&(s=(s=po(r))<0?gr(i+s,0):_r(s,i-1)),t==t?function(e,t,r){for(var i=r+1;i--;)if(e[i]===t)return i;return i}(e,t,s):Ot(e,xt,s,!0)},kr.lowerCase=$o,kr.lowerFirst=qo,kr.lt=ho,kr.lte=fo,kr.max=function(e){return e&&e.length?di(e,nl,Ai):n},kr.maxBy=function(e,t){return e&&e.length?di(e,as(t,2),Ai):n},kr.mean=function(e){return Nt(e,nl)},kr.meanBy=function(e,t){return Nt(e,as(t,2))},kr.min=function(e){return e&&e.length?di(e,nl,xi):n},kr.minBy=function(e,t){return e&&e.length?di(e,as(t,2),xi):n},kr.stubArray=gl,kr.stubFalse=_l,kr.stubObject=function(){return{}},kr.stubString=function(){return""},kr.stubTrue=function(){return!0},kr.multiply=bl,kr.nth=function(e,t){return e&&e.length?Gi(e,po(t)):n},kr.noConflict=function(){return st._===this&&(st._=ke),this},kr.noop=ul,kr.now=wa,kr.pad=function(e,t,r){e=yo(e);var i=(t=po(t))?nr(e):0;if(!t||i>=t)return e;var n=(t-i)/2;return Vn(hr(n),r)+e+Vn(ur(n),r)},kr.padEnd=function(e,t,r){e=yo(e);var i=(t=po(t))?nr(e):0;return t&&i<t?e+Vn(t-i,r):e},kr.padStart=function(e,t,r){e=yo(e);var i=(t=po(t))?nr(e):0;return t&&i<t?Vn(t-i,r)+e:e},kr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),yr(yo(e).replace(ie,""),t||0)},kr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&_s(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=mo(e),t===n?(t=e,e=0):t=mo(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var s=Er();return _r(e+s*(t-e+tt("1e-"+((s+"").length-1))),t)}return zi(e,t)},kr.reduce=function(e,t,r){var i=Wa(e)?It:Ut,n=arguments.length<3;return i(e,as(t,4),r,n,hi)},kr.reduceRight=function(e,t,r){var i=Wa(e)?Ft:Ut,n=arguments.length<3;return i(e,as(t,4),r,n,fi)},kr.repeat=function(e,t,r){return t=(r?_s(e,t,r):t===n)?1:po(t),$i(yo(e),t)},kr.replace=function(){var e=arguments,t=yo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},kr.result=function(e,t,r){var i=-1,s=(t=_n(t,e)).length;for(s||(s=1,e=n);++i<s;){var a=null==e?n:e[Bs(t[i])];a===n&&(i=s,a=r),e=Za(a)?a.call(e):a}return e},kr.round=Al,kr.runInContext=e,kr.sample=function(e){return(Wa(e)?Kr:Yi)(e)},kr.size=function(e){if(null==e)return 0;if($a(e))return oo(e)?nr(e):e.length;var t=cs(e);return t==S||t==I?e.size:Mi(e).length},kr.snakeCase=Yo,kr.some=function(e,t,r){var i=Wa(e)?Lt:tn;return r&&_s(e,t,r)&&(t=n),i(e,as(t,3))},kr.sortedIndex=function(e,t){return rn(e,t)},kr.sortedIndexBy=function(e,t,r){return nn(e,t,as(r,2))},kr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var i=rn(e,t);if(i<r&&Ga(e[i],t))return i}return-1},kr.sortedLastIndex=function(e,t){return rn(e,t,!0)},kr.sortedLastIndexBy=function(e,t,r){return nn(e,t,as(r,2),!0)},kr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=rn(e,t,!0)-1;if(Ga(e[r],t))return r}return-1},kr.startCase=Ko,kr.startsWith=function(e,t,r){return e=yo(e),r=null==r?0:si(po(r),0,e.length),t=on(t),e.slice(r,r+t.length)==t},kr.subtract=Rl,kr.sum=function(e){return e&&e.length?Gt(e,nl):0},kr.sumBy=function(e,t){return e&&e.length?Gt(e,as(t,2)):0},kr.template=function(e,t,r){var i=kr.templateSettings;r&&_s(e,t,r)&&(t=n),e=yo(e),t=So({},t,i,Xn);var s,a,o=So({},t.imports,i.imports,Xn),l=Oo(o),u=Wt(o,l),h=0,f=t.interpolate||ye,c="__p += '",d=Re((t.escape||ye).source+"|"+f.source+"|"+(f===Z?fe:ye).source+"|"+(t.evaluate||ye).source+"|$","g"),m="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ze+"]")+"\n";e.replace(d,(function(t,r,i,n,o,l){return i||(i=n),c+=e.slice(h,l).replace(Ee,Zt),r&&(s=!0,c+="' +\n__e("+r+") +\n'"),o&&(a=!0,c+="';\n"+o+";\n__p += '"),i&&(c+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=l+t.length,t})),c+="';\n";var p=De.call(t,"variable")&&t.variable;if(p){if(ue.test(p))throw new Te("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(a?c.replace(V,""):c).replace(j,"$1").replace(W,"$1;"),c="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var g=Jo((function(){return Se(l,m+"return "+c).apply(n,u)}));if(g.source=c,Xa(g))throw g;return g},kr.times=function(e,t){if((e=po(e))<1||e>f)return[];var r=d,i=_r(e,d);t=as(t),e-=d;for(var n=Ht(i,t);++r<e;)t(r);return n},kr.toFinite=mo,kr.toInteger=po,kr.toLength=go,kr.toLower=function(e){return yo(e).toLowerCase()},kr.toNumber=_o,kr.toSafeInteger=function(e){return e?si(po(e),-9007199254740991,f):0===e?e:0},kr.toString=yo,kr.toUpper=function(e){return yo(e).toUpperCase()},kr.trim=function(e,t,r){if((e=yo(e))&&(r||t===n))return Vt(e);if(!e||!(t=on(t)))return e;var i=sr(e),s=sr(t);return yn(i,$t(i,s),qt(i,s)+1).join("")},kr.trimEnd=function(e,t,r){if((e=yo(e))&&(r||t===n))return e.slice(0,ar(e)+1);if(!e||!(t=on(t)))return e;var i=sr(e);return yn(i,0,qt(i,sr(t))+1).join("")},kr.trimStart=function(e,t,r){if((e=yo(e))&&(r||t===n))return e.replace(ie,"");if(!e||!(t=on(t)))return e;var i=sr(e);return yn(i,$t(i,sr(t))).join("")},kr.truncate=function(e,t){var r=30,i="...";if(eo(t)){var s="separator"in t?t.separator:s;r="length"in t?po(t.length):r,i="omission"in t?on(t.omission):i}var a=(e=yo(e)).length;if(Qt(e)){var o=sr(e);a=o.length}if(r>=a)return e;var l=r-nr(i);if(l<1)return i;var u=o?yn(o,0,l).join(""):e.slice(0,l);if(s===n)return u+i;if(o&&(l+=u.length-l),so(s)){if(e.slice(l).search(s)){var h,f=u;for(s.global||(s=Re(s.source,yo(ce.exec(s))+"g")),s.lastIndex=0;h=s.exec(f);)var c=h.index;u=u.slice(0,c===n?l:c)}}else if(e.indexOf(on(s),l)!=l){var d=u.lastIndexOf(s);d>-1&&(u=u.slice(0,d))}return u+i},kr.unescape=function(e){return(e=yo(e))&&q.test(e)?e.replace(z,or):e},kr.uniqueId=function(e){var t=++Me;return yo(e)+t},kr.upperCase=Xo,kr.upperFirst=Zo,kr.each=va,kr.eachRight=ya,kr.first=$s,ll(kr,(vl={},vi(kr,(function(e,t){De.call(kr.prototype,t)||(vl[t]=e)})),vl),{chain:!1}),kr.VERSION="4.17.21",yt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){kr[e].placeholder=kr})),yt(["drop","take"],(function(e,t){Vr.prototype[e]=function(r){r=r===n?1:gr(po(r),0);var i=this.__filtered__&&!t?new Vr(this):this.clone();return i.__filtered__?i.__takeCount__=_r(r,i.__takeCount__):i.__views__.push({size:_r(r,d),type:e+(i.__dir__<0?"Right":"")}),i},Vr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),yt(["filter","map","takeWhile"],(function(e,t){var r=t+1,i=1==r||3==r;Vr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:as(e,3),type:r}),t.__filtered__=t.__filtered__||i,t}})),yt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Vr.prototype[e]=function(){return this[r](1).value()[0]}})),yt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Vr.prototype[e]=function(){return this.__filtered__?new Vr(this):this[r](1)}})),Vr.prototype.compact=function(){return this.filter(nl)},Vr.prototype.find=function(e){return this.filter(e).head()},Vr.prototype.findLast=function(e){return this.reverse().find(e)},Vr.prototype.invokeMap=qi((function(e,t){return"function"==typeof e?new Vr(this):this.map((function(r){return Fi(r,e,t)}))})),Vr.prototype.reject=function(e){return this.filter(xa(as(e)))},Vr.prototype.slice=function(e,t){e=po(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Vr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=po(t))<0?r.dropRight(-t):r.take(t-e)),r)},Vr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vr.prototype.toArray=function(){return this.take(d)},vi(Vr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=kr[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);s&&(kr.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,l=t instanceof Vr,u=o[0],h=l||Wa(t),f=function(e){var t=s.apply(kr,wt([e],o));return i&&c?t[0]:t};h&&r&&"function"==typeof u&&1!=u.length&&(l=h=!1);var c=this.__chain__,d=!!this.__actions__.length,m=a&&!c,p=l&&!d;if(!a&&h){t=p?t:new Vr(this);var g=e.apply(t,o);return g.__actions__.push({func:da,args:[f],thisArg:n}),new Hr(g,c)}return m&&p?e.apply(this,o):(g=this.thru(f),m?i?g.value()[0]:g.value():g)})})),yt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Fe[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);kr.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(Wa(n)?n:[],e)}return this[r]((function(r){return t.apply(Wa(r)?r:[],e)}))}})),vi(Vr.prototype,(function(e,t){var r=kr[t];if(r){var i=r.name+"";De.call(Lr,i)||(Lr[i]=[]),Lr[i].push({name:t,func:r})}})),Lr[kn(n,2).name]=[{name:"wrapper",func:n}],Vr.prototype.clone=function(){var e=new Vr(this.__wrapped__);return e.__actions__=In(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=In(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=In(this.__views__),e},Vr.prototype.reverse=function(){if(this.__filtered__){var e=new Vr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Wa(e),i=t<0,n=r?e.length:0,s=function(e,t,r){for(var i=-1,n=r.length;++i<n;){var s=r[i],a=s.size;switch(s.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=_r(t,e+a);break;case"takeRight":e=gr(e,t-a)}}return{start:e,end:t}}(0,n,this.__views__),a=s.start,o=s.end,l=o-a,u=i?o:a-1,h=this.__iteratees__,f=h.length,c=0,d=_r(l,this.__takeCount__);if(!r||!i&&n==l&&d==l)return cn(e,this.__actions__);var m=[];e:for(;l--&&c<d;){for(var p=-1,g=e[u+=t];++p<f;){var _=h[p],v=_.iteratee,y=_.type,E=v(g);if(2==y)g=E;else if(!E){if(1==y)continue e;break e}}m[c++]=g}return m},kr.prototype.at=ma,kr.prototype.chain=function(){return ca(this)},kr.prototype.commit=function(){return new Hr(this.value(),this.__chain__)},kr.prototype.next=function(){this.__values__===n&&(this.__values__=co(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},kr.prototype.plant=function(e){for(var t,r=this;r instanceof Gr;){var i=Us(r);i.__index__=0,i.__values__=n,t?s.__wrapped__=i:t=i;var s=i;r=r.__wrapped__}return s.__wrapped__=e,t},kr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vr){var t=e;return this.__actions__.length&&(t=new Vr(this)),(t=t.reverse()).__actions__.push({func:da,args:[ea],thisArg:n}),new Hr(t,this.__chain__)}return this.thru(ea)},kr.prototype.toJSON=kr.prototype.valueOf=kr.prototype.value=function(){return cn(this.__wrapped__,this.__actions__)},kr.prototype.first=kr.prototype.head,at&&(kr.prototype[at]=function(){return this}),kr}();st._=lr,(i=function(){return lr}.call(t,r,t,e))===n||(e.exports=i)}.call(this)},9945:function(e){var t,r,i,n,s;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=s.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return i.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=r.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var h=o.path,f=h.substring(0,h.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(f)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=i.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var r=t.exec(e);return r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};return(()=>{"use strict";var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.FDPlayer=void 0;const t=new(r(5587).FDPlayer);e.FDPlayer=t})(),i})()));